2021-01-13 10:03:31.971 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:03:32.015 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:03:32.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:03:32.022 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:03:32.022 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:03:32.023 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:03:32.023 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:03:32.277 +08:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to find the required services. Please add all the required services by calling 'IServiceCollection.AddMvc' inside the call to 'ConfigureServices(...)' in the application startup code.
   at Microsoft.AspNetCore.Builder.MvcApplicationBuilderExtensions.UseMvc(IApplicationBuilder app, Action`1 configureRoutes)
   at Microsoft.AspNetCore.Builder.MvcApplicationBuilderExtensions.UseMvcWithDefaultRoute(IApplicationBuilder app)
   at IdentityServer.Startup.Configure(IApplicationBuilder app) in D:\WeaveMicro\微服务架构\IdentityServer\Startup.cs:line 54
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2021-01-13 10:03:55.236 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:03:55.297 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:03:55.300 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:03:55.300 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:03:55.300 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:03:55.300 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:03:55.301 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:03:56.101 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:03:56.101 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:03:57.298 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:03:57.299 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:03:57.300 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:03:57.301 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:03:57.301 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:03:57.302 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:03:57.302 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:03:57.391 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:03:57.408 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:04:03.992 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:04:03.996 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:04:03.998 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:04:04.002 +08:00 [DBG] Start discovery request
2021-01-13 10:04:04.267 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:04:04.269 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:04:04.270 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:04:04.274 +08:00 [DBG] Start key discovery request
2021-01-13 10:04:09.909 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:04:09.917 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:04:09.918 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:04:09.927 +08:00 [DBG] Start token request.
2021-01-13 10:04:09.934 +08:00 [DBG] Start client validation
2021-01-13 10:04:09.939 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:04:09.940 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:04:09.940 +08:00 [DBG] Secret id found: client
2021-01-13 10:04:09.954 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:04:09.962 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:04:09.962 +08:00 [DBG] Client validation success
2021-01-13 10:04:09.983 +08:00 [DBG] Start token request validation
2021-01-13 10:04:09.993 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:04:10.019 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:04:10.030 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:04:10.068 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:04:10.149 +08:00 [DBG] Token request success.
2021-01-13 10:11:02.231 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:11:02.264 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:11:02.267 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:11:02.267 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:11:02.268 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:11:02.268 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:11:02.268 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:11:02.757 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:11:02.757 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:12:08.887 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:12:08.920 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:12:08.923 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:12:08.924 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:12:08.924 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:12:08.924 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:12:08.924 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:12:09.594 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:12:09.594 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:12:10.648 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:12:10.649 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:12:10.650 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:12:10.651 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:12:10.651 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:12:10.651 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:12:10.652 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:12:10.734 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:12:10.749 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:12:16.229 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:12:16.245 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:12:16.256 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:12:16.270 +08:00 [DBG] Start discovery request
2021-01-13 10:12:16.494 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:12:16.495 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:12:16.496 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:12:16.502 +08:00 [DBG] Start key discovery request
2021-01-13 10:12:20.014 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:12:20.021 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:12:20.022 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:12:20.031 +08:00 [DBG] Start token request.
2021-01-13 10:12:20.038 +08:00 [DBG] Start client validation
2021-01-13 10:12:20.044 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:12:20.045 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:12:20.045 +08:00 [DBG] Secret id found: client
2021-01-13 10:12:20.057 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:12:20.067 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:12:20.067 +08:00 [DBG] Client validation success
2021-01-13 10:12:20.088 +08:00 [DBG] Start token request validation
2021-01-13 10:12:20.096 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:12:20.120 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:12:20.132 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:12:20.167 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:12:20.253 +08:00 [DBG] Token request success.
2021-01-13 10:12:41.489 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:12:41.524 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:12:41.527 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:12:41.527 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:12:41.528 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:12:41.528 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:12:41.528 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:12:42.137 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:12:42.137 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:14:16.172 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:14:16.236 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:14:16.250 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:14:16.268 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:14:16.274 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:14:16.276 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:14:16.277 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:14:16.662 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:14:16.662 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:14:43.151 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:14:43.197 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:14:43.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:14:43.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:14:43.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:14:43.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:14:43.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:14:43.777 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:14:43.777 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:16:26.719 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:16:26.761 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:16:26.764 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:16:26.765 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:16:26.765 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:16:26.765 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:16:26.767 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:16:27.371 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:16:28.543 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:16:28.546 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:16:28.547 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:16:28.547 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:16:28.548 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:16:28.548 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:16:28.549 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:16:28.642 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:16:28.659 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:16:33.914 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:16:33.918 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:16:33.919 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:16:33.923 +08:00 [DBG] Start discovery request
2021-01-13 10:16:34.158 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:16:34.166 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:16:34.167 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:16:34.173 +08:00 [DBG] Start key discovery request
2021-01-13 10:17:45.248 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:17:45.339 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:17:45.342 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:17:45.344 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:17:45.344 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:17:45.344 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:17:45.344 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:17:46.206 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:17:46.206 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:17:47.158 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:17:47.158 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:17:47.160 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:17:47.160 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:17:47.161 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:17:47.161 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:17:47.162 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:17:47.253 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:17:47.270 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:17:52.395 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:17:52.400 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:17:52.401 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:17:52.406 +08:00 [DBG] Start discovery request
2021-01-13 10:17:52.597 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:17:52.600 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:17:52.603 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:17:52.608 +08:00 [DBG] Start key discovery request
2021-01-13 10:18:35.999 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:18:36.006 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:18:36.007 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:18:36.018 +08:00 [DBG] Start token request.
2021-01-13 10:18:36.023 +08:00 [DBG] Start client validation
2021-01-13 10:18:36.029 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:18:36.030 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:18:36.030 +08:00 [DBG] Secret id found: client
2021-01-13 10:18:36.043 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:18:36.052 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:18:36.052 +08:00 [DBG] Client validation success
2021-01-13 10:19:10.143 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:19:10.179 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:19:10.181 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:19:10.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:19:10.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:19:10.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:19:10.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:19:10.776 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:19:10.790 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:19:12.282 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:19:12.285 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:19:12.287 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:19:12.291 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:19:12.292 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:19:12.293 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:19:12.294 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:19:12.409 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:19:12.481 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:19:13.524 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:19:13.530 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:19:13.531 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:19:13.537 +08:00 [DBG] Start discovery request
2021-01-13 10:19:13.783 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:19:13.786 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:19:13.788 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:19:13.794 +08:00 [DBG] Start key discovery request
2021-01-13 10:19:15.477 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:19:15.487 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:19:15.488 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:19:15.497 +08:00 [DBG] Start token request.
2021-01-13 10:19:15.504 +08:00 [DBG] Start client validation
2021-01-13 10:19:15.510 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:19:15.511 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:19:15.511 +08:00 [DBG] Secret id found: client
2021-01-13 10:19:15.525 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:19:15.535 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:19:15.535 +08:00 [DBG] Client validation success
2021-01-13 10:19:15.560 +08:00 [DBG] Start token request validation
2021-01-13 10:19:15.567 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:19:15.594 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:19:15.607 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:19:15.643 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:19:15.727 +08:00 [DBG] Token request success.
2021-01-13 10:24:12.217 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:24:12.267 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:24:12.272 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:24:12.272 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:24:12.272 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:24:12.273 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:24:12.273 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:24:12.693 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:24:12.693 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:24:13.910 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:24:13.911 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:24:13.913 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:24:13.913 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:24:13.914 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:24:13.917 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:24:13.918 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:24:14.015 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:24:14.033 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:24:19.057 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:24:19.063 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:24:19.065 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:24:19.072 +08:00 [DBG] Start discovery request
2021-01-13 10:24:19.606 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:24:19.675 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:24:19.721 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:24:19.749 +08:00 [DBG] Start key discovery request
2021-01-13 10:27:06.153 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:27:06.193 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:27:06.205 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:27:06.213 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:27:06.224 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:27:06.236 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:27:06.238 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:27:06.795 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:27:06.796 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:27:07.956 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:27:07.957 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:27:07.960 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:27:07.960 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:27:07.961 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:27:07.961 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:27:07.962 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:27:08.047 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:27:08.063 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:27:14.115 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:27:14.139 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:27:14.157 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:27:14.172 +08:00 [DBG] Start discovery request
2021-01-13 10:27:14.330 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:27:14.332 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:27:16.291 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:27:16.294 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:27:16.297 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:27:16.300 +08:00 [DBG] Start key discovery request
2021-01-13 10:27:22.590 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:27:22.599 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:27:22.600 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:27:22.607 +08:00 [DBG] Start token request.
2021-01-13 10:27:22.613 +08:00 [DBG] Start client validation
2021-01-13 10:27:22.620 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:27:22.621 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:27:22.621 +08:00 [DBG] Secret id found: client
2021-01-13 10:27:22.634 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:27:22.642 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:27:22.643 +08:00 [DBG] Client validation success
2021-01-13 10:27:22.666 +08:00 [DBG] Start token request validation
2021-01-13 10:27:22.673 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:27:22.699 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:27:22.711 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:27:22.747 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:27:22.823 +08:00 [DBG] Token request success.
2021-01-13 10:28:10.385 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:28:10.423 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:28:10.426 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:28:10.426 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:28:10.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:28:10.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:28:10.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:28:11.086 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:28:11.086 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:28:12.284 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:28:12.290 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:28:12.290 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:28:12.291 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:28:12.291 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:28:12.291 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:28:12.292 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:28:12.438 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:12.438 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:12.455 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:12.455 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:16.666 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:16.667 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:21.358 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:28:21.363 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:28:21.364 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:28:21.369 +08:00 [DBG] Start discovery request
2021-01-13 10:28:21.605 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:28:21.607 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:28:21.608 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:28:21.613 +08:00 [DBG] Start key discovery request
2021-01-13 10:28:23.536 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:28:23.545 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:28:23.546 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:28:23.555 +08:00 [DBG] Start token request.
2021-01-13 10:28:23.563 +08:00 [DBG] Start client validation
2021-01-13 10:28:23.568 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:28:23.569 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:28:23.569 +08:00 [DBG] Secret id found: client
2021-01-13 10:28:23.582 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:28:23.592 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:28:23.593 +08:00 [DBG] Client validation success
2021-01-13 10:28:23.614 +08:00 [DBG] Start token request validation
2021-01-13 10:28:23.621 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:28:23.647 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:28:23.659 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:28:23.697 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:28:23.774 +08:00 [DBG] Token request success.
2021-01-13 10:28:55.200 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:28:55.255 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:28:55.258 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:28:55.259 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:28:55.259 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:28:55.259 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:28:55.259 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:28:55.841 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:28:55.841 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:28:56.850 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:28:56.852 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:28:56.855 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:28:56.856 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:28:56.857 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:28:56.857 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:28:56.857 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:28:56.946 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:28:56.965 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:29:02.165 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:29:02.170 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:29:02.171 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:29:02.174 +08:00 [DBG] Start discovery request
2021-01-13 10:29:02.346 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:29:02.348 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:29:02.358 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:29:02.365 +08:00 [DBG] Start key discovery request
2021-01-13 10:33:07.536 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Concurrent reads or writes are not supported.
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at System.IO.Pipelines.Pipe.DefaultPipeReader.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.MessageBody.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 buffer, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 buffer, CancellationToken cancellationToken)
   at System.IO.StreamReader.ReadBufferAsync()
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 45
   at System.IO.StreamReader.ReadAsyncInternal(Memory`1 buffer, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.WebUtilities.FormReader.BufferAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.WebUtilities.FormReader.ReadNextPairAsyncImpl(CancellationToken cancellationToken)
2021-01-13 10:33:25.194 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:33:25.234 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:33:25.237 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:33:25.237 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:33:25.237 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:33:25.238 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:33:25.238 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:33:25.909 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:33:25.909 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:33:27.072 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:33:27.077 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:33:27.081 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:33:27.082 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:33:27.083 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:33:27.084 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:33:27.084 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:33:27.167 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:33:27.182 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:33:30.632 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:33:30.638 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:33:30.639 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:33:30.646 +08:00 [DBG] Start discovery request
2021-01-13 10:33:30.848 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:33:30.866 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:33:30.869 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:33:30.880 +08:00 [DBG] Start key discovery request
2021-01-13 10:37:50.876 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:37:50.965 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:37:50.975 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:37:50.983 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:37:50.986 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:37:50.987 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:37:50.994 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:37:51.609 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:37:51.609 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:37:52.832 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:37:52.838 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:37:52.841 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:37:52.843 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:37:52.843 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:37:52.844 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:37:52.845 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:37:52.941 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:37:52.958 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:37:58.243 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:37:58.247 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:37:58.249 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:37:58.253 +08:00 [DBG] Start discovery request
2021-01-13 10:37:58.457 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:37:58.460 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:37:58.462 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:37:58.470 +08:00 [DBG] Start key discovery request
2021-01-13 10:40:59.095 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:40:59.103 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:40:59.105 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:40:59.112 +08:00 [DBG] Start token request.
2021-01-13 10:40:59.118 +08:00 [DBG] Start client validation
2021-01-13 10:40:59.124 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:40:59.125 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:40:59.125 +08:00 [DBG] Secret id found: client
2021-01-13 10:40:59.136 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:40:59.146 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:40:59.147 +08:00 [DBG] Client validation success
2021-01-13 10:41:23.755 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:41:23.793 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:41:23.797 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:41:23.798 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:41:23.798 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:41:23.798 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:41:23.798 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:41:24.369 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:41:24.369 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:41:25.606 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:41:25.607 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:41:25.610 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:41:25.610 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:41:25.611 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:41:25.611 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:41:25.611 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:41:25.703 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:41:25.720 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:41:31.101 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:41:31.120 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:41:31.127 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:41:31.142 +08:00 [DBG] Start discovery request
2021-01-13 10:41:31.794 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:41:31.797 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:41:31.801 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:41:31.813 +08:00 [DBG] Start key discovery request
2021-01-13 10:41:36.929 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:41:36.937 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:41:36.938 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:41:36.946 +08:00 [DBG] Start token request.
2021-01-13 10:41:36.952 +08:00 [DBG] Start client validation
2021-01-13 10:41:36.958 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:41:36.958 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:41:36.958 +08:00 [DBG] Secret id found: client
2021-01-13 10:41:36.972 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:41:36.980 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:41:36.981 +08:00 [DBG] Client validation success
2021-01-13 10:43:22.476 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:43:22.518 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:43:22.521 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:43:22.521 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:43:22.521 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:43:22.522 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:43:22.522 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:43:23.352 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:43:23.352 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:58:59.970 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:59:00.007 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:59:00.010 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:59:00.013 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:59:00.014 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:59:00.014 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:59:00.014 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:59:00.483 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:59:00.483 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:59:01.766 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:59:01.766 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:59:01.768 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:59:01.768 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:59:01.769 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:59:01.769 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:59:01.769 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:59:01.859 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:59:01.875 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:59:06.753 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:59:06.757 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:59:06.758 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:59:06.762 +08:00 [DBG] Start discovery request
2021-01-13 10:59:06.960 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:59:06.962 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:59:06.963 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:59:06.968 +08:00 [DBG] Start key discovery request
2021-01-13 10:59:17.213 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:59:17.222 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:59:17.222 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:59:17.229 +08:00 [DBG] Start token request.
2021-01-13 10:59:17.237 +08:00 [DBG] Start client validation
2021-01-13 10:59:17.242 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:59:17.242 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:59:17.242 +08:00 [DBG] Secret id found: client
2021-01-13 10:59:17.256 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:59:17.266 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:59:17.267 +08:00 [DBG] Client validation success
2021-01-13 10:59:39.584 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 10:59:39.619 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 10:59:39.624 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 10:59:39.624 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 10:59:39.624 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 10:59:39.624 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 10:59:39.624 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 10:59:39.941 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 10:59:41.251 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 10:59:41.254 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 10:59:41.257 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 10:59:41.259 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 10:59:41.260 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 10:59:41.264 +08:00 [DBG] Error Url: /home/error
2021-01-13 10:59:41.264 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 10:59:41.363 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:59:41.379 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 10:59:43.032 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 10:59:43.037 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 10:59:43.038 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 10:59:43.042 +08:00 [DBG] Start discovery request
2021-01-13 10:59:43.260 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 10:59:43.264 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 10:59:43.268 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 10:59:43.276 +08:00 [DBG] Start key discovery request
2021-01-13 10:59:45.653 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 10:59:45.661 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 10:59:45.662 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 10:59:45.671 +08:00 [DBG] Start token request.
2021-01-13 10:59:45.679 +08:00 [DBG] Start client validation
2021-01-13 10:59:45.685 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 10:59:45.685 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 10:59:45.686 +08:00 [DBG] Secret id found: client
2021-01-13 10:59:45.700 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 10:59:45.709 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 10:59:45.709 +08:00 [DBG] Client validation success
2021-01-13 10:59:45.731 +08:00 [DBG] Start token request validation
2021-01-13 10:59:45.737 +08:00 [DBG] Start client credentials token request validation
2021-01-13 10:59:45.761 +08:00 [DBG] client credentials token request validation success
2021-01-13 10:59:45.773 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 10:59:45.820 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 10:59:45.904 +08:00 [DBG] Token request success.
2021-01-13 11:00:38.989 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:00:39.026 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:00:39.029 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:00:39.029 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:00:39.029 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:00:39.029 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:00:39.029 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:00:39.389 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:00:40.596 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:00:40.597 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:00:40.599 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:00:40.599 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:00:40.599 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:00:40.600 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:00:40.602 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:00:40.713 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:00:40.729 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:00:43.533 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:00:43.538 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:00:43.540 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:00:43.549 +08:00 [DBG] Start discovery request
2021-01-13 11:00:43.730 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:00:43.732 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:00:43.734 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:00:43.738 +08:00 [DBG] Start key discovery request
2021-01-13 11:01:20.951 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:01:20.986 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:01:20.988 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:01:20.989 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:01:20.989 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:01:20.989 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:01:20.989 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:01:21.465 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:01:21.465 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:01:23.002 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:01:23.006 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:01:23.007 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:01:23.008 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:01:23.009 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:01:23.011 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:01:23.012 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:01:23.151 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:01:23.170 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:01:25.966 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:01:25.978 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:01:25.980 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:01:25.985 +08:00 [DBG] Start discovery request
2021-01-13 11:01:26.214 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:01:26.216 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:01:26.222 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:01:26.232 +08:00 [DBG] Start key discovery request
2021-01-13 11:02:02.562 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:02:02.571 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:02:02.574 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:02:02.575 +08:00 [DBG] Start discovery request
2021-01-13 11:02:02.705 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:02:02.711 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:02:02.720 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:02:02.726 +08:00 [DBG] Start key discovery request
2021-01-13 11:12:01.781 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:12:01.823 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:12:01.826 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:12:01.827 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:12:01.828 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:12:01.828 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:12:01.828 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:12:02.616 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:12:02.616 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:12:03.764 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:12:03.766 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:12:03.767 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:12:03.768 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:12:03.768 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:12:03.769 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:12:03.770 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:12:03.856 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:12:03.873 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:12:08.529 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:12:08.539 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:12:08.544 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:12:08.548 +08:00 [DBG] Start discovery request
2021-01-13 11:12:08.730 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:12:08.734 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:12:08.735 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:12:08.741 +08:00 [DBG] Start key discovery request
2021-01-13 11:13:23.274 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:13:23.311 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:13:23.314 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:13:23.314 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:13:23.314 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:13:23.314 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:13:23.315 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:13:24.091 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:13:24.091 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:13:31.302 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:13:31.302 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:13:31.304 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:13:31.305 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:13:31.306 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:13:31.307 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:13:31.307 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:13:31.344 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:13:31.357 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:13:31.358 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:13:31.365 +08:00 [DBG] Start token request.
2021-01-13 11:13:31.376 +08:00 [DBG] Start client validation
2021-01-13 11:13:31.385 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:13:31.411 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:13:31.413 +08:00 [DBG] No secret in post body found
2021-01-13 11:13:31.414 +08:00 [DBG] Parser found no secret
2021-01-13 11:13:31.418 +08:00 [ERR] No client identifier found
2021-01-13 11:13:40.351 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:13:40.362 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:13:40.366 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:13:40.367 +08:00 [DBG] Start token request.
2021-01-13 11:13:40.369 +08:00 [DBG] Start client validation
2021-01-13 11:13:40.369 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:13:40.370 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:13:40.370 +08:00 [DBG] No secret in post body found
2021-01-13 11:13:40.371 +08:00 [DBG] Parser found no secret
2021-01-13 11:13:40.371 +08:00 [ERR] No client identifier found
2021-01-13 11:13:49.429 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:13:49.430 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:13:49.432 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:13:49.433 +08:00 [DBG] Start token request.
2021-01-13 11:13:49.433 +08:00 [DBG] Start client validation
2021-01-13 11:13:49.433 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:13:49.434 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:13:49.434 +08:00 [DBG] No secret in post body found
2021-01-13 11:13:49.435 +08:00 [DBG] Parser found no secret
2021-01-13 11:13:49.435 +08:00 [ERR] No client identifier found
2021-01-13 11:13:50.688 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:13:50.689 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:13:50.690 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:13:50.691 +08:00 [DBG] Start token request.
2021-01-13 11:13:50.691 +08:00 [DBG] Start client validation
2021-01-13 11:13:50.692 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:13:50.692 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:13:50.693 +08:00 [DBG] No secret in post body found
2021-01-13 11:13:50.693 +08:00 [DBG] Parser found no secret
2021-01-13 11:13:50.694 +08:00 [ERR] No client identifier found
2021-01-13 11:15:48.155 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:15:48.159 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:15:48.165 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:15:48.166 +08:00 [DBG] Start token request.
2021-01-13 11:15:48.166 +08:00 [DBG] Start client validation
2021-01-13 11:15:48.167 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:15:48.167 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:15:48.168 +08:00 [DBG] No secret in post body found
2021-01-13 11:15:48.168 +08:00 [DBG] Parser found no secret
2021-01-13 11:15:48.168 +08:00 [ERR] No client identifier found
2021-01-13 11:16:19.509 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:16:19.545 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:16:19.548 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:16:19.548 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:16:19.548 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:16:19.548 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:16:19.548 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:16:20.062 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:16:20.081 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:16:21.261 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:16:21.263 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:16:21.265 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:16:21.266 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:16:21.266 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:16:21.267 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:16:21.267 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:16:21.371 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:16:21.386 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:16:26.333 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:16:26.342 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:16:26.343 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:16:26.352 +08:00 [DBG] Start discovery request
2021-01-13 11:16:26.542 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:16:26.556 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:16:26.559 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:16:26.569 +08:00 [DBG] Start key discovery request
2021-01-13 11:18:22.463 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:18:22.466 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:18:22.472 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:18:22.474 +08:00 [DBG] Start discovery request
2021-01-13 11:19:09.376 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:19:09.377 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:19:09.381 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:19:09.382 +08:00 [DBG] Start key discovery request
2021-01-13 11:20:00.897 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:20:00.934 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:20:00.940 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:20:00.943 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:20:00.951 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:20:00.961 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:20:00.964 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:20:01.512 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:20:01.580 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:20:02.899 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:20:02.900 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:20:02.902 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:20:02.902 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:20:02.903 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:20:02.904 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:20:02.904 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:20:02.990 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:20:03.011 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:20:08.600 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:20:08.604 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:20:08.605 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:20:08.610 +08:00 [DBG] Start discovery request
2021-01-13 11:20:08.801 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:20:08.804 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:20:08.805 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:20:08.809 +08:00 [DBG] Start key discovery request
2021-01-13 11:20:30.557 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:20:30.597 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:20:30.600 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:20:30.600 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:20:30.600 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:20:30.601 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:20:30.601 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:20:31.257 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:20:31.277 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:20:32.457 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:20:32.464 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:20:32.472 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:20:32.477 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:20:32.481 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:20:32.482 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:20:32.483 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:20:32.600 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:20:32.623 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:20:32.664 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:20:32.713 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:20:32.739 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:20:32.800 +08:00 [DBG] Start discovery request
2021-01-13 11:20:33.489 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:20:33.508 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:20:33.523 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:20:33.544 +08:00 [DBG] Start key discovery request
2021-01-13 11:21:51.843 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:21:51.851 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:21:51.851 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:21:51.858 +08:00 [DBG] Start token request.
2021-01-13 11:21:51.867 +08:00 [DBG] Start client validation
2021-01-13 11:21:51.872 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:21:51.873 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 11:21:51.873 +08:00 [DBG] Secret id found: client
2021-01-13 11:21:51.884 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:21:51.893 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:21:51.893 +08:00 [DBG] Client validation success
2021-01-13 11:21:51.902 +08:00 [DBG] Start token request validation
2021-01-13 11:21:51.908 +08:00 [ERR] Grant type is missing, request details: []
2021-01-13 11:22:06.615 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:22:06.617 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:22:06.618 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:22:06.619 +08:00 [DBG] Start token request.
2021-01-13 11:22:06.620 +08:00 [DBG] Start client validation
2021-01-13 11:22:06.620 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:22:06.625 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:22:06.626 +08:00 [DBG] No secret in post body found
2021-01-13 11:22:06.626 +08:00 [DBG] Parser found no secret
2021-01-13 11:22:06.627 +08:00 [ERR] No client identifier found
2021-01-13 11:22:16.940 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:22:16.944 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:22:16.945 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:22:16.946 +08:00 [DBG] Start token request.
2021-01-13 11:22:16.946 +08:00 [DBG] Start client validation
2021-01-13 11:22:16.947 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:22:16.947 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:22:16.947 +08:00 [DBG] No secret in post body found
2021-01-13 11:22:16.948 +08:00 [DBG] Parser found no secret
2021-01-13 11:22:16.948 +08:00 [ERR] No client identifier found
2021-01-13 11:23:44.773 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:23:44.775 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:23:44.776 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:23:44.777 +08:00 [DBG] Start token request.
2021-01-13 11:23:44.778 +08:00 [DBG] Start client validation
2021-01-13 11:23:44.779 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:23:44.779 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:23:44.780 +08:00 [DBG] No secret in post body found
2021-01-13 11:23:44.780 +08:00 [DBG] Parser found no secret
2021-01-13 11:23:44.782 +08:00 [ERR] No client identifier found
2021-01-13 11:23:58.676 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:23:58.679 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:23:58.680 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:23:58.681 +08:00 [DBG] Start token request.
2021-01-13 11:23:58.682 +08:00 [DBG] Start client validation
2021-01-13 11:23:58.682 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:23:58.683 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:23:58.683 +08:00 [DBG] No secret in post body found
2021-01-13 11:23:58.684 +08:00 [DBG] Parser found no secret
2021-01-13 11:23:58.684 +08:00 [ERR] No client identifier found
2021-01-13 11:24:19.612 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:24:19.619 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:24:19.624 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:24:19.633 +08:00 [DBG] Start discovery request
2021-01-13 11:24:19.762 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:24:19.764 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:24:19.765 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:24:19.766 +08:00 [DBG] Start key discovery request
2021-01-13 11:24:26.102 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:24:26.103 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:24:26.104 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:24:26.105 +08:00 [DBG] Start token request.
2021-01-13 11:24:26.105 +08:00 [DBG] Start client validation
2021-01-13 11:24:26.106 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:24:26.106 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 11:24:26.107 +08:00 [DBG] Secret id found: client
2021-01-13 11:24:26.107 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:24:26.108 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:24:26.109 +08:00 [DBG] Client validation success
2021-01-13 11:24:26.109 +08:00 [DBG] Start token request validation
2021-01-13 11:24:26.110 +08:00 [ERR] Grant type is missing, request details: []
2021-01-13 11:25:18.009 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:25:18.051 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:25:18.054 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:25:18.054 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:25:18.054 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:25:18.055 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:25:18.055 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:25:18.561 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:25:18.561 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:25:19.802 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:25:19.805 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:25:19.806 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:25:19.807 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:25:19.809 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:25:19.810 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:25:19.811 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:25:19.923 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:25:19.938 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:25:23.999 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:25:24.004 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:25:24.005 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:25:24.008 +08:00 [DBG] Start discovery request
2021-01-13 11:25:24.217 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:25:24.223 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:25:24.228 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:25:24.237 +08:00 [DBG] Start key discovery request
2021-01-13 11:25:31.015 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:25:31.023 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:25:31.024 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:25:31.031 +08:00 [DBG] Start token request.
2021-01-13 11:25:31.039 +08:00 [DBG] Start client validation
2021-01-13 11:25:31.044 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:25:31.045 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 11:25:31.045 +08:00 [DBG] Secret id found: client
2021-01-13 11:25:31.058 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:25:31.067 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:25:31.067 +08:00 [DBG] Client validation success
2021-01-13 11:25:31.077 +08:00 [DBG] Start token request validation
2021-01-13 11:25:31.084 +08:00 [ERR] Grant type is missing, request details: []
2021-01-13 11:26:02.068 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:26:02.117 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:26:02.121 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:26:02.121 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:26:02.122 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:26:02.122 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:26:02.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:26:02.644 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:26:04.025 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:26:04.027 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:26:04.028 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:26:04.029 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:26:04.029 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:26:04.030 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:26:04.030 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:26:04.153 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:26:04.153 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:26:04.169 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:26:04.169 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:26:07.051 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:26:07.059 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:26:07.061 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:26:07.071 +08:00 [DBG] Start discovery request
2021-01-13 11:26:07.325 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:26:07.328 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:26:07.330 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:26:07.334 +08:00 [DBG] Start key discovery request
2021-01-13 11:26:12.812 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:26:12.823 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:26:12.835 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:26:12.839 +08:00 [DBG] Start discovery request
2021-01-13 11:26:12.967 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:26:12.971 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:26:12.977 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:26:12.990 +08:00 [DBG] Start key discovery request
2021-01-13 11:26:18.486 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:26:18.494 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:26:18.495 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:26:18.502 +08:00 [DBG] Start token request.
2021-01-13 11:26:18.507 +08:00 [DBG] Start client validation
2021-01-13 11:26:18.513 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:26:18.513 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 11:26:18.514 +08:00 [DBG] Secret id found: client
2021-01-13 11:26:18.526 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:26:18.535 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:26:18.535 +08:00 [DBG] Client validation success
2021-01-13 11:26:18.546 +08:00 [DBG] Start token request validation
2021-01-13 11:26:18.551 +08:00 [ERR] Grant type is missing, request details: []
2021-01-13 11:27:21.660 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:27:21.703 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:27:21.706 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:27:21.706 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:27:21.707 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:27:21.707 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:27:21.707 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:27:22.493 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:27:22.493 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:27:23.971 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:27:23.973 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:27:23.974 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:27:23.977 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:27:23.980 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:27:23.981 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:27:23.984 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:27:24.151 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:27:24.169 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:27:26.962 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:27:26.968 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:27:26.969 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:27:26.975 +08:00 [DBG] Start discovery request
2021-01-13 11:27:27.167 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:27:27.169 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:27:27.170 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:27:27.176 +08:00 [DBG] Start key discovery request
2021-01-13 11:27:43.354 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:27:43.404 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:27:43.408 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:27:43.408 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:27:43.408 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:27:43.409 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:27:43.409 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:27:44.319 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:27:44.363 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:27:45.509 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:27:45.511 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:27:45.512 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:27:45.513 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:27:45.514 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:27:45.515 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:27:45.516 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:27:45.599 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:27:45.616 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:27:50.178 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:27:50.185 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:27:50.193 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:27:50.206 +08:00 [DBG] Start discovery request
2021-01-13 11:27:50.383 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:27:50.385 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:27:50.386 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:27:50.393 +08:00 [DBG] Start key discovery request
2021-01-13 11:27:52.206 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Specified method is not supported.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.get_Position()
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 30
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 11:29:31.422 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:29:31.463 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:29:31.467 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:29:31.467 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:29:31.467 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:29:31.467 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:29:31.468 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:29:32.303 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:29:32.303 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:29:33.540 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:29:33.541 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:29:33.542 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:29:33.543 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:29:33.543 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:29:33.543 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:29:33.544 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:29:33.625 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:29:33.640 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:29:36.464 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:29:36.469 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:29:36.471 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:29:36.477 +08:00 [DBG] Start discovery request
2021-01-13 11:29:36.679 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:29:36.681 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:29:36.682 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:29:36.688 +08:00 [DBG] Start key discovery request
2021-01-13 11:29:38.434 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Specified method is not supported.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Seek(Int64 offset, SeekOrigin origin)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 30
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 11:30:09.005 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:30:09.040 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:30:09.042 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:30:09.043 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:30:09.043 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:30:09.043 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:30:09.043 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:30:09.628 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:30:11.053 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:30:11.056 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:30:11.058 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:30:11.058 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:30:11.059 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:30:11.060 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:30:11.060 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:30:11.153 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:30:11.168 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:30:12.947 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 11:30:13.037 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 11:30:13.079 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 11:30:13.141 +08:00 [DBG] Start discovery request
2021-01-13 11:30:13.844 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 11:30:13.851 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 11:30:13.853 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 11:30:13.881 +08:00 [DBG] Start key discovery request
2021-01-13 11:30:17.626 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:30:17.634 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:30:17.635 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:30:17.642 +08:00 [DBG] Start token request.
2021-01-13 11:30:17.648 +08:00 [DBG] Start client validation
2021-01-13 11:30:17.654 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:30:17.656 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 11:30:17.656 +08:00 [DBG] Secret id found: client
2021-01-13 11:30:17.669 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:30:17.678 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:30:17.678 +08:00 [DBG] Client validation success
2021-01-13 11:30:17.689 +08:00 [DBG] Start token request validation
2021-01-13 11:30:17.694 +08:00 [ERR] Grant type is missing, request details: []
2021-01-13 11:33:14.142 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:33:14.177 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:33:14.181 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:33:14.181 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:33:14.181 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:33:14.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:33:14.182 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:33:14.930 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:33:14.983 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:33:16.195 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:33:16.197 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:33:16.199 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:33:16.199 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:33:16.200 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:33:16.201 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:33:16.202 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:33:16.294 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:33:16.310 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:33:18.570 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:18.582 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:18.583 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:18.592 +08:00 [DBG] Start token request.
2021-01-13 11:33:18.599 +08:00 [DBG] Start client validation
2021-01-13 11:33:18.604 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:18.608 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:18.619 +08:00 [DBG] client id without secret found
2021-01-13 11:33:18.619 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:18.620 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:18.632 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:18.640 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:18.641 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:18.644 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:21.475 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:21.477 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:21.486 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:21.487 +08:00 [DBG] Start token request.
2021-01-13 11:33:21.488 +08:00 [DBG] Start client validation
2021-01-13 11:33:21.488 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:21.489 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:21.490 +08:00 [DBG] client id without secret found
2021-01-13 11:33:21.490 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:21.491 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:21.491 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:21.492 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:21.493 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:21.493 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:22.217 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:22.219 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:22.221 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:22.221 +08:00 [DBG] Start token request.
2021-01-13 11:33:22.222 +08:00 [DBG] Start client validation
2021-01-13 11:33:22.222 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:22.223 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:22.223 +08:00 [DBG] client id without secret found
2021-01-13 11:33:22.223 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:22.224 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:22.224 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:22.225 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:22.226 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:22.227 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:22.904 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:22.909 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:22.910 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:22.911 +08:00 [DBG] Start token request.
2021-01-13 11:33:22.911 +08:00 [DBG] Start client validation
2021-01-13 11:33:22.912 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:22.912 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:22.913 +08:00 [DBG] client id without secret found
2021-01-13 11:33:22.914 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:22.914 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:22.915 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:22.916 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:22.917 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:22.917 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:27.833 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:27.836 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:27.837 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:27.838 +08:00 [DBG] Start token request.
2021-01-13 11:33:27.838 +08:00 [DBG] Start client validation
2021-01-13 11:33:27.839 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:27.839 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:27.846 +08:00 [DBG] client id without secret found
2021-01-13 11:33:27.849 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:27.849 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:27.850 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:27.851 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:27.852 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:27.852 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:28.625 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:28.627 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:28.628 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:28.629 +08:00 [DBG] Start token request.
2021-01-13 11:33:28.629 +08:00 [DBG] Start client validation
2021-01-13 11:33:28.630 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:28.630 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:28.631 +08:00 [DBG] client id without secret found
2021-01-13 11:33:28.631 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:28.631 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:28.632 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:28.632 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:28.633 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:28.634 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:29.413 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:29.416 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:29.417 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:29.418 +08:00 [DBG] Start token request.
2021-01-13 11:33:29.418 +08:00 [DBG] Start client validation
2021-01-13 11:33:29.420 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:29.421 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:29.422 +08:00 [DBG] client id without secret found
2021-01-13 11:33:29.422 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:29.423 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:29.424 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:29.425 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:29.428 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:29.428 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:30.248 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:30.265 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:30.271 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:30.274 +08:00 [DBG] Start token request.
2021-01-13 11:33:30.275 +08:00 [DBG] Start client validation
2021-01-13 11:33:30.285 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:30.287 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:30.288 +08:00 [DBG] client id without secret found
2021-01-13 11:33:30.289 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:30.289 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:30.290 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:30.292 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:30.293 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:30.294 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:30.690 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:30.692 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:30.693 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:30.693 +08:00 [DBG] Start token request.
2021-01-13 11:33:30.694 +08:00 [DBG] Start client validation
2021-01-13 11:33:30.694 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:30.695 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:30.695 +08:00 [DBG] client id without secret found
2021-01-13 11:33:30.696 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:30.696 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:30.697 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:30.697 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:30.698 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:30.698 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:31.597 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:31.601 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:31.602 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:31.604 +08:00 [DBG] Start token request.
2021-01-13 11:33:31.605 +08:00 [DBG] Start client validation
2021-01-13 11:33:31.606 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:31.606 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:31.609 +08:00 [DBG] client id without secret found
2021-01-13 11:33:31.609 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:31.612 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:31.613 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:31.615 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:31.615 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:31.616 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:33:32.017 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:33:32.024 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:33:32.032 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:33:32.033 +08:00 [DBG] Start token request.
2021-01-13 11:33:32.034 +08:00 [DBG] Start client validation
2021-01-13 11:33:32.035 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:33:32.038 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:33:32.039 +08:00 [DBG] client id without secret found
2021-01-13 11:33:32.040 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:33:32.043 +08:00 [DBG] Secret id found: client
2021-01-13 11:33:32.046 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:33:32.047 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:33:32.048 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:33:32.048 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:35:34.208 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:35:34.254 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:35:34.256 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:35:34.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:35:34.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:35:34.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:35:34.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:35:35.009 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:35:35.010 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:35:36.254 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:35:36.256 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:35:36.257 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:35:36.258 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:35:36.258 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:35:36.261 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:35:36.261 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:35:36.344 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:35:36.361 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:35:42.588 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:35:42.601 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:35:42.602 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:35:42.610 +08:00 [DBG] Start token request.
2021-01-13 11:35:42.616 +08:00 [DBG] Start client validation
2021-01-13 11:35:42.621 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:35:42.625 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:35:42.636 +08:00 [DBG] client id without secret found
2021-01-13 11:35:42.636 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:35:42.636 +08:00 [DBG] Secret id found: client
2021-01-13 11:35:42.651 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:35:42.660 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:35:42.660 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:35:42.663 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:35:43.560 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:35:43.563 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:35:43.564 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:35:43.565 +08:00 [DBG] Start token request.
2021-01-13 11:35:43.565 +08:00 [DBG] Start client validation
2021-01-13 11:35:43.566 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:35:43.566 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:35:43.567 +08:00 [DBG] client id without secret found
2021-01-13 11:35:43.567 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:35:43.567 +08:00 [DBG] Secret id found: client
2021-01-13 11:35:43.568 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:35:43.569 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:35:43.569 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:35:43.570 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:35:44.336 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:35:44.337 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:35:44.338 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:35:44.339 +08:00 [DBG] Start token request.
2021-01-13 11:35:44.339 +08:00 [DBG] Start client validation
2021-01-13 11:35:44.340 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:35:44.340 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:35:44.341 +08:00 [DBG] client id without secret found
2021-01-13 11:35:44.341 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:35:44.342 +08:00 [DBG] Secret id found: client
2021-01-13 11:35:44.343 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:35:44.344 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:35:44.345 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:35:44.345 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:35:45.767 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:35:45.768 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:35:45.769 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:35:45.770 +08:00 [DBG] Start token request.
2021-01-13 11:35:45.770 +08:00 [DBG] Start client validation
2021-01-13 11:35:45.770 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:35:45.771 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:35:45.772 +08:00 [DBG] client id without secret found
2021-01-13 11:35:45.772 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:35:45.772 +08:00 [DBG] Secret id found: client
2021-01-13 11:35:45.773 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:35:45.774 +08:00 [DBG] Hashed shared secret validator cannot process NoSecret
2021-01-13 11:35:45.774 +08:00 [DBG] Secret validators could not validate secret
2021-01-13 11:35:45.775 +08:00 [ERR] Client secret validation failed for client: client.
2021-01-13 11:36:21.029 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:36:21.030 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:36:21.032 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:36:21.034 +08:00 [DBG] Start token request.
2021-01-13 11:36:21.034 +08:00 [DBG] Start client validation
2021-01-13 11:36:21.035 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:36:21.035 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:36:21.036 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:36:21.036 +08:00 [DBG] Secret id found: client
2021-01-13 11:36:21.037 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:36:21.039 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:36:21.043 +08:00 [DBG] Client validation success
2021-01-13 11:36:21.056 +08:00 [DBG] Start token request validation
2021-01-13 11:36:21.066 +08:00 [DBG] Start validation of custom grant token request
2021-01-13 11:36:21.079 +08:00 [ERR] ["client"] does not have the custom grant type in the allowed list, therefore requested grant is not allowed, request details: {"ClientId":"client","ClientName":null,"GrantType":"Password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"Password","scope":"api1","client_Id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-01-13 11:36:25.298 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:36:25.320 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:36:25.334 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:36:25.341 +08:00 [DBG] Start token request.
2021-01-13 11:36:25.342 +08:00 [DBG] Start client validation
2021-01-13 11:36:25.342 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:36:25.342 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:36:25.343 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:36:25.343 +08:00 [DBG] Secret id found: client
2021-01-13 11:36:25.344 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:36:25.345 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:36:25.345 +08:00 [DBG] Client validation success
2021-01-13 11:36:25.346 +08:00 [DBG] Start token request validation
2021-01-13 11:36:25.347 +08:00 [DBG] Start validation of custom grant token request
2021-01-13 11:36:25.347 +08:00 [ERR] ["client"] does not have the custom grant type in the allowed list, therefore requested grant is not allowed, request details: {"ClientId":"client","ClientName":null,"GrantType":"Password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"Password","scope":"api1","client_Id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-01-13 11:36:33.065 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:36:33.078 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:36:33.080 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:36:33.090 +08:00 [DBG] Start token request.
2021-01-13 11:36:33.091 +08:00 [DBG] Start client validation
2021-01-13 11:36:33.091 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:36:33.094 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:36:33.096 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:36:33.097 +08:00 [DBG] Secret id found: client
2021-01-13 11:36:33.097 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:36:33.103 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:36:33.104 +08:00 [DBG] Client validation success
2021-01-13 11:36:33.104 +08:00 [DBG] Start token request validation
2021-01-13 11:36:33.112 +08:00 [DBG] Start resource owner password token request validation
2021-01-13 11:36:33.144 +08:00 [ERR] Username or password missing, request details: []
2021-01-13 11:37:45.744 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:37:45.776 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:37:45.779 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:37:45.779 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:37:45.779 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:37:45.779 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:37:45.779 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:37:46.107 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:37:47.148 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:37:47.149 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:37:47.151 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:37:47.151 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:37:47.151 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:37:47.152 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:37:47.152 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:37:47.223 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:37:47.238 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:37:52.998 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:37:53.014 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:37:53.016 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:37:53.025 +08:00 [DBG] Start token request.
2021-01-13 11:37:53.031 +08:00 [DBG] Start client validation
2021-01-13 11:37:53.036 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:37:53.040 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:37:53.050 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:37:53.051 +08:00 [DBG] Secret id found: client
2021-01-13 11:37:53.062 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:37:53.071 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:37:53.072 +08:00 [DBG] Client validation success
2021-01-13 11:37:53.081 +08:00 [DBG] Start token request validation
2021-01-13 11:37:53.089 +08:00 [DBG] Start client credentials token request validation
2021-01-13 11:37:53.118 +08:00 [DBG] client credentials token request validation success
2021-01-13 11:37:53.128 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-01-13 11:37:53.162 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 11:37:53.247 +08:00 [DBG] Token request success.
2021-01-13 11:38:18.948 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:38:18.982 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:38:18.987 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:38:18.988 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:38:18.988 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:38:18.989 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:38:18.991 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:38:19.834 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:38:19.850 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:38:21.016 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:38:21.026 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:38:21.028 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:38:21.029 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:38:21.029 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:38:21.029 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:38:21.030 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:38:21.127 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:38:21.145 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:38:25.384 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:25.397 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:25.397 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:25.404 +08:00 [DBG] Start token request.
2021-01-13 11:38:25.411 +08:00 [DBG] Start client validation
2021-01-13 11:38:25.416 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:25.419 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:25.421 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:25.421 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:25.424 +08:00 [ERR] No client identifier found
2021-01-13 11:38:35.301 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:35.303 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:35.304 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:35.305 +08:00 [DBG] Start token request.
2021-01-13 11:38:35.305 +08:00 [DBG] Start client validation
2021-01-13 11:38:35.306 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:35.306 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:35.306 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:35.307 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:35.307 +08:00 [ERR] No client identifier found
2021-01-13 11:38:41.796 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:41.803 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:41.805 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:41.805 +08:00 [DBG] Start token request.
2021-01-13 11:38:41.806 +08:00 [DBG] Start client validation
2021-01-13 11:38:41.807 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:41.807 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:41.817 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:41.818 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:41.818 +08:00 [ERR] No client identifier found
2021-01-13 11:38:42.659 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:42.663 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:42.673 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:42.675 +08:00 [DBG] Start token request.
2021-01-13 11:38:42.676 +08:00 [DBG] Start client validation
2021-01-13 11:38:42.676 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:42.676 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:42.677 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:42.677 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:42.678 +08:00 [ERR] No client identifier found
2021-01-13 11:38:43.401 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:43.405 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:43.408 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:43.409 +08:00 [DBG] Start token request.
2021-01-13 11:38:43.409 +08:00 [DBG] Start client validation
2021-01-13 11:38:43.409 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:43.410 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:43.410 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:43.411 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:43.411 +08:00 [ERR] No client identifier found
2021-01-13 11:38:44.962 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:44.965 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:44.966 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:44.967 +08:00 [DBG] Start token request.
2021-01-13 11:38:44.968 +08:00 [DBG] Start client validation
2021-01-13 11:38:44.968 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:44.969 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:44.971 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:44.972 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:44.974 +08:00 [ERR] No client identifier found
2021-01-13 11:38:45.902 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:45.903 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:45.904 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:45.905 +08:00 [DBG] Start token request.
2021-01-13 11:38:45.906 +08:00 [DBG] Start client validation
2021-01-13 11:38:45.906 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:45.908 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:38:45.908 +08:00 [DBG] No secret in post body found
2021-01-13 11:38:45.910 +08:00 [DBG] Parser found no secret
2021-01-13 11:38:45.914 +08:00 [ERR] No client identifier found
2021-01-13 11:38:53.136 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:38:53.138 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:38:53.140 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:38:53.142 +08:00 [DBG] Start token request.
2021-01-13 11:38:53.142 +08:00 [DBG] Start client validation
2021-01-13 11:38:53.142 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:38:53.143 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:39:15.774 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:39:15.811 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:39:15.816 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:39:15.816 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:39:15.817 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:39:15.818 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:39:15.818 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:39:16.492 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:39:16.492 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:39:17.708 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:39:17.710 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:39:17.714 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:39:17.717 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:39:17.723 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:39:17.724 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:39:17.725 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:39:17.816 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:39:17.831 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:39:22.499 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:39:22.510 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:39:22.511 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:39:22.519 +08:00 [DBG] Start token request.
2021-01-13 11:39:22.525 +08:00 [DBG] Start client validation
2021-01-13 11:39:22.530 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:39:22.534 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:39:33.233 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:39:33.272 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:39:33.275 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:39:33.275 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:39:33.275 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:39:33.275 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:39:33.275 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:39:33.999 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:39:35.158 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:39:35.159 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:39:35.161 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:39:35.161 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:39:35.161 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:39:35.162 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:39:35.162 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:39:35.262 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:39:35.278 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:39:36.369 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:39:36.386 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:39:36.387 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:39:36.395 +08:00 [DBG] Start token request.
2021-01-13 11:39:36.401 +08:00 [DBG] Start client validation
2021-01-13 11:39:36.407 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:39:36.411 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:39:36.423 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:39:36.424 +08:00 [DBG] Secret id found: client
2021-01-13 11:39:36.436 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:39:36.446 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:39:36.446 +08:00 [DBG] Client validation success
2021-01-13 11:39:36.460 +08:00 [DBG] Start token request validation
2021-01-13 11:39:36.468 +08:00 [DBG] Start client credentials token request validation
2021-01-13 11:39:36.502 +08:00 [DBG] client credentials token request validation success
2021-01-13 11:39:36.514 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-01-13 11:39:36.550 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 11:39:36.645 +08:00 [DBG] Token request success.
2021-01-13 11:42:36.480 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:42:36.520 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:42:36.523 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:42:36.523 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:42:36.523 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:42:36.523 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:42:36.524 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:42:37.232 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:42:38.519 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:42:38.520 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:42:38.521 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:42:38.522 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:42:38.523 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:42:38.523 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:42:38.524 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:42:38.603 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:42:38.617 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:42:41.930 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Specified method is not supported.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Seek(Int64 offset, SeekOrigin origin)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 30
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 11:44:24.180 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Specified method is not supported.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Seek(Int64 offset, SeekOrigin origin)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 30
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 11:44:32.402 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:44:51.899 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:44:51.947 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:44:51.959 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:44:51.959 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:44:51.960 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:44:51.960 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:44:51.960 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:44:52.738 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:44:52.738 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:44:53.837 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:44:53.841 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:44:53.849 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:44:53.849 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:44:53.850 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:44:53.851 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:44:53.851 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:44:53.939 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:44:53.954 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:44:56.046 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:44:56.058 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:44:56.059 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:44:56.076 +08:00 [DBG] Start token request.
2021-01-13 11:44:56.083 +08:00 [DBG] Start client validation
2021-01-13 11:44:56.088 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:44:56.091 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:44:56.095 +08:00 [DBG] No secret in post body found
2021-01-13 11:44:56.098 +08:00 [DBG] Parser found no secret
2021-01-13 11:44:56.101 +08:00 [ERR] No client identifier found
2021-01-13 11:44:58.264 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:44:58.265 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:44:58.268 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:44:58.269 +08:00 [DBG] Start token request.
2021-01-13 11:44:58.269 +08:00 [DBG] Start client validation
2021-01-13 11:44:58.270 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:44:58.270 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:44:58.271 +08:00 [DBG] No secret in post body found
2021-01-13 11:44:58.272 +08:00 [DBG] Parser found no secret
2021-01-13 11:44:58.272 +08:00 [ERR] No client identifier found
2021-01-13 11:44:59.232 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:44:59.234 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:44:59.235 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:44:59.236 +08:00 [DBG] Start token request.
2021-01-13 11:44:59.236 +08:00 [DBG] Start client validation
2021-01-13 11:44:59.237 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:44:59.237 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:44:59.238 +08:00 [DBG] No secret in post body found
2021-01-13 11:44:59.240 +08:00 [DBG] Parser found no secret
2021-01-13 11:44:59.244 +08:00 [ERR] No client identifier found
2021-01-13 11:45:36.699 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:45:36.763 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:45:36.767 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:45:36.767 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:45:36.767 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:45:36.767 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:45:36.768 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:45:37.142 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:45:38.402 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:45:38.403 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:45:38.405 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:45:38.406 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:45:38.407 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:45:38.408 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:45:38.411 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:45:38.498 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:45:38.513 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:45:41.747 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Specified method is not supported.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Seek(Int64 offset, SeekOrigin origin)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 32
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 11:48:59.320 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:48:59.382 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:48:59.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:48:59.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:48:59.389 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:48:59.389 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:48:59.389 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:48:59.704 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:49:01.168 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:49:01.169 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:49:01.171 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:49:01.171 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:49:01.172 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:49:01.172 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:49:01.172 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:49:01.257 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:49:01.272 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:49:03.702 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:49:03.712 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:49:03.713 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:49:03.722 +08:00 [DBG] Start token request.
2021-01-13 11:49:03.728 +08:00 [DBG] Start client validation
2021-01-13 11:49:03.733 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:49:03.737 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:49:03.745 +08:00 [DBG] No secret in post body found
2021-01-13 11:49:03.745 +08:00 [DBG] Parser found no secret
2021-01-13 11:49:03.749 +08:00 [ERR] No client identifier found
2021-01-13 11:49:24.710 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:49:24.750 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:49:24.753 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:49:24.753 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:49:24.753 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:49:24.753 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:49:24.754 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:49:25.298 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:49:25.298 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:49:26.462 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:49:26.464 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:49:26.465 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:49:26.465 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:49:26.466 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:49:26.466 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:49:26.467 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:49:26.551 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:49:26.570 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:49:28.243 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 11:49:28.254 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 11:49:28.255 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 11:49:28.265 +08:00 [DBG] Start token request.
2021-01-13 11:49:28.274 +08:00 [DBG] Start client validation
2021-01-13 11:49:28.279 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 11:49:28.283 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 11:49:28.288 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 11:49:28.289 +08:00 [DBG] Secret id found: client
2021-01-13 11:49:28.301 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 11:49:28.310 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 11:49:28.310 +08:00 [DBG] Client validation success
2021-01-13 11:49:28.320 +08:00 [DBG] Start token request validation
2021-01-13 11:49:28.328 +08:00 [DBG] Start client credentials token request validation
2021-01-13 11:49:28.358 +08:00 [DBG] client credentials token request validation success
2021-01-13 11:49:28.368 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-01-13 11:49:28.402 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 11:49:28.484 +08:00 [DBG] Token request success.
2021-01-13 11:52:10.556 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 11:52:10.591 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 11:52:10.594 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 11:52:10.595 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 11:52:10.595 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 11:52:10.595 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 11:52:10.595 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 11:52:11.500 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:52:11.500 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 11:52:12.654 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 11:52:12.656 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 11:52:12.657 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 11:52:12.658 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 11:52:12.658 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 11:52:12.659 +08:00 [DBG] Error Url: /home/error
2021-01-13 11:52:12.659 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 11:52:12.748 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:52:12.764 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 11:52:14.910 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonReaderException: Unexpected character encountered while parsing value: g. Path '', line 0, position 0.
   at Newtonsoft.Json.JsonTextReader.ParseValue()
   at Newtonsoft.Json.JsonTextReader.Read()
   at Newtonsoft.Json.JsonReader.ReadForType(JsonContract contract, Boolean hasConverter)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 37
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:14:30.216 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:14:30.253 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:14:30.256 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:14:30.256 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:14:30.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:14:30.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:14:30.257 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:14:30.580 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:14:30.553 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:14:31.723 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:14:31.732 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:14:31.734 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:14:31.735 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:14:31.736 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:14:31.736 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:14:31.737 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:14:31.835 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:14:31.854 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:14:40.162 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:14:40.197 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:14:40.201 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:14:40.201 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:14:40.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:14:40.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:14:40.202 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:14:40.565 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:14:41.662 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:14:41.663 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:14:41.665 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:14:41.667 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:14:41.667 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:14:41.668 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:14:41.668 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:14:41.752 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:14:41.768 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:15:48.929 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:15:48.985 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:15:48.990 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:15:48.991 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:15:48.993 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:15:48.993 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:15:48.993 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:15:49.871 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:15:49.823 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:15:50.918 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:15:50.919 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:15:50.920 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:15:50.921 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:15:50.921 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:15:50.922 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:15:50.922 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:15:51.003 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:15:51.018 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:15:53.287 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:15:53.298 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:15:53.300 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:15:53.307 +08:00 [DBG] Start token request.
2021-01-13 12:15:53.313 +08:00 [DBG] Start client validation
2021-01-13 12:15:53.318 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:15:53.321 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:15:53.326 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:15:53.326 +08:00 [DBG] Secret id found: client
2021-01-13 12:15:53.339 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:15:53.349 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:15:53.349 +08:00 [DBG] Client validation success
2021-01-13 12:15:53.358 +08:00 [DBG] Start token request validation
2021-01-13 12:15:53.366 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:15:53.394 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:15:53.406 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:15:53.440 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:15:53.527 +08:00 [DBG] Token request success.
2021-01-13 12:15:53.540 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:15:53.541 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:15:53.542 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:15:53.544 +08:00 [DBG] Start token request.
2021-01-13 12:15:53.545 +08:00 [DBG] Start client validation
2021-01-13 12:15:53.545 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:15:53.546 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:15:53.546 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:15:53.547 +08:00 [DBG] Secret id found: client
2021-01-13 12:15:53.547 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:15:53.548 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:15:53.548 +08:00 [DBG] Client validation success
2021-01-13 12:15:53.549 +08:00 [DBG] Start token request validation
2021-01-13 12:15:53.549 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:15:53.550 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:15:53.550 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:15:53.553 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:15:53.556 +08:00 [DBG] Token request success.
2021-01-13 12:15:53.631 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:15:53.743 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 73
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:15:53.765 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:15:53.793 +08:00 [ERR] Connection id "0HM5NF7KC4AH2", Request id "0HM5NF7KC4AH2:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 73
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:15:58.219 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:15:58.220 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:15:58.221 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:15:58.222 +08:00 [DBG] Start token request.
2021-01-13 12:15:58.222 +08:00 [DBG] Start client validation
2021-01-13 12:15:58.223 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:15:58.223 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:15:58.224 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:15:58.224 +08:00 [DBG] Secret id found: client
2021-01-13 12:15:58.224 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:15:58.226 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:15:58.226 +08:00 [DBG] Client validation success
2021-01-13 12:15:58.227 +08:00 [DBG] Start token request validation
2021-01-13 12:15:58.227 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:15:58.228 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:15:58.229 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:15:58.232 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:15:58.236 +08:00 [DBG] Token request success.
2021-01-13 12:15:58.236 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:15:58.237 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:15:58.237 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:15:58.238 +08:00 [DBG] Start token request.
2021-01-13 12:15:58.239 +08:00 [DBG] Start client validation
2021-01-13 12:15:58.239 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:15:58.239 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:15:58.240 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:15:58.240 +08:00 [DBG] Secret id found: client
2021-01-13 12:15:58.241 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:15:58.244 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:15:58.244 +08:00 [DBG] Client validation success
2021-01-13 12:15:58.245 +08:00 [DBG] Start token request validation
2021-01-13 12:15:58.245 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:15:58.245 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:15:58.246 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:15:58.249 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:15:58.252 +08:00 [DBG] Token request success.
2021-01-13 12:15:58.290 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:15:58.393 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 73
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:15:58.398 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:15:58.426 +08:00 [ERR] Connection id "0HM5NF7KC4AH4", Request id "0HM5NF7KC4AH4:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 73
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:18:08.130 +08:00 [DBG] Hosting starting
2021-01-13 12:18:18.842 +08:00 [DBG] Hosting starting
2021-01-13 12:20:07.599 +08:00 [DBG] Hosting starting
2021-01-13 12:20:38.070 +08:00 [DBG] Hosting starting
2021-01-13 12:20:38.319 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:20:38.344 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:20:38.443 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:20:38.500 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:20:38.598 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:20:38.599 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:20:38.600 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:20:38.602 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:20:38.604 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:20:38.609 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:20:38.610 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:20:38.661 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:20:38.746 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:20:38.747 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:20:38.747 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:20:38.748 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:20:38.748 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:20:38.749 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:20:38.761 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:20:38.894 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:20:38.933 +08:00 [DBG] Hosting started
2021-01-13 12:20:38.935 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:20:39.017 +08:00 [DBG] Connection id "0HM5NFAAJ7PNF" started.
2021-01-13 12:20:39.018 +08:00 [DBG] Connection id "0HM5NFAAJ7PNG" started.
2021-01-13 12:20:39.056 +08:00 [DBG] Connection id "0HM5NFAAJ7PNF" received FIN.
2021-01-13 12:20:39.056 +08:00 [DBG] Connection id "0HM5NFAAJ7PNG" received FIN.
2021-01-13 12:20:39.074 +08:00 [DBG] Connection id "0HM5NFAAJ7PNF" sending FIN.
2021-01-13 12:20:39.075 +08:00 [DBG] Connection id "0HM5NFAAJ7PNG" sending FIN.
2021-01-13 12:20:39.218 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:20:39.218 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:20:39.269 +08:00 [DBG] Connection id "0HM5NFAAJ7PNF" stopped.
2021-01-13 12:20:39.269 +08:00 [DBG] Connection id "0HM5NFAAJ7PNG" stopped.
2021-01-13 12:20:39.929 +08:00 [DBG] Connection id "0HM5NFAAJ7PNH" started.
2021-01-13 12:20:40.171 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:20:40.177 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:20:40.208 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:20:40.208 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:20:40.209 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:20:40.210 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:20:40.210 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:20:40.211 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:20:40.211 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:20:40.327 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:20:40.343 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:20:40.353 +08:00 [DBG] Connection id "0HM5NFAAJ7PNH" completed keep alive response.
2021-01-13 12:20:40.358 +08:00 [INF] Request finished in 188.0855ms 404 
2021-01-13 12:20:44.683 +08:00 [DBG] Connection id "0HM5NFAAJ7PNI" started.
2021-01-13 12:20:44.695 +08:00 [DBG] Connection id "0HM5NFAAJ7PNI" received FIN.
2021-01-13 12:20:44.696 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ" started.
2021-01-13 12:20:44.696 +08:00 [DBG] Connection id "0HM5NFAAJ7PNI" disconnecting.
2021-01-13 12:20:44.698 +08:00 [DBG] Connection id "0HM5NFAAJ7PNI" sending FIN.
2021-01-13 12:20:44.699 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:20:44.700 +08:00 [DBG] Connection id "0HM5NFAAJ7PNI" stopped.
2021-01-13 12:20:44.703 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ", Request id "0HM5NFAAJ7PNJ:00000001": started reading request body.
2021-01-13 12:20:44.707 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ", Request id "0HM5NFAAJ7PNJ:00000001": done reading request body.
2021-01-13 12:20:44.714 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:20:44.715 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:20:44.726 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:20:44.736 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:20:44.737 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:20:44.745 +08:00 [DBG] Start token request.
2021-01-13 12:20:44.751 +08:00 [DBG] Start client validation
2021-01-13 12:20:44.756 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:20:44.760 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:20:44.765 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:20:44.766 +08:00 [DBG] Secret id found: client
2021-01-13 12:20:44.778 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:20:44.786 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:20:44.786 +08:00 [DBG] Client validation success
2021-01-13 12:20:44.797 +08:00 [DBG] Start token request validation
2021-01-13 12:20:44.805 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:20:44.835 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:20:44.847 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:20:44.878 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:20:44.957 +08:00 [DBG] Token request success.
2021-01-13 12:20:44.969 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:20:44.970 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:20:44.971 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:20:44.973 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:20:44.975 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:20:44.976 +08:00 [DBG] Start token request.
2021-01-13 12:20:44.976 +08:00 [DBG] Start client validation
2021-01-13 12:20:44.977 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:20:44.978 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:20:44.978 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:20:44.979 +08:00 [DBG] Secret id found: client
2021-01-13 12:20:44.979 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:20:44.980 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:20:44.981 +08:00 [DBG] Client validation success
2021-01-13 12:20:44.981 +08:00 [DBG] Start token request validation
2021-01-13 12:20:44.982 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:20:44.982 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:20:44.983 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:20:44.985 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:20:44.989 +08:00 [DBG] Token request success.
2021-01-13 12:20:45.045 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:20:45.151 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 74
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:20:45.171 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:20:45.201 +08:00 [ERR] Connection id "0HM5NFAAJ7PNJ", Request id "0HM5NFAAJ7PNJ:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 74
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:20:45.207 +08:00 [INF] Request finished in 507.9097ms 200 application/json; charset=UTF-8
2021-01-13 12:20:45.208 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ" disconnecting.
2021-01-13 12:20:45.210 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ" sending FIN.
2021-01-13 12:20:45.262 +08:00 [DBG] Connection id "0HM5NFAAJ7PNJ" stopped.
2021-01-13 12:20:58.254 +08:00 [DBG] Hosting shutdown
2021-01-13 12:20:58.326 +08:00 [DBG] Connection id "0HM5NFAAJ7PNH" disconnecting.
2021-01-13 12:20:58.327 +08:00 [DBG] Connection id "0HM5NFAAJ7PNH" sending FIN.
2021-01-13 12:20:58.465 +08:00 [DBG] Connection id "0HM5NFAAJ7PNH" stopped.
2021-01-13 12:22:28.231 +08:00 [DBG] Hosting starting
2021-01-13 12:22:28.444 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:22:28.572 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:22:28.591 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:22:28.607 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:22:28.654 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:22:28.655 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:22:28.657 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:22:28.658 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:22:28.660 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:22:28.664 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:22:28.668 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:22:28.700 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:22:28.710 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:22:28.711 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:22:28.711 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:22:28.711 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:22:28.712 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:22:28.712 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:22:28.730 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:22:28.792 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:22:28.834 +08:00 [DBG] Hosting started
2021-01-13 12:22:28.834 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:22:28.894 +08:00 [DBG] Connection id "0HM5NFBBB3M11" started.
2021-01-13 12:22:28.894 +08:00 [DBG] Connection id "0HM5NFBBB3M10" started.
2021-01-13 12:22:28.919 +08:00 [DBG] Connection id "0HM5NFBBB3M11" received FIN.
2021-01-13 12:22:28.919 +08:00 [DBG] Connection id "0HM5NFBBB3M10" received FIN.
2021-01-13 12:22:29.018 +08:00 [DBG] Connection id "0HM5NFBBB3M10" sending FIN.
2021-01-13 12:22:29.018 +08:00 [DBG] Connection id "0HM5NFBBB3M11" sending FIN.
2021-01-13 12:22:29.077 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:22:29.077 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:22:29.141 +08:00 [DBG] Connection id "0HM5NFBBB3M10" stopped.
2021-01-13 12:22:29.141 +08:00 [DBG] Connection id "0HM5NFBBB3M11" stopped.
2021-01-13 12:22:29.824 +08:00 [DBG] Connection id "0HM5NFBBB3M12" started.
2021-01-13 12:22:30.152 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:22:30.163 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:22:30.198 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:22:30.202 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:22:30.204 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:22:30.206 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:22:30.206 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:22:30.207 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:22:30.207 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:22:30.299 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:22:30.315 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:22:30.326 +08:00 [DBG] Connection id "0HM5NFBBB3M12" completed keep alive response.
2021-01-13 12:22:30.331 +08:00 [INF] Request finished in 179.0226ms 404 
2021-01-13 12:22:33.407 +08:00 [DBG] Connection id "0HM5NFBBB3M13" started.
2021-01-13 12:22:33.408 +08:00 [DBG] Connection id "0HM5NFBBB3M13" received FIN.
2021-01-13 12:22:33.410 +08:00 [DBG] Connection id "0HM5NFBBB3M13" disconnecting.
2021-01-13 12:22:33.410 +08:00 [DBG] Connection id "0HM5NFBBB3M14" started.
2021-01-13 12:22:33.413 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:22:33.414 +08:00 [DBG] Connection id "0HM5NFBBB3M13" sending FIN.
2021-01-13 12:22:33.416 +08:00 [DBG] Connection id "0HM5NFBBB3M13" stopped.
2021-01-13 12:22:33.417 +08:00 [DBG] Connection id "0HM5NFBBB3M14", Request id "0HM5NFBBB3M14:00000001": started reading request body.
2021-01-13 12:22:33.422 +08:00 [DBG] Connection id "0HM5NFBBB3M14", Request id "0HM5NFBBB3M14:00000001": done reading request body.
2021-01-13 12:22:33.423 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:22:33.424 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:22:33.442 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:22:33.460 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:22:33.461 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:22:33.475 +08:00 [DBG] Start token request.
2021-01-13 12:22:33.480 +08:00 [DBG] Start client validation
2021-01-13 12:22:33.485 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:22:33.490 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:22:33.495 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:22:33.495 +08:00 [DBG] Secret id found: client
2021-01-13 12:22:33.510 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:22:33.518 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:22:33.519 +08:00 [DBG] Client validation success
2021-01-13 12:22:33.530 +08:00 [DBG] Start token request validation
2021-01-13 12:22:33.539 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:22:33.569 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:22:33.580 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:22:33.610 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:22:33.852 +08:00 [FTL] Unhandled exception: No signing credential is configured. Can't create JWT token
System.InvalidOperationException: No signing credential is configured. Can't create JWT token
   at IdentityServer4.Services.DefaultTokenCreationService.CreateHeaderAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenCreationService.cs:line 73
   at IdentityServer4.Services.DefaultTokenCreationService.CreateTokenAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenCreationService.cs:line 60
   at IdentityServer4.Services.DefaultTokenService.CreateSecurityTokenAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenService.cs:line 210
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 400
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 313
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2021-01-13 12:22:33.960 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No signing credential is configured. Can't create JWT token
   at IdentityServer4.Services.DefaultTokenCreationService.CreateHeaderAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenCreationService.cs:line 73
   at IdentityServer4.Services.DefaultTokenCreationService.CreateTokenAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenCreationService.cs:line 60
   at IdentityServer4.Services.DefaultTokenService.CreateSecurityTokenAsync(Token token) in C:\local\identity\server4\IdentityServer4\src\Services\Default\DefaultTokenService.cs:line 210
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 400
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 313
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 49
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:22:34.028 +08:00 [DBG] Connection id "0HM5NFBBB3M14" completed keep alive response.
2021-01-13 12:22:34.030 +08:00 [INF] Request finished in 616.6642ms 500 text/html; charset=utf-8
2021-01-13 12:23:05.850 +08:00 [DBG] Hosting starting
2021-01-13 12:23:05.976 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:23:05.999 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:23:06.039 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:23:06.060 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:23:06.153 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:23:06.162 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:23:06.163 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:23:06.165 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:23:06.168 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:23:06.172 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:23:06.174 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:23:06.223 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:23:06.239 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:23:06.250 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:23:06.256 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:23:06.259 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:23:06.262 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:23:06.263 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:23:06.283 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:23:06.382 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:23:06.502 +08:00 [DBG] Hosting started
2021-01-13 12:23:06.502 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:23:06.546 +08:00 [DBG] Connection id "0HM5NFBMI650Q" started.
2021-01-13 12:23:06.588 +08:00 [DBG] Connection id "0HM5NFBMI650Q" received FIN.
2021-01-13 12:23:06.700 +08:00 [DBG] Connection id "0HM5NFBMI650Q" sending FIN.
2021-01-13 12:23:06.765 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:23:06.820 +08:00 [DBG] Connection id "0HM5NFBMI650Q" stopped.
2021-01-13 12:23:07.490 +08:00 [DBG] Connection id "0HM5NFBMI650R" started.
2021-01-13 12:23:07.776 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:23:07.784 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:23:07.822 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:23:07.822 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:23:07.824 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:23:07.824 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:23:07.825 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:23:07.827 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:23:07.828 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:23:07.914 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:23:07.931 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:23:07.942 +08:00 [DBG] Connection id "0HM5NFBMI650R" completed keep alive response.
2021-01-13 12:23:07.946 +08:00 [INF] Request finished in 170.7482ms 404 
2021-01-13 12:23:10.417 +08:00 [DBG] Connection id "0HM5NFBMI650S" started.
2021-01-13 12:23:10.418 +08:00 [DBG] Connection id "0HM5NFBMI650S" received FIN.
2021-01-13 12:23:10.419 +08:00 [DBG] Connection id "0HM5NFBMI650S" disconnecting.
2021-01-13 12:23:10.419 +08:00 [DBG] Connection id "0HM5NFBMI650T" started.
2021-01-13 12:23:10.421 +08:00 [DBG] Connection id "0HM5NFBMI650S" sending FIN.
2021-01-13 12:23:10.425 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:23:10.426 +08:00 [DBG] Connection id "0HM5NFBMI650S" stopped.
2021-01-13 12:23:10.430 +08:00 [DBG] Connection id "0HM5NFBMI650T", Request id "0HM5NFBMI650T:00000001": started reading request body.
2021-01-13 12:23:10.436 +08:00 [DBG] Connection id "0HM5NFBMI650T", Request id "0HM5NFBMI650T:00000001": done reading request body.
2021-01-13 12:23:10.437 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:10.438 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:10.449 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:23:10.458 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:23:10.459 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:23:10.469 +08:00 [DBG] Start token request.
2021-01-13 12:23:10.474 +08:00 [DBG] Start client validation
2021-01-13 12:23:10.479 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:23:10.483 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:23:10.490 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:23:10.490 +08:00 [DBG] Secret id found: client
2021-01-13 12:23:10.502 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:23:10.511 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:23:10.512 +08:00 [DBG] Client validation success
2021-01-13 12:23:10.522 +08:00 [DBG] Start token request validation
2021-01-13 12:23:10.530 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:23:10.558 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:23:10.569 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:23:10.599 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:23:10.677 +08:00 [DBG] Token request success.
2021-01-13 12:23:10.691 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:10.691 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:10.692 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:23:10.693 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:23:10.694 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:23:10.695 +08:00 [DBG] Start token request.
2021-01-13 12:23:10.695 +08:00 [DBG] Start client validation
2021-01-13 12:23:10.696 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:23:10.696 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:23:10.697 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:23:10.697 +08:00 [DBG] Secret id found: client
2021-01-13 12:23:10.698 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:23:10.699 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:23:10.699 +08:00 [DBG] Client validation success
2021-01-13 12:23:10.700 +08:00 [DBG] Start token request validation
2021-01-13 12:23:10.704 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:23:10.706 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:23:10.706 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:23:10.709 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:23:10.713 +08:00 [DBG] Token request success.
2021-01-13 12:23:10.769 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:23:10.883 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:23:10.904 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:23:10.942 +08:00 [ERR] Connection id "0HM5NFBMI650T", Request id "0HM5NFBMI650T:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:23:10.948 +08:00 [INF] Request finished in 522.635ms 200 application/json; charset=UTF-8
2021-01-13 12:23:10.948 +08:00 [DBG] Connection id "0HM5NFBMI650T" disconnecting.
2021-01-13 12:23:10.949 +08:00 [DBG] Connection id "0HM5NFBMI650T" sending FIN.
2021-01-13 12:23:11.015 +08:00 [DBG] Connection id "0HM5NFBMI650T" stopped.
2021-01-13 12:23:24.299 +08:00 [DBG] Connection id "0HM5NFBMI650U" started.
2021-01-13 12:23:24.300 +08:00 [DBG] Connection id "0HM5NFBMI650U" received FIN.
2021-01-13 12:23:24.302 +08:00 [DBG] Connection id "0HM5NFBMI650U" disconnecting.
2021-01-13 12:23:24.302 +08:00 [DBG] Connection id "0HM5NFBMI650V" started.
2021-01-13 12:23:24.303 +08:00 [DBG] Connection id "0HM5NFBMI650U" sending FIN.
2021-01-13 12:23:24.304 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:23:24.304 +08:00 [DBG] Connection id "0HM5NFBMI650U" stopped.
2021-01-13 12:23:24.305 +08:00 [DBG] Connection id "0HM5NFBMI650V", Request id "0HM5NFBMI650V:00000001": started reading request body.
2021-01-13 12:23:24.307 +08:00 [DBG] Connection id "0HM5NFBMI650V", Request id "0HM5NFBMI650V:00000001": done reading request body.
2021-01-13 12:23:24.308 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:24.308 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:24.309 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:23:24.310 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:23:24.311 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:23:24.311 +08:00 [DBG] Start token request.
2021-01-13 12:23:24.312 +08:00 [DBG] Start client validation
2021-01-13 12:23:24.312 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:23:24.313 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:23:24.313 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:23:24.313 +08:00 [DBG] Secret id found: client
2021-01-13 12:23:24.314 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:23:24.314 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:23:24.315 +08:00 [DBG] Client validation success
2021-01-13 12:23:24.315 +08:00 [DBG] Start token request validation
2021-01-13 12:23:24.316 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:23:24.316 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:23:24.316 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:23:24.325 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:23:24.328 +08:00 [DBG] Token request success.
2021-01-13 12:23:24.329 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:24.329 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:23:24.330 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:23:24.331 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:23:24.332 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:23:24.333 +08:00 [DBG] Start token request.
2021-01-13 12:23:24.334 +08:00 [DBG] Start client validation
2021-01-13 12:23:24.337 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:23:24.337 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:23:24.338 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:23:24.338 +08:00 [DBG] Secret id found: client
2021-01-13 12:23:24.339 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:23:24.339 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:23:24.340 +08:00 [DBG] Client validation success
2021-01-13 12:23:24.340 +08:00 [DBG] Start token request validation
2021-01-13 12:23:24.340 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:23:24.341 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:23:24.342 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:23:24.344 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:23:24.348 +08:00 [DBG] Token request success.
2021-01-13 12:23:24.386 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:23:24.496 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:23:24.500 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:23:24.528 +08:00 [ERR] Connection id "0HM5NFBMI650V", Request id "0HM5NFBMI650V:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:23:24.533 +08:00 [INF] Request finished in 229.5396ms 200 application/json; charset=UTF-8
2021-01-13 12:23:24.534 +08:00 [DBG] Connection id "0HM5NFBMI650V" disconnecting.
2021-01-13 12:23:24.534 +08:00 [DBG] Connection id "0HM5NFBMI650V" sending FIN.
2021-01-13 12:23:24.574 +08:00 [DBG] Connection id "0HM5NFBMI650V" stopped.
2021-01-13 12:30:57.404 +08:00 [DBG] Hosting starting
2021-01-13 12:30:57.591 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:30:57.621 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:30:57.643 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:30:57.664 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:30:57.741 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:30:57.743 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:30:57.744 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:30:57.745 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:30:57.748 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:30:57.753 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:30:57.754 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:30:57.786 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:30:57.801 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:30:57.802 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:30:57.803 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:30:57.803 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:30:57.803 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:30:57.804 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:30:57.831 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:30:57.957 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:30:58.003 +08:00 [DBG] Hosting started
2021-01-13 12:30:58.004 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:30:58.348 +08:00 [DBG] Connection id "0HM5NFG35KP7D" started.
2021-01-13 12:30:58.348 +08:00 [DBG] Connection id "0HM5NFG35KP7E" started.
2021-01-13 12:30:58.375 +08:00 [DBG] Connection id "0HM5NFG35KP7D" received FIN.
2021-01-13 12:30:58.377 +08:00 [DBG] Connection id "0HM5NFG35KP7E" received FIN.
2021-01-13 12:30:58.390 +08:00 [DBG] Connection id "0HM5NFG35KP7D" sending FIN.
2021-01-13 12:30:58.390 +08:00 [DBG] Connection id "0HM5NFG35KP7E" sending FIN.
2021-01-13 12:30:58.504 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:30:58.528 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:30:58.580 +08:00 [DBG] Connection id "0HM5NFG35KP7D" stopped.
2021-01-13 12:30:58.580 +08:00 [DBG] Connection id "0HM5NFG35KP7E" stopped.
2021-01-13 12:30:59.258 +08:00 [DBG] Connection id "0HM5NFG35KP7F" started.
2021-01-13 12:30:59.523 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:30:59.526 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:30:59.557 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:30:59.557 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:30:59.558 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:30:59.558 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:30:59.559 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:30:59.559 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:30:59.560 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:30:59.652 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:30:59.667 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:30:59.678 +08:00 [DBG] Connection id "0HM5NFG35KP7F" completed keep alive response.
2021-01-13 12:30:59.682 +08:00 [INF] Request finished in 159.5737ms 404 
2021-01-13 12:31:02.271 +08:00 [DBG] Connection id "0HM5NFG35KP7G" started.
2021-01-13 12:31:02.272 +08:00 [DBG] Connection id "0HM5NFG35KP7G" received FIN.
2021-01-13 12:31:02.274 +08:00 [DBG] Connection id "0HM5NFG35KP7G" disconnecting.
2021-01-13 12:31:02.274 +08:00 [DBG] Connection id "0HM5NFG35KP7H" started.
2021-01-13 12:31:02.276 +08:00 [DBG] Connection id "0HM5NFG35KP7G" sending FIN.
2021-01-13 12:31:02.280 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:31:02.281 +08:00 [DBG] Connection id "0HM5NFG35KP7G" stopped.
2021-01-13 12:31:02.285 +08:00 [DBG] Connection id "0HM5NFG35KP7H", Request id "0HM5NFG35KP7H:00000001": started reading request body.
2021-01-13 12:31:02.290 +08:00 [DBG] Connection id "0HM5NFG35KP7H", Request id "0HM5NFG35KP7H:00000001": done reading request body.
2021-01-13 12:31:02.292 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:31:02.293 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:31:02.305 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:31:02.315 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:31:02.316 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:31:02.326 +08:00 [DBG] Start token request.
2021-01-13 12:31:02.332 +08:00 [DBG] Start client validation
2021-01-13 12:31:02.338 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:31:02.342 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:31:02.347 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:31:02.348 +08:00 [DBG] Secret id found: client
2021-01-13 12:31:02.361 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:31:02.370 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:31:02.371 +08:00 [DBG] Client validation success
2021-01-13 12:31:02.380 +08:00 [DBG] Start token request validation
2021-01-13 12:31:02.387 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:31:02.416 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:31:02.427 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:31:02.457 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:31:02.538 +08:00 [DBG] Token request success.
2021-01-13 12:31:02.552 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:31:02.552 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:31:02.553 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:31:02.555 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:31:02.556 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:31:02.556 +08:00 [DBG] Start token request.
2021-01-13 12:31:02.557 +08:00 [DBG] Start client validation
2021-01-13 12:31:02.557 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:31:02.558 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:31:02.558 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:31:02.559 +08:00 [DBG] Secret id found: client
2021-01-13 12:31:02.563 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:31:02.563 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:31:02.564 +08:00 [DBG] Client validation success
2021-01-13 12:31:02.564 +08:00 [DBG] Start token request validation
2021-01-13 12:31:02.565 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:31:02.565 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:31:02.566 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:31:02.568 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:31:02.572 +08:00 [DBG] Token request success.
2021-01-13 12:31:02.627 +08:00 [FTL] Unhandled exception: Headers are read-only, response has already started.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
2021-01-13 12:31:02.742 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 12:31:02.763 +08:00 [WRN] The response has already started, the error page middleware will not be executed.
2021-01-13 12:31:02.792 +08:00 [ERR] Connection id "0HM5NFG35KP7H", Request id "0HM5NFG35KP7H:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_Item(String key, StringValues value)
   at Microsoft.AspNetCore.Http.HttpResponseExtensions.SetNoCache(HttpResponse response) in C:\local\identity\server4\IdentityServer4\src\Extensions\HttpResponseExtensions.cs:line 56
   at IdentityServer4.Endpoints.Results.TokenResult.ExecuteAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\Results\TokenResult.cs:line 30
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 59
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 66
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2021-01-13 12:31:02.800 +08:00 [INF] Request finished in 519.4753ms 200 application/json; charset=UTF-8
2021-01-13 12:31:02.800 +08:00 [DBG] Connection id "0HM5NFG35KP7H" disconnecting.
2021-01-13 12:31:02.801 +08:00 [DBG] Connection id "0HM5NFG35KP7H" sending FIN.
2021-01-13 12:31:02.881 +08:00 [DBG] Connection id "0HM5NFG35KP7H" stopped.
2021-01-13 12:31:26.201 +08:00 [DBG] Connection id "0HM5NFG35KP7I" started.
2021-01-13 12:31:26.202 +08:00 [DBG] Connection id "0HM5NFG35KP7I" received FIN.
2021-01-13 12:31:26.207 +08:00 [DBG] Connection id "0HM5NFG35KP7I" disconnecting.
2021-01-13 12:31:26.245 +08:00 [DBG] Connection id "0HM5NFG35KP7J" started.
2021-01-13 12:31:26.245 +08:00 [DBG] Connection id "0HM5NFG35KP7I" sending FIN.
2021-01-13 12:31:26.270 +08:00 [DBG] Connection id "0HM5NFG35KP7I" stopped.
2021-01-13 12:31:26.276 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:31:26.278 +08:00 [DBG] Connection id "0HM5NFG35KP7J", Request id "0HM5NFG35KP7J:00000001": started reading request body.
2021-01-13 12:31:26.280 +08:00 [DBG] Connection id "0HM5NFG35KP7J", Request id "0HM5NFG35KP7J:00000001": done reading request body.
2021-01-13 12:31:30.510 +08:00 [INF] Connection id "0HM5NFG35KP7J", Request id "0HM5NFG35KP7J:00000001": the application aborted the connection.
2021-01-13 12:31:30.513 +08:00 [DBG] Connection id "0HM5NFG35KP7J" sending FIN.
2021-01-13 12:31:30.514 +08:00 [DBG] Connection id "0HM5NFG35KP7J" disconnecting.
2021-01-13 12:31:30.515 +08:00 [INF] Request finished in 4239.0513ms 200 
2021-01-13 12:31:30.551 +08:00 [DBG] Connection id "0HM5NFG35KP7J" stopped.
2021-01-13 12:32:53.219 +08:00 [DBG] Hosting starting
2021-01-13 12:32:53.313 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:32:53.327 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:32:53.352 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:32:53.366 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:32:53.405 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:32:53.406 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:32:53.407 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:32:53.408 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:32:53.412 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:32:53.416 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:32:53.418 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:32:53.446 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:32:53.459 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:32:53.461 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:32:53.462 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:32:53.463 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:32:53.463 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:32:53.464 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:32:53.478 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:32:53.537 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:32:53.589 +08:00 [DBG] Hosting started
2021-01-13 12:32:53.590 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:32:53.835 +08:00 [DBG] Connection id "0HM5NFH5J0UP6" started.
2021-01-13 12:32:53.835 +08:00 [DBG] Connection id "0HM5NFH5J0UP5" started.
2021-01-13 12:32:53.906 +08:00 [DBG] Connection id "0HM5NFH5J0UP6" received FIN.
2021-01-13 12:32:53.912 +08:00 [DBG] Connection id "0HM5NFH5J0UP5" received FIN.
2021-01-13 12:32:53.958 +08:00 [DBG] Connection id "0HM5NFH5J0UP5" sending FIN.
2021-01-13 12:32:53.958 +08:00 [DBG] Connection id "0HM5NFH5J0UP6" sending FIN.
2021-01-13 12:32:54.061 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:32:54.061 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:32:54.111 +08:00 [DBG] Connection id "0HM5NFH5J0UP6" stopped.
2021-01-13 12:32:54.111 +08:00 [DBG] Connection id "0HM5NFH5J0UP5" stopped.
2021-01-13 12:32:54.876 +08:00 [DBG] Connection id "0HM5NFH5J0UP7" started.
2021-01-13 12:32:55.499 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:32:55.503 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:32:55.532 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:32:55.532 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:32:55.533 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:32:55.534 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:32:55.534 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:32:55.534 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:32:55.535 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:32:55.623 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:32:55.641 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:32:55.651 +08:00 [DBG] Connection id "0HM5NFH5J0UP7" completed keep alive response.
2021-01-13 12:32:55.654 +08:00 [INF] Request finished in 155.9338ms 404 
2021-01-13 12:32:57.817 +08:00 [DBG] Connection id "0HM5NFH5J0UP8" started.
2021-01-13 12:32:57.818 +08:00 [DBG] Connection id "0HM5NFH5J0UP8" received FIN.
2021-01-13 12:32:57.820 +08:00 [DBG] Connection id "0HM5NFH5J0UP8" disconnecting.
2021-01-13 12:32:57.820 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" started.
2021-01-13 12:32:57.820 +08:00 [DBG] Connection id "0HM5NFH5J0UP8" sending FIN.
2021-01-13 12:32:57.822 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:32:57.823 +08:00 [DBG] Connection id "0HM5NFH5J0UP8" stopped.
2021-01-13 12:32:57.826 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000001": started reading request body.
2021-01-13 12:32:57.831 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000001": done reading request body.
2021-01-13 12:32:57.835 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:32:57.835 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:32:57.847 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:32:57.856 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:32:57.857 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:32:57.865 +08:00 [DBG] Start token request.
2021-01-13 12:32:57.871 +08:00 [DBG] Start client validation
2021-01-13 12:32:57.876 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:32:57.879 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:32:57.884 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:32:57.885 +08:00 [DBG] Secret id found: client
2021-01-13 12:32:57.896 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:32:57.905 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:32:57.905 +08:00 [DBG] Client validation success
2021-01-13 12:32:57.915 +08:00 [DBG] Start token request validation
2021-01-13 12:32:57.922 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:32:57.952 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:32:57.963 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:32:57.997 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:32:58.076 +08:00 [DBG] Token request success.
2021-01-13 12:32:58.090 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:32:58.091 +08:00 [INF] Request finished in 268.6605ms 200 application/json; charset=UTF-8
2021-01-13 12:33:10.050 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:10.051 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000002": started reading request body.
2021-01-13 12:33:10.051 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000002": done reading request body.
2021-01-13 12:33:10.052 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:10.054 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:10.055 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:10.056 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:10.056 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:10.057 +08:00 [DBG] Start token request.
2021-01-13 12:33:10.057 +08:00 [DBG] Start client validation
2021-01-13 12:33:10.058 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:10.058 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:10.059 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:10.059 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:10.060 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:10.060 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:10.061 +08:00 [DBG] Client validation success
2021-01-13 12:33:10.061 +08:00 [DBG] Start token request validation
2021-01-13 12:33:10.062 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:10.062 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:10.062 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:10.065 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:10.069 +08:00 [DBG] Token request success.
2021-01-13 12:33:10.072 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:10.073 +08:00 [INF] Request finished in 23.1585ms 200 application/json; charset=UTF-8
2021-01-13 12:33:12.101 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:12.104 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000003": started reading request body.
2021-01-13 12:33:12.105 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000003": done reading request body.
2021-01-13 12:33:12.106 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:12.113 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:12.115 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:12.117 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:12.118 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:12.118 +08:00 [DBG] Start token request.
2021-01-13 12:33:12.119 +08:00 [DBG] Start client validation
2021-01-13 12:33:12.119 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:12.119 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:12.120 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:12.121 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:12.121 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:12.122 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:12.122 +08:00 [DBG] Client validation success
2021-01-13 12:33:12.123 +08:00 [DBG] Start token request validation
2021-01-13 12:33:12.123 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:12.124 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:12.124 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:12.126 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:12.130 +08:00 [DBG] Token request success.
2021-01-13 12:33:12.130 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:12.135 +08:00 [INF] Request finished in 33.9731ms 200 application/json; charset=UTF-8
2021-01-13 12:33:12.760 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:12.761 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000004": started reading request body.
2021-01-13 12:33:12.762 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000004": done reading request body.
2021-01-13 12:33:12.763 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:12.764 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:12.765 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:12.766 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:12.767 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:12.767 +08:00 [DBG] Start token request.
2021-01-13 12:33:12.768 +08:00 [DBG] Start client validation
2021-01-13 12:33:12.768 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:12.769 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:12.769 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:12.770 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:12.770 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:12.771 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:12.771 +08:00 [DBG] Client validation success
2021-01-13 12:33:12.772 +08:00 [DBG] Start token request validation
2021-01-13 12:33:12.772 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:12.772 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:12.773 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:12.775 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:12.779 +08:00 [DBG] Token request success.
2021-01-13 12:33:12.779 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:12.780 +08:00 [INF] Request finished in 20.0895ms 200 application/json; charset=UTF-8
2021-01-13 12:33:13.379 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:13.381 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000005": started reading request body.
2021-01-13 12:33:13.382 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000005": done reading request body.
2021-01-13 12:33:13.383 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:13.384 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:13.384 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:13.385 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:13.387 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:13.387 +08:00 [DBG] Start token request.
2021-01-13 12:33:13.388 +08:00 [DBG] Start client validation
2021-01-13 12:33:13.388 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:13.389 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:13.389 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:13.389 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:13.390 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:13.391 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:13.391 +08:00 [DBG] Client validation success
2021-01-13 12:33:13.391 +08:00 [DBG] Start token request validation
2021-01-13 12:33:13.392 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:13.392 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:13.392 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:13.395 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:13.398 +08:00 [DBG] Token request success.
2021-01-13 12:33:13.398 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:13.399 +08:00 [INF] Request finished in 19.9189ms 200 application/json; charset=UTF-8
2021-01-13 12:33:13.727 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:13.729 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000006": started reading request body.
2021-01-13 12:33:13.730 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000006": done reading request body.
2021-01-13 12:33:13.731 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:13.732 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:13.732 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:13.733 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:13.734 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:13.734 +08:00 [DBG] Start token request.
2021-01-13 12:33:13.735 +08:00 [DBG] Start client validation
2021-01-13 12:33:13.736 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:13.737 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:13.737 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:13.738 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:13.738 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:13.743 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:13.743 +08:00 [DBG] Client validation success
2021-01-13 12:33:13.744 +08:00 [DBG] Start token request validation
2021-01-13 12:33:13.744 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:13.745 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:13.746 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:13.748 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:13.751 +08:00 [DBG] Token request success.
2021-01-13 12:33:13.752 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:13.752 +08:00 [INF] Request finished in 25.4255ms 200 application/json; charset=UTF-8
2021-01-13 12:33:14.081 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:14.082 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000007": started reading request body.
2021-01-13 12:33:14.083 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000007": done reading request body.
2021-01-13 12:33:14.084 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.085 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.086 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:14.088 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:14.089 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:14.090 +08:00 [DBG] Start token request.
2021-01-13 12:33:14.090 +08:00 [DBG] Start client validation
2021-01-13 12:33:14.091 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:14.091 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:14.091 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:14.092 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:14.092 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:14.093 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:14.093 +08:00 [DBG] Client validation success
2021-01-13 12:33:14.094 +08:00 [DBG] Start token request validation
2021-01-13 12:33:14.094 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:14.095 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:14.095 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:14.097 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:14.101 +08:00 [DBG] Token request success.
2021-01-13 12:33:14.101 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:14.102 +08:00 [INF] Request finished in 21.4437ms 200 application/json; charset=UTF-8
2021-01-13 12:33:14.410 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:14.412 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000008": started reading request body.
2021-01-13 12:33:14.413 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000008": done reading request body.
2021-01-13 12:33:14.414 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.414 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.415 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:14.416 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:14.416 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:14.417 +08:00 [DBG] Start token request.
2021-01-13 12:33:14.418 +08:00 [DBG] Start client validation
2021-01-13 12:33:14.418 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:14.418 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:14.419 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:14.420 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:14.421 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:14.421 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:14.422 +08:00 [DBG] Client validation success
2021-01-13 12:33:14.422 +08:00 [DBG] Start token request validation
2021-01-13 12:33:14.423 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:14.423 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:14.423 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:14.426 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:14.429 +08:00 [DBG] Token request success.
2021-01-13 12:33:14.430 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:14.430 +08:00 [INF] Request finished in 20.1913ms 200 application/json; charset=UTF-8
2021-01-13 12:33:14.781 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:14.783 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000009": started reading request body.
2021-01-13 12:33:14.784 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000009": done reading request body.
2021-01-13 12:33:14.785 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.785 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:14.786 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:14.787 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:14.788 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:14.789 +08:00 [DBG] Start token request.
2021-01-13 12:33:14.789 +08:00 [DBG] Start client validation
2021-01-13 12:33:14.790 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:14.791 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:14.792 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:14.792 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:14.793 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:14.793 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:14.794 +08:00 [DBG] Client validation success
2021-01-13 12:33:14.794 +08:00 [DBG] Start token request validation
2021-01-13 12:33:14.795 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:14.795 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:14.798 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:14.800 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:14.804 +08:00 [DBG] Token request success.
2021-01-13 12:33:14.804 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:14.805 +08:00 [INF] Request finished in 23.5492ms 200 application/json; charset=UTF-8
2021-01-13 12:33:15.126 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:15.128 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000A": started reading request body.
2021-01-13 12:33:15.129 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000A": done reading request body.
2021-01-13 12:33:15.130 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:15.130 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:15.131 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:15.132 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:15.133 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:15.134 +08:00 [DBG] Start token request.
2021-01-13 12:33:15.135 +08:00 [DBG] Start client validation
2021-01-13 12:33:15.135 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:15.136 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:15.136 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:15.136 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:15.137 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:15.138 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:15.139 +08:00 [DBG] Client validation success
2021-01-13 12:33:15.140 +08:00 [DBG] Start token request validation
2021-01-13 12:33:15.143 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:15.144 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:15.145 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:15.147 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:15.151 +08:00 [DBG] Token request success.
2021-01-13 12:33:15.151 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:15.152 +08:00 [INF] Request finished in 25.5228ms 200 application/json; charset=UTF-8
2021-01-13 12:33:15.901 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:15.903 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000B": started reading request body.
2021-01-13 12:33:15.904 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000B": done reading request body.
2021-01-13 12:33:15.905 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:15.906 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:15.906 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:15.907 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:15.908 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:15.909 +08:00 [DBG] Start token request.
2021-01-13 12:33:15.909 +08:00 [DBG] Start client validation
2021-01-13 12:33:15.909 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:15.910 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:15.910 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:15.910 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:15.911 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:15.912 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:15.912 +08:00 [DBG] Client validation success
2021-01-13 12:33:15.912 +08:00 [DBG] Start token request validation
2021-01-13 12:33:15.913 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:15.913 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:15.914 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:15.926 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:15.929 +08:00 [DBG] Token request success.
2021-01-13 12:33:15.930 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:15.931 +08:00 [INF] Request finished in 29.6259ms 200 application/json; charset=UTF-8
2021-01-13 12:33:18.039 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:18.042 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000C": started reading request body.
2021-01-13 12:33:18.043 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000C": done reading request body.
2021-01-13 12:33:18.044 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:18.045 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:18.046 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:18.047 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:18.048 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:18.053 +08:00 [DBG] Start token request.
2021-01-13 12:33:18.054 +08:00 [DBG] Start client validation
2021-01-13 12:33:18.056 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:18.056 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:18.057 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:18.058 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:18.058 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:18.059 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:18.059 +08:00 [DBG] Client validation success
2021-01-13 12:33:18.060 +08:00 [DBG] Start token request validation
2021-01-13 12:33:18.060 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:18.061 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:18.061 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:18.063 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:18.067 +08:00 [DBG] Token request success.
2021-01-13 12:33:18.068 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:18.069 +08:00 [INF] Request finished in 29.6948ms 200 application/json; charset=UTF-8
2021-01-13 12:33:18.795 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:18.797 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000D": started reading request body.
2021-01-13 12:33:18.799 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000D": done reading request body.
2021-01-13 12:33:18.800 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:18.801 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:18.802 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:18.803 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:18.804 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:18.805 +08:00 [DBG] Start token request.
2021-01-13 12:33:18.805 +08:00 [DBG] Start client validation
2021-01-13 12:33:18.805 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:18.806 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:18.806 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:18.807 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:18.807 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:18.808 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:18.808 +08:00 [DBG] Client validation success
2021-01-13 12:33:18.809 +08:00 [DBG] Start token request validation
2021-01-13 12:33:18.809 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:18.810 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:18.810 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:18.813 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:18.816 +08:00 [DBG] Token request success.
2021-01-13 12:33:18.816 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:18.817 +08:00 [INF] Request finished in 21.7071ms 200 application/json; charset=UTF-8
2021-01-13 12:33:19.342 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:19.344 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000E": started reading request body.
2021-01-13 12:33:19.345 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000E": done reading request body.
2021-01-13 12:33:19.346 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:19.347 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:19.347 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:19.348 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:19.349 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:19.350 +08:00 [DBG] Start token request.
2021-01-13 12:33:19.350 +08:00 [DBG] Start client validation
2021-01-13 12:33:19.350 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:19.351 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:19.351 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:19.352 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:19.352 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:19.353 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:19.353 +08:00 [DBG] Client validation success
2021-01-13 12:33:19.354 +08:00 [DBG] Start token request validation
2021-01-13 12:33:19.355 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:19.357 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:19.358 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:19.360 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:19.364 +08:00 [DBG] Token request success.
2021-01-13 12:33:19.364 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:19.365 +08:00 [INF] Request finished in 22.7878ms 200 application/json; charset=UTF-8
2021-01-13 12:33:19.915 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:19.917 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000F": started reading request body.
2021-01-13 12:33:19.918 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:0000000F": done reading request body.
2021-01-13 12:33:19.919 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:19.919 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:19.920 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:19.921 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:19.921 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:19.922 +08:00 [DBG] Start token request.
2021-01-13 12:33:19.923 +08:00 [DBG] Start client validation
2021-01-13 12:33:19.924 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:19.924 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:19.924 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:19.925 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:19.925 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:19.926 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:19.926 +08:00 [DBG] Client validation success
2021-01-13 12:33:19.927 +08:00 [DBG] Start token request validation
2021-01-13 12:33:19.927 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:19.928 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:19.928 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:19.931 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:19.934 +08:00 [DBG] Token request success.
2021-01-13 12:33:19.934 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:19.935 +08:00 [INF] Request finished in 19.5439ms 200 application/json; charset=UTF-8
2021-01-13 12:33:20.466 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:20.468 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000010": started reading request body.
2021-01-13 12:33:20.469 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000010": done reading request body.
2021-01-13 12:33:20.470 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:20.471 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:20.472 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:20.473 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:20.475 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:20.476 +08:00 [DBG] Start token request.
2021-01-13 12:33:20.476 +08:00 [DBG] Start client validation
2021-01-13 12:33:20.477 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:20.477 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:20.477 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:20.478 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:20.478 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:20.479 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:20.479 +08:00 [DBG] Client validation success
2021-01-13 12:33:20.480 +08:00 [DBG] Start token request validation
2021-01-13 12:33:20.480 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:20.480 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:20.481 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:20.483 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:20.487 +08:00 [DBG] Token request success.
2021-01-13 12:33:20.487 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:20.488 +08:00 [INF] Request finished in 22.1923ms 200 application/json; charset=UTF-8
2021-01-13 12:33:20.991 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:20.993 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000011": started reading request body.
2021-01-13 12:33:20.994 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000011": done reading request body.
2021-01-13 12:33:20.995 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:20.995 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:20.996 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:20.997 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:20.997 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:20.999 +08:00 [DBG] Start token request.
2021-01-13 12:33:20.999 +08:00 [DBG] Start client validation
2021-01-13 12:33:20.999 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:21.000 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:21.000 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:21.000 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:21.001 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:21.002 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:21.002 +08:00 [DBG] Client validation success
2021-01-13 12:33:21.002 +08:00 [DBG] Start token request validation
2021-01-13 12:33:21.003 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:21.003 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:21.004 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:21.006 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:21.010 +08:00 [DBG] Token request success.
2021-01-13 12:33:21.010 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:21.011 +08:00 [INF] Request finished in 19.82ms 200 application/json; charset=UTF-8
2021-01-13 12:33:21.811 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:21.812 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000012": started reading request body.
2021-01-13 12:33:21.813 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000012": done reading request body.
2021-01-13 12:33:21.814 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:21.815 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:21.815 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:21.816 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:21.817 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:21.817 +08:00 [DBG] Start token request.
2021-01-13 12:33:21.818 +08:00 [DBG] Start client validation
2021-01-13 12:33:21.818 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:21.819 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:21.819 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:21.819 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:21.820 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:21.821 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:21.821 +08:00 [DBG] Client validation success
2021-01-13 12:33:21.821 +08:00 [DBG] Start token request validation
2021-01-13 12:33:21.822 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:21.822 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:21.823 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:21.829 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:21.832 +08:00 [DBG] Token request success.
2021-01-13 12:33:21.832 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:21.833 +08:00 [INF] Request finished in 22.4282ms 200 application/json; charset=UTF-8
2021-01-13 12:33:22.746 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 12:33:22.748 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000013": started reading request body.
2021-01-13 12:33:22.749 +08:00 [DBG] Connection id "0HM5NFH5J0UP9", Request id "0HM5NFH5J0UP9:00000013": done reading request body.
2021-01-13 12:33:22.750 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:22.751 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:33:22.752 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:33:22.753 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:33:22.754 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:33:22.755 +08:00 [DBG] Start token request.
2021-01-13 12:33:22.755 +08:00 [DBG] Start client validation
2021-01-13 12:33:22.755 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:33:22.756 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 12:33:22.757 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 12:33:22.757 +08:00 [DBG] Secret id found: client
2021-01-13 12:33:22.757 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:33:22.758 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:33:22.758 +08:00 [DBG] Client validation success
2021-01-13 12:33:22.759 +08:00 [DBG] Start token request validation
2021-01-13 12:33:22.759 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:33:22.760 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:33:22.760 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:33:22.762 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:33:22.766 +08:00 [DBG] Token request success.
2021-01-13 12:33:22.766 +08:00 [DBG] Connection id "0HM5NFH5J0UP9" completed keep alive response.
2021-01-13 12:33:22.767 +08:00 [INF] Request finished in 20.997ms 200 application/json; charset=UTF-8
2021-01-13 12:34:38.233 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" started.
2021-01-13 12:34:38.250 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 12:34:38.259 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:38.260 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:38.260 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 12:34:38.262 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 12:34:38.263 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 12:34:38.267 +08:00 [DBG] Start discovery request
2021-01-13 12:34:38.393 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" completed keep alive response.
2021-01-13 12:34:38.413 +08:00 [INF] Request finished in 162.9697ms 200 application/json; charset=UTF-8
2021-01-13 12:34:38.532 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 12:34:38.533 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:38.534 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:38.535 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 12:34:38.541 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 12:34:38.542 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 12:34:38.548 +08:00 [DBG] Start key discovery request
2021-01-13 12:34:38.565 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" completed keep alive response.
2021-01-13 12:34:38.570 +08:00 [INF] Request finished in 38.7133ms 200 application/json; charset=UTF-8
2021-01-13 12:34:38.814 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" received FIN.
2021-01-13 12:34:38.818 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" disconnecting.
2021-01-13 12:34:38.819 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" sending FIN.
2021-01-13 12:34:38.820 +08:00 [DBG] Connection id "0HM5NFH5J0UPA" stopped.
2021-01-13 12:34:42.110 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" started.
2021-01-13 12:34:42.139 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 12:34:42.141 +08:00 [DBG] Connection id "0HM5NFH5J0UPB", Request id "0HM5NFH5J0UPB:00000001": started reading request body.
2021-01-13 12:34:42.142 +08:00 [DBG] Connection id "0HM5NFH5J0UPB", Request id "0HM5NFH5J0UPB:00000001": done reading request body.
2021-01-13 12:34:42.143 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:42.143 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:34:42.144 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:34:42.145 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:34:42.146 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:34:42.146 +08:00 [DBG] Start token request.
2021-01-13 12:34:42.147 +08:00 [DBG] Start client validation
2021-01-13 12:34:42.149 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:34:42.149 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 12:34:42.150 +08:00 [DBG] Secret id found: client
2021-01-13 12:34:42.150 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:34:42.151 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:34:42.151 +08:00 [DBG] Client validation success
2021-01-13 12:34:42.154 +08:00 [DBG] Start token request validation
2021-01-13 12:34:42.155 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:34:42.155 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:34:42.156 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:34:42.158 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:34:42.161 +08:00 [DBG] Token request success.
2021-01-13 12:34:42.161 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" completed keep alive response.
2021-01-13 12:34:42.162 +08:00 [INF] Request finished in 22.9386ms 200 application/json; charset=UTF-8
2021-01-13 12:34:56.527 +08:00 [DBG] Connection id "0HM5NFH5J0UPC" started.
2021-01-13 12:34:56.584 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:34:56.590 +08:00 [DBG] Connection id "0HM5NFH5J0UPC" disconnecting.
2021-01-13 12:34:56.590 +08:00 [DBG] Connection id "0HM5NFH5J0UPC" sending FIN.
2021-01-13 12:34:56.635 +08:00 [DBG] Connection id "0HM5NFH5J0UPC" stopped.
2021-01-13 12:35:05.704 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" reset.
2021-01-13 12:35:05.705 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" disconnecting.
2021-01-13 12:35:05.708 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" sending FIN.
2021-01-13 12:35:05.758 +08:00 [DBG] Connection id "0HM5NFH5J0UPB" stopped.
2021-01-13 12:39:13.988 +08:00 [DBG] Hosting starting
2021-01-13 12:39:14.223 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:39:14.251 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:39:14.277 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:39:14.297 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:39:14.517 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:39:14.519 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:39:14.521 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:39:14.523 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:39:14.526 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:39:14.532 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:39:14.534 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:39:14.567 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:39:14.594 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:39:14.598 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:39:14.599 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:39:14.604 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:39:14.604 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:39:14.605 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:39:14.618 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:39:14.690 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:39:14.890 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address https://127.0.0.1:5001: address already in use. ---> Microsoft.AspNetCore.Connections.AddressInUseException: 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。 ---> System.Net.Sockets.SocketException: 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2021-01-13 12:39:15.007 +08:00 [DBG] Hosting shutdown
2021-01-13 12:39:50.389 +08:00 [DBG] Hosting starting
2021-01-13 12:39:50.591 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:39:50.611 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:39:50.631 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:39:50.647 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:39:50.731 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:39:50.735 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:39:50.736 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:39:50.737 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:39:50.740 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:39:50.745 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:39:50.752 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:39:50.840 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:39:50.853 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:39:50.853 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:39:50.854 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:39:50.855 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:39:50.856 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:39:50.858 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:39:50.877 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:39:50.991 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:39:51.030 +08:00 [DBG] Hosting started
2021-01-13 12:39:51.034 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:39:51.434 +08:00 [DBG] Connection id "0HM5NFL21HN0S" started.
2021-01-13 12:39:51.434 +08:00 [DBG] Connection id "0HM5NFL21HN0T" started.
2021-01-13 12:39:51.462 +08:00 [DBG] Connection id "0HM5NFL21HN0T" received FIN.
2021-01-13 12:39:51.462 +08:00 [DBG] Connection id "0HM5NFL21HN0S" received FIN.
2021-01-13 12:39:51.554 +08:00 [DBG] Connection id "0HM5NFL21HN0T" sending FIN.
2021-01-13 12:39:51.554 +08:00 [DBG] Connection id "0HM5NFL21HN0S" sending FIN.
2021-01-13 12:39:51.601 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:39:51.601 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:39:51.653 +08:00 [DBG] Connection id "0HM5NFL21HN0S" stopped.
2021-01-13 12:39:51.653 +08:00 [DBG] Connection id "0HM5NFL21HN0T" stopped.
2021-01-13 12:39:52.325 +08:00 [DBG] Connection id "0HM5NFL21HN0U" started.
2021-01-13 12:39:52.545 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/  
2021-01-13 12:39:52.550 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:39:52.579 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:39:52.580 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:39:52.581 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:39:52.582 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:39:52.582 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:39:52.583 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:39:52.583 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:39:52.675 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:39:52.690 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:39:52.700 +08:00 [DBG] Connection id "0HM5NFL21HN0U" completed keep alive response.
2021-01-13 12:39:52.704 +08:00 [INF] Request finished in 159.3915ms 404 
2021-01-13 12:40:12.035 +08:00 [DBG] Hosting starting
2021-01-13 12:40:12.301 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:40:12.321 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:40:12.342 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:40:12.358 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:40:12.400 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:40:12.401 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:40:12.403 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:40:12.404 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:40:12.407 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:40:12.410 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:40:12.411 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:40:12.440 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:40:12.451 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:40:12.452 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:40:12.452 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:40:12.453 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:40:12.453 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:40:12.454 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:40:12.464 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:40:12.528 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:40:12.570 +08:00 [DBG] Hosting started
2021-01-13 12:40:12.570 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:40:12.982 +08:00 [DBG] Connection id "0HM5NFL8F1JBA" started.
2021-01-13 12:40:12.982 +08:00 [DBG] Connection id "0HM5NFL8F1JBB" started.
2021-01-13 12:40:13.007 +08:00 [DBG] Connection id "0HM5NFL8F1JBB" received FIN.
2021-01-13 12:40:13.007 +08:00 [DBG] Connection id "0HM5NFL8F1JBA" received FIN.
2021-01-13 12:40:13.021 +08:00 [DBG] Connection id "0HM5NFL8F1JBA" sending FIN.
2021-01-13 12:40:13.027 +08:00 [DBG] Connection id "0HM5NFL8F1JBB" sending FIN.
2021-01-13 12:40:13.144 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:40:13.144 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:40:13.204 +08:00 [DBG] Connection id "0HM5NFL8F1JBA" stopped.
2021-01-13 12:40:13.204 +08:00 [DBG] Connection id "0HM5NFL8F1JBB" stopped.
2021-01-13 12:40:13.851 +08:00 [DBG] Connection id "0HM5NFL8F1JBC" started.
2021-01-13 12:40:13.912 +08:00 [DBG] Connection id "0HM5NFL8F1JBD" started.
2021-01-13 12:40:14.089 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5000/  
2021-01-13 12:40:14.093 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:40:14.120 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:40:14.120 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:40:14.121 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:40:14.122 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:40:14.122 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:40:14.123 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:40:14.124 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:40:14.219 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:40:14.235 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:40:14.245 +08:00 [DBG] Connection id "0HM5NFL8F1JBC" completed keep alive response.
2021-01-13 12:40:14.250 +08:00 [INF] Request finished in 160.6674ms 404 
2021-01-13 12:40:43.473 +08:00 [DBG] Connection id "0HM5NFL8F1JBE" started.
2021-01-13 12:40:43.554 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:40:43.557 +08:00 [DBG] Connection id "0HM5NFL8F1JBE" disconnecting.
2021-01-13 12:40:43.558 +08:00 [DBG] Connection id "0HM5NFL8F1JBE" sending FIN.
2021-01-13 12:40:43.622 +08:00 [DBG] Connection id "0HM5NFL8F1JBE" stopped.
2021-01-13 12:41:17.954 +08:00 [DBG] Connection id "0HM5NFL8F1JBF" started.
2021-01-13 12:41:18.060 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:18.064 +08:00 [DBG] Connection id "0HM5NFL8F1JBF" disconnecting.
2021-01-13 12:41:18.064 +08:00 [DBG] Connection id "0HM5NFL8F1JBF" sending FIN.
2021-01-13 12:41:18.096 +08:00 [DBG] Connection id "0HM5NFL8F1JBF" stopped.
2021-01-13 12:41:32.657 +08:00 [DBG] Connection id "0HM5NFL8F1JBG" started.
2021-01-13 12:41:32.736 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:32.740 +08:00 [DBG] Connection id "0HM5NFL8F1JBG" disconnecting.
2021-01-13 12:41:32.740 +08:00 [DBG] Connection id "0HM5NFL8F1JBG" sending FIN.
2021-01-13 12:41:32.783 +08:00 [DBG] Connection id "0HM5NFL8F1JBG" stopped.
2021-01-13 12:41:46.564 +08:00 [DBG] Connection id "0HM5NFL8F1JBD" received FIN.
2021-01-13 12:41:46.566 +08:00 [DBG] Connection id "0HM5NFL8F1JBD" disconnecting.
2021-01-13 12:41:46.570 +08:00 [DBG] Connection id "0HM5NFL8F1JBD" sending FIN.
2021-01-13 12:41:46.580 +08:00 [DBG] Connection id "0HM5NFL8F1JBD" stopped.
2021-01-13 12:41:57.063 +08:00 [DBG] Connection id "0HM5NFL8F1JBH" started.
2021-01-13 12:41:57.067 +08:00 [DBG] Connection id "0HM5NFL8F1JBI" started.
2021-01-13 12:41:57.133 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:57.137 +08:00 [DBG] Connection id "0HM5NFL8F1JBI" disconnecting.
2021-01-13 12:41:57.137 +08:00 [DBG] Connection id "0HM5NFL8F1JBI" sending FIN.
2021-01-13 12:41:57.212 +08:00 [DBG] Connection id "0HM5NFL8F1JBI" stopped.
2021-01-13 12:41:57.232 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:57.234 +08:00 [DBG] Connection id "0HM5NFL8F1JBH" disconnecting.
2021-01-13 12:41:57.235 +08:00 [DBG] Connection id "0HM5NFL8F1JBH" sending FIN.
2021-01-13 12:41:57.255 +08:00 [DBG] Connection id "0HM5NFL8F1JBJ" started.
2021-01-13 12:41:57.277 +08:00 [DBG] Connection id "0HM5NFL8F1JBH" stopped.
2021-01-13 12:41:57.330 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:57.334 +08:00 [DBG] Connection id "0HM5NFL8F1JBJ" disconnecting.
2021-01-13 12:41:57.334 +08:00 [DBG] Connection id "0HM5NFL8F1JBJ" sending FIN.
2021-01-13 12:41:57.407 +08:00 [DBG] Connection id "0HM5NFL8F1JBJ" stopped.
2021-01-13 12:41:58.395 +08:00 [DBG] Connection id "0HM5NFL8F1JBK" started.
2021-01-13 12:41:58.413 +08:00 [DBG] Connection id "0HM5NFL8F1JBL" started.
2021-01-13 12:41:58.487 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:58.491 +08:00 [DBG] Connection id "0HM5NFL8F1JBL" disconnecting.
2021-01-13 12:41:58.492 +08:00 [DBG] Connection id "0HM5NFL8F1JBL" sending FIN.
2021-01-13 12:41:58.557 +08:00 [DBG] Connection id "0HM5NFL8F1JBL" stopped.
2021-01-13 12:41:58.573 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:58.578 +08:00 [DBG] Connection id "0HM5NFL8F1JBK" disconnecting.
2021-01-13 12:41:58.578 +08:00 [DBG] Connection id "0HM5NFL8F1JBK" sending FIN.
2021-01-13 12:41:58.581 +08:00 [DBG] Connection id "0HM5NFL8F1JBM" started.
2021-01-13 12:41:58.628 +08:00 [DBG] Connection id "0HM5NFL8F1JBK" stopped.
2021-01-13 12:41:58.663 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:41:58.666 +08:00 [DBG] Connection id "0HM5NFL8F1JBM" disconnecting.
2021-01-13 12:41:58.666 +08:00 [DBG] Connection id "0HM5NFL8F1JBM" sending FIN.
2021-01-13 12:41:58.703 +08:00 [DBG] Connection id "0HM5NFL8F1JBM" stopped.
2021-01-13 12:42:00.526 +08:00 [DBG] Connection id "0HM5NFL8F1JBN" started.
2021-01-13 12:42:00.537 +08:00 [DBG] Connection id "0HM5NFL8F1JBO" started.
2021-01-13 12:42:00.610 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:00.615 +08:00 [DBG] Connection id "0HM5NFL8F1JBO" disconnecting.
2021-01-13 12:42:00.615 +08:00 [DBG] Connection id "0HM5NFL8F1JBO" sending FIN.
2021-01-13 12:42:00.677 +08:00 [DBG] Connection id "0HM5NFL8F1JBO" stopped.
2021-01-13 12:42:00.694 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:00.697 +08:00 [DBG] Connection id "0HM5NFL8F1JBN" disconnecting.
2021-01-13 12:42:00.697 +08:00 [DBG] Connection id "0HM5NFL8F1JBN" sending FIN.
2021-01-13 12:42:00.708 +08:00 [DBG] Connection id "0HM5NFL8F1JBP" started.
2021-01-13 12:42:00.735 +08:00 [DBG] Connection id "0HM5NFL8F1JBN" stopped.
2021-01-13 12:42:00.789 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:00.793 +08:00 [DBG] Connection id "0HM5NFL8F1JBP" disconnecting.
2021-01-13 12:42:00.793 +08:00 [DBG] Connection id "0HM5NFL8F1JBP" sending FIN.
2021-01-13 12:42:00.845 +08:00 [DBG] Connection id "0HM5NFL8F1JBP" stopped.
2021-01-13 12:42:05.827 +08:00 [DBG] Connection id "0HM5NFL8F1JBQ" started.
2021-01-13 12:42:05.827 +08:00 [DBG] Connection id "0HM5NFL8F1JBR" started.
2021-01-13 12:42:05.894 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:05.899 +08:00 [DBG] Connection id "0HM5NFL8F1JBR" disconnecting.
2021-01-13 12:42:05.899 +08:00 [DBG] Connection id "0HM5NFL8F1JBR" sending FIN.
2021-01-13 12:42:05.967 +08:00 [DBG] Connection id "0HM5NFL8F1JBR" stopped.
2021-01-13 12:42:06.064 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:06.067 +08:00 [DBG] Connection id "0HM5NFL8F1JBQ" disconnecting.
2021-01-13 12:42:06.068 +08:00 [DBG] Connection id "0HM5NFL8F1JBQ" sending FIN.
2021-01-13 12:42:06.071 +08:00 [DBG] Connection id "0HM5NFL8F1JBS" started.
2021-01-13 12:42:06.126 +08:00 [DBG] Connection id "0HM5NFL8F1JBQ" stopped.
2021-01-13 12:42:06.157 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:06.160 +08:00 [DBG] Connection id "0HM5NFL8F1JBS" disconnecting.
2021-01-13 12:42:06.161 +08:00 [DBG] Connection id "0HM5NFL8F1JBS" sending FIN.
2021-01-13 12:42:06.194 +08:00 [DBG] Connection id "0HM5NFL8F1JBS" stopped.
2021-01-13 12:42:36.180 +08:00 [DBG] Connection id "0HM5NFL8F1JBT" started.
2021-01-13 12:42:36.193 +08:00 [DBG] Connection id "0HM5NFL8F1JBU" started.
2021-01-13 12:42:36.264 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:36.269 +08:00 [DBG] Connection id "0HM5NFL8F1JBU" disconnecting.
2021-01-13 12:42:36.269 +08:00 [DBG] Connection id "0HM5NFL8F1JBU" sending FIN.
2021-01-13 12:42:36.362 +08:00 [DBG] Connection id "0HM5NFL8F1JBU" stopped.
2021-01-13 12:42:36.381 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:36.384 +08:00 [DBG] Connection id "0HM5NFL8F1JBT" disconnecting.
2021-01-13 12:42:36.384 +08:00 [DBG] Connection id "0HM5NFL8F1JBT" sending FIN.
2021-01-13 12:42:36.389 +08:00 [DBG] Connection id "0HM5NFL8F1JBV" started.
2021-01-13 12:42:36.389 +08:00 [DBG] Connection id "0HM5NFL8F1JBT" received FIN.
2021-01-13 12:42:36.393 +08:00 [DBG] Connection id "0HM5NFL8F1JBT" stopped.
2021-01-13 12:42:36.443 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:42:36.446 +08:00 [DBG] Connection id "0HM5NFL8F1JBV" disconnecting.
2021-01-13 12:42:36.446 +08:00 [DBG] Connection id "0HM5NFL8F1JBV" sending FIN.
2021-01-13 12:42:36.481 +08:00 [DBG] Connection id "0HM5NFL8F1JBV" stopped.
2021-01-13 12:43:36.465 +08:00 [DBG] Connection id "0HM5NFL8F1JC0" started.
2021-01-13 12:43:36.478 +08:00 [DBG] Connection id "0HM5NFL8F1JC1" started.
2021-01-13 12:43:36.554 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:43:36.557 +08:00 [DBG] Connection id "0HM5NFL8F1JC1" disconnecting.
2021-01-13 12:43:36.561 +08:00 [DBG] Connection id "0HM5NFL8F1JC1" sending FIN.
2021-01-13 12:43:36.651 +08:00 [DBG] Connection id "0HM5NFL8F1JC1" stopped.
2021-01-13 12:43:36.651 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:43:36.655 +08:00 [DBG] Connection id "0HM5NFL8F1JC0" disconnecting.
2021-01-13 12:43:36.655 +08:00 [DBG] Connection id "0HM5NFL8F1JC0" sending FIN.
2021-01-13 12:43:36.659 +08:00 [DBG] Connection id "0HM5NFL8F1JC2" started.
2021-01-13 12:43:36.714 +08:00 [DBG] Connection id "0HM5NFL8F1JC0" stopped.
2021-01-13 12:43:36.764 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:43:36.769 +08:00 [DBG] Connection id "0HM5NFL8F1JC2" disconnecting.
2021-01-13 12:43:36.769 +08:00 [DBG] Connection id "0HM5NFL8F1JC2" sending FIN.
2021-01-13 12:43:36.803 +08:00 [DBG] Connection id "0HM5NFL8F1JC2" stopped.
2021-01-13 12:44:45.568 +08:00 [DBG] Connection id "0HM5NFL8F1JC3" started.
2021-01-13 12:44:45.637 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:44:45.641 +08:00 [DBG] Connection id "0HM5NFL8F1JC3" disconnecting.
2021-01-13 12:44:45.641 +08:00 [DBG] Connection id "0HM5NFL8F1JC3" sending FIN.
2021-01-13 12:44:45.676 +08:00 [DBG] Connection id "0HM5NFL8F1JC3" stopped.
2021-01-13 12:45:38.533 +08:00 [DBG] Hosting starting
2021-01-13 12:45:38.684 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:45:38.740 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:45:38.837 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:45:38.854 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:45:38.978 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:45:39.007 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:45:39.013 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:45:39.014 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:45:39.018 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:45:39.022 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:45:39.025 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:45:39.073 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:45:39.087 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:45:39.088 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:45:39.088 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:45:39.089 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:45:39.089 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:45:39.090 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:45:39.102 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:45:39.167 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:45:39.207 +08:00 [DBG] Hosting started
2021-01-13 12:45:39.207 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:45:39.486 +08:00 [DBG] Connection id "0HM5NFO9OQTHL" started.
2021-01-13 12:45:39.486 +08:00 [DBG] Connection id "0HM5NFO9OQTHK" started.
2021-01-13 12:45:39.515 +08:00 [DBG] Connection id "0HM5NFO9OQTHL" received FIN.
2021-01-13 12:45:39.515 +08:00 [DBG] Connection id "0HM5NFO9OQTHK" received FIN.
2021-01-13 12:45:39.573 +08:00 [DBG] Connection id "0HM5NFO9OQTHL" sending FIN.
2021-01-13 12:45:39.589 +08:00 [DBG] Connection id "0HM5NFO9OQTHK" sending FIN.
2021-01-13 12:45:39.646 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:45:39.646 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:45:39.723 +08:00 [DBG] Connection id "0HM5NFO9OQTHK" stopped.
2021-01-13 12:45:39.723 +08:00 [DBG] Connection id "0HM5NFO9OQTHL" stopped.
2021-01-13 12:45:40.495 +08:00 [DBG] Connection id "0HM5NFO9OQTHM" started.
2021-01-13 12:45:40.546 +08:00 [DBG] Connection id "0HM5NFO9OQTHN" started.
2021-01-13 12:45:40.709 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5000/  
2021-01-13 12:45:40.712 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:45:40.743 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:45:40.743 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:45:40.744 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:45:40.744 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:45:40.745 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:45:40.745 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:45:40.745 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:45:40.834 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:45:40.849 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:45:40.859 +08:00 [DBG] Connection id "0HM5NFO9OQTHM" completed keep alive response.
2021-01-13 12:45:40.863 +08:00 [INF] Request finished in 154.0273ms 404 
2021-01-13 12:45:49.002 +08:00 [DBG] Connection id "0HM5NFO9OQTHO" started.
2021-01-13 12:45:49.088 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:45:49.098 +08:00 [DBG] Connection id "0HM5NFO9OQTHO" disconnecting.
2021-01-13 12:45:49.099 +08:00 [DBG] Connection id "0HM5NFO9OQTHO" sending FIN.
2021-01-13 12:45:49.182 +08:00 [DBG] Connection id "0HM5NFO9OQTHO" stopped.
2021-01-13 12:46:28.828 +08:00 [DBG] Connection id "0HM5NFO9OQTHP" started.
2021-01-13 12:46:47.063 +08:00 [DBG] Hosting starting
2021-01-13 12:46:47.245 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:46:47.267 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:46:47.287 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:46:47.312 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:46:47.418 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:46:47.420 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:46:47.421 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:46:47.423 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:46:47.426 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:46:47.431 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:46:47.433 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:46:47.473 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:46:47.483 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:46:47.483 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:46:47.484 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:46:47.484 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:46:47.484 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:46:47.485 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:46:47.497 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:46:47.604 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: E80F799E6E4FCC7836ABAA84114B33D57F421173)
2021-01-13 12:46:47.648 +08:00 [DBG] Hosting started
2021-01-13 12:46:47.648 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:46:47.987 +08:00 [DBG] Connection id "0HM5NFOU63PPE" started.
2021-01-13 12:46:47.987 +08:00 [DBG] Connection id "0HM5NFOU63PPF" started.
2021-01-13 12:46:48.012 +08:00 [DBG] Connection id "0HM5NFOU63PPF" received FIN.
2021-01-13 12:46:48.012 +08:00 [DBG] Connection id "0HM5NFOU63PPE" received FIN.
2021-01-13 12:46:48.020 +08:00 [DBG] Connection id "0HM5NFOU63PPE" sending FIN.
2021-01-13 12:46:48.021 +08:00 [DBG] Connection id "0HM5NFOU63PPF" sending FIN.
2021-01-13 12:46:48.125 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:46:48.125 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:46:48.176 +08:00 [DBG] Connection id "0HM5NFOU63PPE" stopped.
2021-01-13 12:46:48.176 +08:00 [DBG] Connection id "0HM5NFOU63PPF" stopped.
2021-01-13 12:46:48.823 +08:00 [DBG] Connection id "0HM5NFOU63PPG" started.
2021-01-13 12:46:48.877 +08:00 [DBG] Connection id "0HM5NFOU63PPH" started.
2021-01-13 12:46:49.028 +08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5000/  
2021-01-13 12:46:49.032 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:46:49.061 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:46:49.061 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:46:49.062 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:46:49.062 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:46:49.063 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:46:49.063 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:46:49.064 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:46:49.139 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:46:49.153 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2021-01-13 12:46:49.163 +08:00 [DBG] Connection id "0HM5NFOU63PPG" completed keep alive response.
2021-01-13 12:46:49.168 +08:00 [INF] Request finished in 141.1415ms 404 
2021-01-13 12:46:58.584 +08:00 [DBG] Connection id "0HM5NFOU63PPI" started.
2021-01-13 12:46:58.667 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:46:58.672 +08:00 [DBG] Connection id "0HM5NFOU63PPI" disconnecting.
2021-01-13 12:46:58.673 +08:00 [DBG] Connection id "0HM5NFOU63PPI" sending FIN.
2021-01-13 12:46:58.717 +08:00 [DBG] Connection id "0HM5NFOU63PPI" stopped.
2021-01-13 12:47:31.973 +08:00 [DBG] Connection id "0HM5NFOU63PPJ" started.
2021-01-13 12:47:31.990 +08:00 [DBG] Connection id "0HM5NFOU63PPK" started.
2021-01-13 12:47:32.105 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:32.110 +08:00 [DBG] Connection id "0HM5NFOU63PPK" disconnecting.
2021-01-13 12:47:32.110 +08:00 [DBG] Connection id "0HM5NFOU63PPK" sending FIN.
2021-01-13 12:47:32.179 +08:00 [DBG] Connection id "0HM5NFOU63PPK" stopped.
2021-01-13 12:47:32.198 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:32.202 +08:00 [DBG] Connection id "0HM5NFOU63PPJ" disconnecting.
2021-01-13 12:47:32.202 +08:00 [DBG] Connection id "0HM5NFOU63PPJ" sending FIN.
2021-01-13 12:47:32.220 +08:00 [DBG] Connection id "0HM5NFOU63PPL" started.
2021-01-13 12:47:32.237 +08:00 [DBG] Connection id "0HM5NFOU63PPJ" stopped.
2021-01-13 12:47:32.290 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:32.294 +08:00 [DBG] Connection id "0HM5NFOU63PPL" disconnecting.
2021-01-13 12:47:32.294 +08:00 [DBG] Connection id "0HM5NFOU63PPL" sending FIN.
2021-01-13 12:47:32.356 +08:00 [DBG] Connection id "0HM5NFOU63PPL" stopped.
2021-01-13 12:47:33.341 +08:00 [DBG] Connection id "0HM5NFOU63PPM" started.
2021-01-13 12:47:33.353 +08:00 [DBG] Connection id "0HM5NFOU63PPN" started.
2021-01-13 12:47:33.436 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:33.443 +08:00 [DBG] Connection id "0HM5NFOU63PPN" disconnecting.
2021-01-13 12:47:33.444 +08:00 [DBG] Connection id "0HM5NFOU63PPN" sending FIN.
2021-01-13 12:47:33.507 +08:00 [DBG] Connection id "0HM5NFOU63PPN" stopped.
2021-01-13 12:47:33.525 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:33.528 +08:00 [DBG] Connection id "0HM5NFOU63PPM" disconnecting.
2021-01-13 12:47:33.528 +08:00 [DBG] Connection id "0HM5NFOU63PPM" sending FIN.
2021-01-13 12:47:33.532 +08:00 [DBG] Connection id "0HM5NFOU63PPO" started.
2021-01-13 12:47:33.576 +08:00 [DBG] Connection id "0HM5NFOU63PPM" stopped.
2021-01-13 12:47:33.611 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__51_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionAdapter.InnerOnConnectionAsync(ConnectionAdapterContext context)
2021-01-13 12:47:33.614 +08:00 [DBG] Connection id "0HM5NFOU63PPO" disconnecting.
2021-01-13 12:47:33.614 +08:00 [DBG] Connection id "0HM5NFOU63PPO" sending FIN.
2021-01-13 12:47:33.647 +08:00 [DBG] Connection id "0HM5NFOU63PPO" stopped.
2021-01-13 12:47:43.693 +08:00 [DBG] Hosting starting
2021-01-13 12:47:43.904 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:47:43.931 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:47:43.982 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:47:44.035 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:47:44.171 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:47:44.172 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:47:44.173 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:47:44.174 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:47:44.177 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:47:44.182 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:47:44.183 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:47:44.215 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:47:44.229 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:47:44.230 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:47:44.230 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:47:44.230 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:47:44.231 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:47:44.231 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:47:44.243 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:47:44.286 +08:00 [DBG] Hosting started
2021-01-13 12:47:44.287 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:47:44.433 +08:00 [DBG] Connection id "0HM5NFPF0DLHF" started.
2021-01-13 12:47:44.433 +08:00 [DBG] Connection id "0HM5NFPF0DLHE" started.
2021-01-13 12:47:44.482 +08:00 [DBG] Connection id "0HM5NFPF0DLHE" received FIN.
2021-01-13 12:47:44.482 +08:00 [DBG] Connection id "0HM5NFPF0DLHF" received FIN.
2021-01-13 12:47:44.485 +08:00 [DBG] Connection id "0HM5NFPF0DLHF" disconnecting.
2021-01-13 12:47:44.485 +08:00 [DBG] Connection id "0HM5NFPF0DLHE" disconnecting.
2021-01-13 12:47:44.490 +08:00 [DBG] Connection id "0HM5NFPF0DLHF" sending FIN.
2021-01-13 12:47:44.490 +08:00 [DBG] Connection id "0HM5NFPF0DLHE" sending FIN.
2021-01-13 12:47:44.495 +08:00 [DBG] Connection id "0HM5NFPF0DLHE" stopped.
2021-01-13 12:47:44.495 +08:00 [DBG] Connection id "0HM5NFPF0DLHF" stopped.
2021-01-13 12:47:44.501 +08:00 [DBG] Connection id "0HM5NFPF0DLHG" started.
2021-01-13 12:47:44.550 +08:00 [INF] Connection id "0HM5NFPF0DLHG" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xFF\xEC\xF9\xC3\xFF\xA4\x17\x1B\xB36@\x93\xE2L\x93\xC1Q\x15\xB2\xF2\xAF\xEB\x99\xE4\xADJ\xF8\xA9\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xFF\xEC\xF9\xC3\xFF\xA4\x17\x1B\xB36@\x93\xE2L\x93\xC1Q\x15\xB2\xF2\xAF\xEB\x99\xE4\xADJ\xF8\xA9\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:44.603 +08:00 [DBG] Connection id "0HM5NFPF0DLHG" disconnecting.
2021-01-13 12:47:44.604 +08:00 [DBG] Connection id "0HM5NFPF0DLHG" sending FIN.
2021-01-13 12:47:44.605 +08:00 [DBG] Connection id "0HM5NFPF0DLHH" started.
2021-01-13 12:47:44.644 +08:00 [INF] Connection id "0HM5NFPF0DLHH" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xB1\xC8\x19x\x0C^}\xF4\x81)\x97\xE1IGj\x86L3\xB1V\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xB1\xC8\x19x\x0C^}\xF4\x81)\x97\xE1IGj\x86L3\xB1V\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:44.674 +08:00 [DBG] Connection id "0HM5NFPF0DLHG" stopped.
2021-01-13 12:47:44.678 +08:00 [DBG] Connection id "0HM5NFPF0DLHH" disconnecting.
2021-01-13 12:47:44.706 +08:00 [DBG] Connection id "0HM5NFPF0DLHH" reset.
2021-01-13 12:47:44.706 +08:00 [DBG] Connection id "0HM5NFPF0DLHH" sending FIN.
2021-01-13 12:47:44.707 +08:00 [DBG] Connection id "0HM5NFPF0DLHH" stopped.
2021-01-13 12:47:44.780 +08:00 [DBG] Connection id "0HM5NFPF0DLHI" started.
2021-01-13 12:47:44.810 +08:00 [INF] Connection id "0HM5NFPF0DLHI" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xC3\xD2q"\xAE\xDD\x1B\x98\xE6\xD8\xBA\x84\xDD\xF3\x0Fl\xA3|\x97\x88\x87\xD6\xEC\xA6\x11\xBEo\xBD\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xC3\xD2q"\xAE\xDD\x1B\x98\xE6\xD8\xBA\x84\xDD\xF3\x0Fl\xA3|\x97\x88\x87\xD6\xEC\xA6\x11\xBEo\xBD\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:44.815 +08:00 [DBG] Connection id "0HM5NFPF0DLHI" disconnecting.
2021-01-13 12:47:44.816 +08:00 [DBG] Connection id "0HM5NFPF0DLHI" sending FIN.
2021-01-13 12:47:44.816 +08:00 [DBG] Connection id "0HM5NFPF0DLHJ" started.
2021-01-13 12:47:44.888 +08:00 [DBG] Connection id "0HM5NFPF0DLHI" stopped.
2021-01-13 12:47:44.904 +08:00 [INF] Connection id "0HM5NFPF0DLHJ" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xE5\\x13\xB7\x87P*\x9F\xEB%\x9F>\xA3\x8A\x12Y\x96=J\x9B\xCD\xF3`\x07\x9C\x0D\xAB\xDB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{p\xE5\\x13\xB7\x87P*\x9F\xEB%\x9F>\xA3\x8A\x12Y\x96=J\x9B\xCD\xF3`\x07\x9C\x0D\xAB\xDB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:44.909 +08:00 [DBG] Connection id "0HM5NFPF0DLHJ" disconnecting.
2021-01-13 12:47:44.910 +08:00 [DBG] Connection id "0HM5NFPF0DLHJ" sending FIN.
2021-01-13 12:47:44.938 +08:00 [DBG] Connection id "0HM5NFPF0DLHJ" stopped.
2021-01-13 12:47:45.028 +08:00 [DBG] Connection id "0HM5NFPF0DLHK" started.
2021-01-13 12:47:45.115 +08:00 [INF] Connection id "0HM5NFPF0DLHK" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{qL#\xB2E\x0F\x97X>\xD9\x08\x05\x1A\x9F \xA4\xBEd\x9Fm\xDB\xFB\x8B\xFB\x99\x87\x0F\x01\xBF\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{qL#\xB2E\x0F\x97X>\xD9\x08\x05\x1A\x9F \xA4\xBEd\x9Fm\xDB\xFB\x8B\xFB\x99\x87\x0F\x01\xBF\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:45.120 +08:00 [DBG] Connection id "0HM5NFPF0DLHK" disconnecting.
2021-01-13 12:47:45.121 +08:00 [DBG] Connection id "0HM5NFPF0DLHK" sending FIN.
2021-01-13 12:47:45.121 +08:00 [DBG] Connection id "0HM5NFPF0DLHL" started.
2021-01-13 12:47:45.170 +08:00 [DBG] Connection id "0HM5NFPF0DLHK" stopped.
2021-01-13 12:47:45.251 +08:00 [INF] Connection id "0HM5NFPF0DLHL" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q@\xFEPB\x9B\xA4XD\x0CY\x18\x85\x16\xDDG\x11g2a\x0C\xAE\x99\xE4\x1A\x94\x0C2F\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q@\xFEPB\x9B\xA4XD\x0CY\x18\x85\x16\xDDG\x11g2a\x0C\xAE\x99\xE4\x1A\x94\x0C2F\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:45.271 +08:00 [DBG] Connection id "0HM5NFPF0DLHL" disconnecting.
2021-01-13 12:47:45.272 +08:00 [DBG] Connection id "0HM5NFPF0DLHL" sending FIN.
2021-01-13 12:47:45.321 +08:00 [DBG] Connection id "0HM5NFPF0DLHL" stopped.
2021-01-13 12:47:45.378 +08:00 [DBG] Connection id "0HM5NFPF0DLHM" started.
2021-01-13 12:47:45.534 +08:00 [DBG] Connection id "0HM5NFPF0DLHN" started.
2021-01-13 12:47:45.640 +08:00 [DBG] Connection id "0HM5NFPF0DLHO" started.
2021-01-13 12:47:45.640 +08:00 [INF] Connection id "0HM5NFPF0DLHM" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x9B\xE2?\x0C2\xF0n7\xC9'\xC6\xD4\x14\xC2\xA6\xB9\xF3\x7F\xE0Wkt\xEA\x11\xDC\x08t4\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x9B\xE2?\x0C2\xF0n7\xC9'\xC6\xD4\x14\xC2\xA6\xB9\xF3\x7F\xE0Wkt\xEA\x11\xDC\x08t4\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:45.665 +08:00 [DBG] Connection id "0HM5NFPF0DLHM" disconnecting.
2021-01-13 12:47:45.665 +08:00 [DBG] Connection id "0HM5NFPF0DLHM" sending FIN.
2021-01-13 12:47:45.666 +08:00 [DBG] Connection id "0HM5NFPF0DLHP" started.
2021-01-13 12:47:45.709 +08:00 [DBG] Connection id "0HM5NFPF0DLHM" stopped.
2021-01-13 12:47:45.743 +08:00 [INF] Connection id "0HM5NFPF0DLHP" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q*mp9;\xDDD\x01\xA8I[\xCA7G\x98\x06D\x97<4\xB71\xCEe\xF1\xF2\xC6P\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q*mp9;\xDDD\x01\xA8I[\xCA7G\x98\x06D\x97<4\xB71\xCEe\xF1\xF2\xC6P\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:45.752 +08:00 [DBG] Connection id "0HM5NFPF0DLHP" disconnecting.
2021-01-13 12:47:45.752 +08:00 [DBG] Connection id "0HM5NFPF0DLHP" sending FIN.
2021-01-13 12:47:45.789 +08:00 [DBG] Connection id "0HM5NFPF0DLHP" stopped.
2021-01-13 12:47:45.796 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 12:47:45.801 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:47:45.836 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:47:45.836 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:47:45.837 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:47:45.837 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:47:45.838 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:47:45.838 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:47:45.838 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:47:45.845 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:45.859 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:45.866 +08:00 [DBG] Connection id "0HM5NFPF0DLHO" completed keep alive response.
2021-01-13 12:47:45.868 +08:00 [DBG] Connection id "0HM5NFPF0DLHQ" started.
2021-01-13 12:47:45.924 +08:00 [INF] Connection id "0HM5NFPF0DLHQ" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x9FMx\x84\xCF\xE8\x00\x81\xDF\xDDndh\xA6)N\xEF\x94\xEF^\xB3\xABvE\xBF\xB0\xC8\xC6\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x9FMx\x84\xCF\xE8\x00\x81\xDF\xDDndh\xA6)N\xEF\x94\xEF^\xB3\xABvE\xBF\xB0\xC8\xC6\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:45.925 +08:00 [INF] Request finished in 117.1747ms 404 
2021-01-13 12:47:45.935 +08:00 [DBG] Connection id "0HM5NFPF0DLHQ" disconnecting.
2021-01-13 12:47:45.936 +08:00 [DBG] Connection id "0HM5NFPF0DLHQ" sending FIN.
2021-01-13 12:47:45.936 +08:00 [DBG] Connection id "0HM5NFPF0DLHR" started.
2021-01-13 12:47:46.017 +08:00 [INF] Connection id "0HM5NFPF0DLHR" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x02\xF5\xCF\x19_\x84A\x92[p\x95\xBF%\x1A\x02Jz\x19\xA0^\x1Bi\x90k\x1CD=\xC7\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{q\x02\xF5\xCF\x19_\x84A\x92[p\x95\xBF%\x1A\x02Jz\x19\xA0^\x1Bi\x90k\x1CD=\xC7\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.017 +08:00 [DBG] Connection id "0HM5NFPF0DLHQ" stopped.
2021-01-13 12:47:46.023 +08:00 [DBG] Connection id "0HM5NFPF0DLHR" disconnecting.
2021-01-13 12:47:46.024 +08:00 [DBG] Connection id "0HM5NFPF0DLHR" sending FIN.
2021-01-13 12:47:46.055 +08:00 [DBG] Connection id "0HM5NFPF0DLHS" started.
2021-01-13 12:47:46.055 +08:00 [DBG] Connection id "0HM5NFPF0DLHR" stopped.
2021-01-13 12:47:46.087 +08:00 [INF] Connection id "0HM5NFPF0DLHS" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x94'p\xD1@\x02\xD4\xEA\xB36\xFE5p\xD1V\xD4\xDBas.g\xFD\xC3\x8EB8\xB4[\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x94'p\xD1@\x02\xD4\xEA\xB36\xFE5p\xD1V\xD4\xDBas.g\xFD\xC3\x8EB8\xB4[\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.092 +08:00 [DBG] Connection id "0HM5NFPF0DLHS" disconnecting.
2021-01-13 12:47:46.093 +08:00 [DBG] Connection id "0HM5NFPF0DLHS" sending FIN.
2021-01-13 12:47:46.093 +08:00 [DBG] Connection id "0HM5NFPF0DLHT" started.
2021-01-13 12:47:46.138 +08:00 [DBG] Connection id "0HM5NFPF0DLHS" stopped.
2021-01-13 12:47:46.153 +08:00 [INF] Connection id "0HM5NFPF0DLHT" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xEE\x847Db\x97\x04aO\x8A\xDCo\xE69\x0F\xE1\xF6\x8A\xD5\xFB\x16N\x0Eq\x15\xFE\xA0n\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xEE\x847Db\x97\x04aO\x8A\xDCo\xE69\x0F\xE1\xF6\x8A\xD5\xFB\x16N\x0Eq\x15\xFE\xA0n\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.158 +08:00 [DBG] Connection id "0HM5NFPF0DLHT" disconnecting.
2021-01-13 12:47:46.158 +08:00 [DBG] Connection id "0HM5NFPF0DLHT" sending FIN.
2021-01-13 12:47:46.188 +08:00 [DBG] Connection id "0HM5NFPF0DLHT" stopped.
2021-01-13 12:47:46.271 +08:00 [DBG] Connection id "0HM5NFPF0DLHU" started.
2021-01-13 12:47:46.344 +08:00 [INF] Connection id "0HM5NFPF0DLHU" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{rk\x1C\xD2\xC7\xD2t\x01\x0Bw\x05W\xF1j\xA6\xBE\x8Bq+h\x8F\xF3\xAE\xF2\xBB]<s\xE4\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{rk\x1C\xD2\xC7\xD2t\x01\x0Bw\x05W\xF1j\xA6\xBE\x8Bq+h\x8F\xF3\xAE\xF2\xBB]<s\xE4\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.351 +08:00 [DBG] Connection id "0HM5NFPF0DLHU" disconnecting.
2021-01-13 12:47:46.351 +08:00 [DBG] Connection id "0HM5NFPF0DLHU" sending FIN.
2021-01-13 12:47:46.352 +08:00 [DBG] Connection id "0HM5NFPF0DLHV" started.
2021-01-13 12:47:46.408 +08:00 [DBG] Connection id "0HM5NFPF0DLHU" stopped.
2021-01-13 12:47:46.427 +08:00 [INF] Connection id "0HM5NFPF0DLHV" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x1Et\xC13\x0E\x01\x02\xDDl3\x90\x8D\xFD\x8CQfI\xC3\x0D\x88E\xA7%Pc\xA4h6\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x1Et\xC13\x0E\x01\x02\xDDl3\x90\x8D\xFD\x8CQfI\xC3\x0D\x88E\xA7%Pc\xA4h6\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.436 +08:00 [DBG] Connection id "0HM5NFPF0DLHV" disconnecting.
2021-01-13 12:47:46.437 +08:00 [DBG] Connection id "0HM5NFPF0DLHV" sending FIN.
2021-01-13 12:47:46.469 +08:00 [DBG] Connection id "0HM5NFPF0DLHV" stopped.
2021-01-13 12:47:46.545 +08:00 [DBG] Connection id "0HM5NFPF0DLI0" started.
2021-01-13 12:47:46.578 +08:00 [INF] Connection id "0HM5NFPF0DLI0" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r/`\x0DT\x09?.\\xA5Z\xAF[\xB1\xE3,B>\xB3\xAF\xC4\x9B\xEE\xBEh\x13\xD2(\x82\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r/`\x0DT\x09?.\\xA5Z\xAF[\xB1\xE3,B>\xB3\xAF\xC4\x9B\xEE\xBEh\x13\xD2(\x82\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.584 +08:00 [DBG] Connection id "0HM5NFPF0DLI0" disconnecting.
2021-01-13 12:47:46.585 +08:00 [DBG] Connection id "0HM5NFPF0DLI0" sending FIN.
2021-01-13 12:47:46.585 +08:00 [DBG] Connection id "0HM5NFPF0DLI1" started.
2021-01-13 12:47:46.639 +08:00 [DBG] Connection id "0HM5NFPF0DLI0" stopped.
2021-01-13 12:47:46.646 +08:00 [INF] Connection id "0HM5NFPF0DLI1" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x07'\x8B|\xFD\x0D\xDA\xC4&P\xCD\x1E\xB2\xF6\xAAy\xD9a\xF1\xAF\x1EG,\x14\x1EN\xBD\xFB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x07'\x8B|\xFD\x0D\xDA\xC4&P\xCD\x1E\xB2\xF6\xAAy\xD9a\xF1\xAF\x1EG,\x14\x1EN\xBD\xFB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.650 +08:00 [DBG] Connection id "0HM5NFPF0DLI1" disconnecting.
2021-01-13 12:47:46.678 +08:00 [DBG] Connection id "0HM5NFPF0DLI1" reset.
2021-01-13 12:47:46.678 +08:00 [DBG] Connection id "0HM5NFPF0DLI1" sending FIN.
2021-01-13 12:47:46.679 +08:00 [DBG] Connection id "0HM5NFPF0DLI1" stopped.
2021-01-13 12:47:46.762 +08:00 [DBG] Connection id "0HM5NFPF0DLI2" started.
2021-01-13 12:47:46.802 +08:00 [INF] Connection id "0HM5NFPF0DLI2" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x88\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\x88\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.809 +08:00 [DBG] Connection id "0HM5NFPF0DLI2" disconnecting.
2021-01-13 12:47:46.809 +08:00 [DBG] Connection id "0HM5NFPF0DLI2" sending FIN.
2021-01-13 12:47:46.810 +08:00 [DBG] Connection id "0HM5NFPF0DLI3" started.
2021-01-13 12:47:46.860 +08:00 [DBG] Connection id "0HM5NFPF0DLI2" stopped.
2021-01-13 12:47:46.876 +08:00 [INF] Connection id "0HM5NFPF0DLI3" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xBE\xBCa\x92T\xD7\x04\xFE\x7FM\x1A\xE6\x81B\x1E\x01~n\xFD\xB4\xDF\x8C:\xE4)\xD1\xBBA\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xBE\xBCa\x92T\xD7\x04\xFE\x7FM\x1A\xE6\x81B\x1E\x01~n\xFD\xB4\xDF\x8C:\xE4)\xD1\xBBA\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:46.884 +08:00 [DBG] Connection id "0HM5NFPF0DLI3" disconnecting.
2021-01-13 12:47:46.884 +08:00 [DBG] Connection id "0HM5NFPF0DLI3" sending FIN.
2021-01-13 12:47:46.914 +08:00 [DBG] Connection id "0HM5NFPF0DLI3" stopped.
2021-01-13 12:47:46.997 +08:00 [DBG] Connection id "0HM5NFPF0DLI4" started.
2021-01-13 12:47:47.028 +08:00 [INF] Connection id "0HM5NFPF0DLI4" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xCAx\xE1\xB3\x08\xB3\x12\xEF1\xC9\xF2\xFB\x96}\xA6\xF6\xAB\xC4\xF5\x87\xF6\xD0\xBA\xCC\xD5:A\\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{r\xCAx\xE1\xB3\x08\xB3\x12\xEF1\xC9\xF2\xFB\x96}\xA6\xF6\xAB\xC4\xF5\x87\xF6\xD0\xBA\xCC\xD5:A\\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:47.033 +08:00 [DBG] Connection id "0HM5NFPF0DLI4" disconnecting.
2021-01-13 12:47:47.034 +08:00 [DBG] Connection id "0HM5NFPF0DLI4" sending FIN.
2021-01-13 12:47:47.034 +08:00 [DBG] Connection id "0HM5NFPF0DLI5" started.
2021-01-13 12:47:47.092 +08:00 [DBG] Connection id "0HM5NFPF0DLI4" stopped.
2021-01-13 12:47:47.100 +08:00 [INF] Connection id "0HM5NFPF0DLI5" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s\xFB\x0D(\xD4\x82\x8E7*\x97dM\xD6\xE7\xCB\xC6\x1D\x0F\xD6\x14`\xFBR\x03\xC5t\xB8j\x98\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s\xFB\x0D(\xD4\x82\x8E7*\x97dM\xD6\xE7\xCB\xC6\x1D\x0F\xD6\x14`\xFBR\x03\xC5t\xB8j\x98\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:47.105 +08:00 [DBG] Connection id "0HM5NFPF0DLI5" disconnecting.
2021-01-13 12:47:47.106 +08:00 [DBG] Connection id "0HM5NFPF0DLI5" sending FIN.
2021-01-13 12:47:47.134 +08:00 [DBG] Connection id "0HM5NFPF0DLI5" stopped.
2021-01-13 12:47:47.220 +08:00 [DBG] Connection id "0HM5NFPF0DLI6" started.
2021-01-13 12:47:47.271 +08:00 [INF] Connection id "0HM5NFPF0DLI6" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s\xEAn\xF2\x87\x86\xFE\xC4\xEFer]\xF7\x9C2\x04-.KU_\x86\xD7L\xED\xFD\x0CEI\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s\xEAn\xF2\x87\x86\xFE\xC4\xEFer]\xF7\x9C2\x04-.KU_\x86\xD7L\xED\xFD\x0CEI\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:47.278 +08:00 [DBG] Connection id "0HM5NFPF0DLI6" disconnecting.
2021-01-13 12:47:47.279 +08:00 [DBG] Connection id "0HM5NFPF0DLI6" sending FIN.
2021-01-13 12:47:47.280 +08:00 [DBG] Connection id "0HM5NFPF0DLI7" started.
2021-01-13 12:47:47.337 +08:00 [INF] Connection id "0HM5NFPF0DLI7" bad request data: "Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s#p\x08H|\xFDr\xB9\x10,\xC2\xA8\x1Cf\x90\x8F\x0D\xD2\xCB\xF7\xE6\xAF\x1B\xE8\x12\xAD\xE9\xCB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'"
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Invalid request line: '\x16\x03\x03\x00\xA6\x01\x00\x00\xA2\x03\x03_\xFE{s#p\x08H|\xFDr\xB9\x10,\xC2\xA8\x1Cf\x90\x8F\x0D\xD2\xCB\xF7\xE6\xAF\x1B\xE8\x12\xAD\xE9\xCB\x00\x00*\xC0,\xC0+\xC00\xC0/\x00\x9F\x00\x9E\xC0$\xC0#\xC0(\xC0'\xC0\x0A'
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.RejectRequestLine(Byte* requestLine, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.GetUnknownMethod(Byte* data, Int32 length, Int32& methodLength)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, Byte* data, Int32 length)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpParser`1.Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.IHttpParser<TRequestHandler>.ParseRequestLine(TRequestHandler handler, ReadOnlySequence`1& buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TakeStartLine(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.ParseRequest(ReadOnlySequence`1 buffer, SequencePosition& consumed, SequencePosition& examined)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1Connection.TryParseRequest(ReadResult result, Boolean& endConnection)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequestsAsync[TContext](IHttpApplication`1 application)
2021-01-13 12:47:47.337 +08:00 [DBG] Connection id "0HM5NFPF0DLI6" stopped.
2021-01-13 12:47:47.343 +08:00 [DBG] Connection id "0HM5NFPF0DLI7" disconnecting.
2021-01-13 12:47:47.343 +08:00 [DBG] Connection id "0HM5NFPF0DLI7" sending FIN.
2021-01-13 12:47:47.371 +08:00 [DBG] Connection id "0HM5NFPF0DLI7" stopped.
2021-01-13 12:47:54.791 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" started.
2021-01-13 12:47:54.823 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 12:47:54.824 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:54.825 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:54.838 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 12:47:54.841 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 12:47:54.842 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 12:47:54.846 +08:00 [DBG] Start discovery request
2021-01-13 12:47:54.898 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" completed keep alive response.
2021-01-13 12:47:54.899 +08:00 [INF] Request finished in 76.5178ms 200 application/json; charset=UTF-8
2021-01-13 12:47:55.000 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 12:47:55.002 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:55.002 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:47:55.003 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 12:47:55.006 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 12:47:55.006 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 12:47:55.010 +08:00 [DBG] Start key discovery request
2021-01-13 12:47:55.029 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" completed keep alive response.
2021-01-13 12:47:55.031 +08:00 [INF] Request finished in 30.9838ms 200 application/json; charset=UTF-8
2021-01-13 12:47:55.251 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" received FIN.
2021-01-13 12:47:55.252 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" disconnecting.
2021-01-13 12:47:55.253 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" sending FIN.
2021-01-13 12:47:55.254 +08:00 [DBG] Connection id "0HM5NFPF0DLI8" stopped.
2021-01-13 12:47:58.443 +08:00 [DBG] Connection id "0HM5NFPF0DLI9" started.
2021-01-13 12:47:58.465 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 12:47:59.033 +08:00 [DBG] Connection id "0HM5NFPF0DLI9", Request id "0HM5NFPF0DLI9:00000001": started reading request body.
2021-01-13 12:48:13.087 +08:00 [DBG] Hosting starting
2021-01-13 12:48:13.215 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 12:48:13.232 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 12:48:13.251 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 12:48:13.267 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 12:48:13.311 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:48:13.312 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 12:48:13.313 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 12:48:13.314 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 12:48:13.317 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 12:48:13.320 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 12:48:13.324 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 12:48:13.352 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 12:48:13.364 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 12:48:13.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 12:48:13.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 12:48:13.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 12:48:13.366 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 12:48:13.366 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 12:48:13.381 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 12:48:13.437 +08:00 [DBG] Hosting started
2021-01-13 12:48:13.437 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 12:48:13.746 +08:00 [DBG] Connection id "0HM5NFPNNVBO3" started.
2021-01-13 12:48:13.746 +08:00 [DBG] Connection id "0HM5NFPNNVBO2" started.
2021-01-13 12:48:13.778 +08:00 [DBG] Connection id "0HM5NFPNNVBO3" received FIN.
2021-01-13 12:48:13.778 +08:00 [DBG] Connection id "0HM5NFPNNVBO2" received FIN.
2021-01-13 12:48:13.792 +08:00 [DBG] Connection id "0HM5NFPNNVBO2" disconnecting.
2021-01-13 12:48:13.792 +08:00 [DBG] Connection id "0HM5NFPNNVBO3" disconnecting.
2021-01-13 12:48:13.796 +08:00 [DBG] Connection id "0HM5NFPNNVBO2" sending FIN.
2021-01-13 12:48:13.806 +08:00 [DBG] Connection id "0HM5NFPNNVBO3" sending FIN.
2021-01-13 12:48:13.807 +08:00 [DBG] Connection id "0HM5NFPNNVBO2" stopped.
2021-01-13 12:48:13.810 +08:00 [DBG] Connection id "0HM5NFPNNVBO3" stopped.
2021-01-13 12:48:14.712 +08:00 [DBG] Connection id "0HM5NFPNNVBO4" started.
2021-01-13 12:48:14.804 +08:00 [DBG] Connection id "0HM5NFPNNVBO5" started.
2021-01-13 12:48:15.089 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 12:48:15.102 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 12:48:15.152 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 12:48:15.162 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 12:48:15.163 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 12:48:15.164 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 12:48:15.168 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 12:48:15.168 +08:00 [DBG] Error Url: /home/error
2021-01-13 12:48:15.169 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 12:48:15.177 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:15.197 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:15.218 +08:00 [DBG] Connection id "0HM5NFPNNVBO5" completed keep alive response.
2021-01-13 12:48:15.246 +08:00 [INF] Request finished in 157.1602ms 404 
2021-01-13 12:48:18.075 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" started.
2021-01-13 12:48:18.119 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 12:48:18.123 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.133 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.153 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 12:48:18.159 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 12:48:18.161 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 12:48:18.165 +08:00 [DBG] Start discovery request
2021-01-13 12:48:18.222 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" completed keep alive response.
2021-01-13 12:48:18.227 +08:00 [INF] Request finished in 107.6778ms 200 application/json; charset=UTF-8
2021-01-13 12:48:18.418 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 12:48:18.419 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.420 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.420 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 12:48:18.421 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 12:48:18.422 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 12:48:18.429 +08:00 [DBG] Start key discovery request
2021-01-13 12:48:18.448 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" completed keep alive response.
2021-01-13 12:48:18.450 +08:00 [INF] Request finished in 32.3924ms 200 application/json; charset=UTF-8
2021-01-13 12:48:18.676 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" received FIN.
2021-01-13 12:48:18.679 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" disconnecting.
2021-01-13 12:48:18.680 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" sending FIN.
2021-01-13 12:48:18.680 +08:00 [DBG] Connection id "0HM5NFPNNVBO6" stopped.
2021-01-13 12:48:18.695 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" started.
2021-01-13 12:48:18.702 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 12:48:18.706 +08:00 [DBG] Connection id "0HM5NFPNNVBO7", Request id "0HM5NFPNNVBO7:00000001": started reading request body.
2021-01-13 12:48:18.714 +08:00 [DBG] Connection id "0HM5NFPNNVBO7", Request id "0HM5NFPNNVBO7:00000001": done reading request body.
2021-01-13 12:48:18.715 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.716 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:18.716 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 12:48:18.722 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 12:48:18.723 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 12:48:18.731 +08:00 [DBG] Start token request.
2021-01-13 12:48:18.737 +08:00 [DBG] Start client validation
2021-01-13 12:48:18.742 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 12:48:18.742 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 12:48:18.744 +08:00 [DBG] Secret id found: client
2021-01-13 12:48:18.755 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 12:48:18.764 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 12:48:18.764 +08:00 [DBG] Client validation success
2021-01-13 12:48:18.780 +08:00 [DBG] Start token request validation
2021-01-13 12:48:18.788 +08:00 [DBG] Start client credentials token request validation
2021-01-13 12:48:18.813 +08:00 [DBG] client credentials token request validation success
2021-01-13 12:48:18.828 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 12:48:18.863 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 12:48:18.939 +08:00 [DBG] Token request success.
2021-01-13 12:48:18.944 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" completed keep alive response.
2021-01-13 12:48:18.944 +08:00 [INF] Request finished in 242.4839ms 200 application/json; charset=UTF-8
2021-01-13 12:48:44.650 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" started.
2021-01-13 12:48:44.669 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 12:48:44.697 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:44.697 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:44.698 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 12:48:44.699 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 12:48:44.699 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 12:48:44.700 +08:00 [DBG] Start discovery request
2021-01-13 12:48:44.701 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" completed keep alive response.
2021-01-13 12:48:44.701 +08:00 [INF] Request finished in 35.6192ms 200 application/json; charset=UTF-8
2021-01-13 12:48:44.811 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 12:48:44.813 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:44.814 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 12:48:44.814 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 12:48:44.815 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 12:48:44.816 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 12:48:44.817 +08:00 [DBG] Start key discovery request
2021-01-13 12:48:44.817 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" completed keep alive response.
2021-01-13 12:48:44.818 +08:00 [INF] Request finished in 6.5935ms 200 application/json; charset=UTF-8
2021-01-13 12:49:45.167 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" reset.
2021-01-13 12:49:45.167 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" disconnecting.
2021-01-13 12:49:45.169 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" sending FIN.
2021-01-13 12:49:45.264 +08:00 [DBG] Connection id "0HM5NFPNNVBO7" stopped.
2021-01-13 12:51:14.637 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" received FIN.
2021-01-13 12:51:14.638 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" disconnecting.
2021-01-13 12:51:14.639 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" sending FIN.
2021-01-13 12:51:14.643 +08:00 [DBG] Connection id "0HM5NFPNNVBO8" stopped.
2021-01-13 12:51:46.537 +08:00 [DBG] Connection id "0HM5NFPNNVBO4" received FIN.
2021-01-13 12:51:46.539 +08:00 [DBG] Connection id "0HM5NFPNNVBO4" disconnecting.
2021-01-13 12:51:46.539 +08:00 [DBG] Connection id "0HM5NFPNNVBO4" sending FIN.
2021-01-13 12:51:46.540 +08:00 [DBG] Connection id "0HM5NFPNNVBO4" stopped.
2021-01-13 13:14:25.181 +08:00 [DBG] Hosting starting
2021-01-13 13:14:25.439 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 13:14:25.462 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 13:14:25.490 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 13:14:25.525 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 13:14:25.628 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 13:14:25.629 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 13:14:25.630 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 13:14:25.631 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 13:14:25.634 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 13:14:25.638 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 13:14:25.641 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 13:14:25.675 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 13:14:25.688 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 13:14:25.689 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 13:14:25.690 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 13:14:25.690 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 13:14:25.691 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 13:14:25.691 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 13:14:25.704 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 13:14:25.747 +08:00 [DBG] Hosting started
2021-01-13 13:14:25.747 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 13:14:25.995 +08:00 [DBG] Connection id "0HM5NG8CA239S" started.
2021-01-13 13:14:25.995 +08:00 [DBG] Connection id "0HM5NG8CA239T" started.
2021-01-13 13:14:26.024 +08:00 [DBG] Connection id "0HM5NG8CA239S" received FIN.
2021-01-13 13:14:26.024 +08:00 [DBG] Connection id "0HM5NG8CA239T" received FIN.
2021-01-13 13:14:26.035 +08:00 [DBG] Connection id "0HM5NG8CA239T" disconnecting.
2021-01-13 13:14:26.037 +08:00 [DBG] Connection id "0HM5NG8CA239S" disconnecting.
2021-01-13 13:14:26.041 +08:00 [DBG] Connection id "0HM5NG8CA239T" sending FIN.
2021-01-13 13:14:26.042 +08:00 [DBG] Connection id "0HM5NG8CA239S" sending FIN.
2021-01-13 13:14:26.046 +08:00 [DBG] Connection id "0HM5NG8CA239S" stopped.
2021-01-13 13:14:26.046 +08:00 [DBG] Connection id "0HM5NG8CA239T" stopped.
2021-01-13 13:14:26.811 +08:00 [DBG] Connection id "0HM5NG8CA239U" started.
2021-01-13 13:14:26.851 +08:00 [DBG] Connection id "0HM5NG8CA239V" started.
2021-01-13 13:14:27.013 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 13:14:27.018 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 13:14:27.053 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 13:14:27.054 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 13:14:27.055 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 13:14:27.055 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 13:14:27.056 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 13:14:27.056 +08:00 [DBG] Error Url: /home/error
2021-01-13 13:14:27.056 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 13:14:27.065 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:27.083 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:27.103 +08:00 [DBG] Connection id "0HM5NG8CA239V" completed keep alive response.
2021-01-13 13:14:27.109 +08:00 [INF] Request finished in 96.2821ms 404 
2021-01-13 13:14:30.071 +08:00 [DBG] Connection id "0HM5NG8CA23A0" started.
2021-01-13 13:14:30.072 +08:00 [DBG] Connection id "0HM5NG8CA23A0" received FIN.
2021-01-13 13:14:30.073 +08:00 [DBG] Connection id "0HM5NG8CA23A0" disconnecting.
2021-01-13 13:14:30.073 +08:00 [DBG] Connection id "0HM5NG8CA23A1" started.
2021-01-13 13:14:30.074 +08:00 [DBG] Connection id "0HM5NG8CA23A0" sending FIN.
2021-01-13 13:14:30.076 +08:00 [DBG] Connection id "0HM5NG8CA23A0" stopped.
2021-01-13 13:14:30.079 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:30.083 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000001": started reading request body.
2021-01-13 13:14:30.091 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000001": done reading request body.
2021-01-13 13:14:30.092 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:30.093 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:30.109 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:30.120 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:30.121 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:30.129 +08:00 [DBG] Start token request.
2021-01-13 13:14:30.135 +08:00 [DBG] Start client validation
2021-01-13 13:14:30.139 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:30.142 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:30.149 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:30.149 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:30.160 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:30.168 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:30.168 +08:00 [DBG] Client validation success
2021-01-13 13:14:30.178 +08:00 [DBG] Start token request validation
2021-01-13 13:14:30.185 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:30.212 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:30.224 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:30.252 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:30.345 +08:00 [DBG] Token request success.
2021-01-13 13:14:30.357 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:30.358 +08:00 [INF] Request finished in 278.8515ms 200 application/json; charset=UTF-8
2021-01-13 13:14:33.453 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:33.455 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000002": started reading request body.
2021-01-13 13:14:33.456 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000002": done reading request body.
2021-01-13 13:14:33.457 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:33.457 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:33.458 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:33.459 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:33.460 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:33.461 +08:00 [DBG] Start token request.
2021-01-13 13:14:33.463 +08:00 [DBG] Start client validation
2021-01-13 13:14:33.464 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:33.465 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:33.465 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:33.466 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:33.466 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:33.467 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:33.469 +08:00 [DBG] Client validation success
2021-01-13 13:14:33.470 +08:00 [DBG] Start token request validation
2021-01-13 13:14:33.470 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:33.470 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:33.471 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:33.473 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:33.476 +08:00 [DBG] Token request success.
2021-01-13 13:14:33.476 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:33.477 +08:00 [INF] Request finished in 23.6794ms 200 application/json; charset=UTF-8
2021-01-13 13:14:34.369 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:34.371 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000003": started reading request body.
2021-01-13 13:14:34.372 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000003": done reading request body.
2021-01-13 13:14:34.373 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:34.374 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:34.381 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:34.391 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:34.405 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:34.410 +08:00 [DBG] Start token request.
2021-01-13 13:14:34.411 +08:00 [DBG] Start client validation
2021-01-13 13:14:34.411 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:34.411 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:34.412 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:34.412 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:34.413 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:34.417 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:34.417 +08:00 [DBG] Client validation success
2021-01-13 13:14:34.418 +08:00 [DBG] Start token request validation
2021-01-13 13:14:34.418 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:34.418 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:34.419 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:34.421 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:34.424 +08:00 [DBG] Token request success.
2021-01-13 13:14:34.424 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:34.425 +08:00 [INF] Request finished in 56.4493ms 200 application/json; charset=UTF-8
2021-01-13 13:14:34.958 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:34.959 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000004": started reading request body.
2021-01-13 13:14:34.960 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000004": done reading request body.
2021-01-13 13:14:34.961 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:34.962 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:34.963 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:34.963 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:34.964 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:34.964 +08:00 [DBG] Start token request.
2021-01-13 13:14:34.965 +08:00 [DBG] Start client validation
2021-01-13 13:14:34.965 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:34.965 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:34.966 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:34.966 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:34.967 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:34.967 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:34.968 +08:00 [DBG] Client validation success
2021-01-13 13:14:34.969 +08:00 [DBG] Start token request validation
2021-01-13 13:14:34.971 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:34.971 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:34.971 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:34.973 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:34.977 +08:00 [DBG] Token request success.
2021-01-13 13:14:34.977 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:34.978 +08:00 [INF] Request finished in 20.0098ms 200 application/json; charset=UTF-8
2021-01-13 13:14:35.369 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:35.371 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000005": started reading request body.
2021-01-13 13:14:35.372 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000005": done reading request body.
2021-01-13 13:14:35.373 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:35.373 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:35.374 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:35.375 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:35.375 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:35.376 +08:00 [DBG] Start token request.
2021-01-13 13:14:35.376 +08:00 [DBG] Start client validation
2021-01-13 13:14:35.376 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:35.377 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:35.377 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:35.378 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:35.378 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:35.379 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:35.379 +08:00 [DBG] Client validation success
2021-01-13 13:14:35.380 +08:00 [DBG] Start token request validation
2021-01-13 13:14:35.380 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:35.380 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:35.382 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:35.385 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:35.389 +08:00 [DBG] Token request success.
2021-01-13 13:14:35.389 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:35.390 +08:00 [INF] Request finished in 20.7712ms 200 application/json; charset=UTF-8
2021-01-13 13:14:35.732 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:35.734 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000006": started reading request body.
2021-01-13 13:14:35.735 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000006": done reading request body.
2021-01-13 13:14:35.736 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:35.737 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:35.738 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:35.740 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:35.741 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:35.742 +08:00 [DBG] Start token request.
2021-01-13 13:14:35.742 +08:00 [DBG] Start client validation
2021-01-13 13:14:35.742 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:35.743 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:35.743 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:35.744 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:35.744 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:35.745 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:35.745 +08:00 [DBG] Client validation success
2021-01-13 13:14:35.746 +08:00 [DBG] Start token request validation
2021-01-13 13:14:35.747 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:35.748 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:35.748 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:35.750 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:35.754 +08:00 [DBG] Token request success.
2021-01-13 13:14:35.754 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:35.758 +08:00 [INF] Request finished in 25.8481ms 200 application/json; charset=UTF-8
2021-01-13 13:14:36.120 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:36.122 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000007": started reading request body.
2021-01-13 13:14:36.123 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000007": done reading request body.
2021-01-13 13:14:36.124 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.124 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.125 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:36.126 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:36.126 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:36.127 +08:00 [DBG] Start token request.
2021-01-13 13:14:36.127 +08:00 [DBG] Start client validation
2021-01-13 13:14:36.128 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:36.128 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:36.128 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:36.129 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:36.129 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:36.130 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:36.130 +08:00 [DBG] Client validation success
2021-01-13 13:14:36.130 +08:00 [DBG] Start token request validation
2021-01-13 13:14:36.131 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:36.132 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:36.134 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:36.136 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:36.140 +08:00 [DBG] Token request success.
2021-01-13 13:14:36.140 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:36.141 +08:00 [INF] Request finished in 20.7438ms 200 application/json; charset=UTF-8
2021-01-13 13:14:36.458 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:36.460 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000008": started reading request body.
2021-01-13 13:14:36.463 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000008": done reading request body.
2021-01-13 13:14:36.464 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.465 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.466 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:36.467 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:36.467 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:36.468 +08:00 [DBG] Start token request.
2021-01-13 13:14:36.468 +08:00 [DBG] Start client validation
2021-01-13 13:14:36.468 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:36.469 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:36.469 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:36.469 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:36.470 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:36.470 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:36.471 +08:00 [DBG] Client validation success
2021-01-13 13:14:36.471 +08:00 [DBG] Start token request validation
2021-01-13 13:14:36.471 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:36.472 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:36.472 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:36.474 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:36.477 +08:00 [DBG] Token request success.
2021-01-13 13:14:36.478 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:36.478 +08:00 [INF] Request finished in 20.1493ms 200 application/json; charset=UTF-8
2021-01-13 13:14:36.797 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:36.799 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000009": started reading request body.
2021-01-13 13:14:36.799 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000009": done reading request body.
2021-01-13 13:14:36.800 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.801 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:36.802 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:36.802 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:36.803 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:36.804 +08:00 [DBG] Start token request.
2021-01-13 13:14:36.804 +08:00 [DBG] Start client validation
2021-01-13 13:14:36.804 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:36.805 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:36.805 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:36.805 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:36.806 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:36.807 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:36.807 +08:00 [DBG] Client validation success
2021-01-13 13:14:36.807 +08:00 [DBG] Start token request validation
2021-01-13 13:14:36.808 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:36.808 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:36.808 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:36.810 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:36.814 +08:00 [DBG] Token request success.
2021-01-13 13:14:36.814 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:36.815 +08:00 [INF] Request finished in 17.9643ms 200 application/json; charset=UTF-8
2021-01-13 13:14:38.479 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:14:38.481 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000A": started reading request body.
2021-01-13 13:14:38.481 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000A": done reading request body.
2021-01-13 13:14:38.482 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:38.483 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:14:38.485 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:14:38.512 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:14:38.533 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:14:38.534 +08:00 [DBG] Start token request.
2021-01-13 13:14:38.534 +08:00 [DBG] Start client validation
2021-01-13 13:14:38.536 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:14:38.536 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:14:38.536 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:14:38.537 +08:00 [DBG] Secret id found: client
2021-01-13 13:14:38.537 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:14:38.538 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:14:38.538 +08:00 [DBG] Client validation success
2021-01-13 13:14:38.538 +08:00 [DBG] Start token request validation
2021-01-13 13:14:38.539 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:14:38.539 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:14:38.539 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:14:38.554 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:14:38.558 +08:00 [DBG] Token request success.
2021-01-13 13:14:38.559 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:14:38.561 +08:00 [INF] Request finished in 81.9017ms 200 application/json; charset=UTF-8
2021-01-13 13:21:00.047 +08:00 [DBG] Connection id "0HM5NG8CA239U" received FIN.
2021-01-13 13:21:00.047 +08:00 [DBG] Connection id "0HM5NG8CA239V" received FIN.
2021-01-13 13:21:00.055 +08:00 [DBG] Connection id "0HM5NG8CA239V" disconnecting.
2021-01-13 13:21:00.055 +08:00 [DBG] Connection id "0HM5NG8CA239U" disconnecting.
2021-01-13 13:21:00.055 +08:00 [DBG] Connection id "0HM5NG8CA239V" sending FIN.
2021-01-13 13:21:00.055 +08:00 [DBG] Connection id "0HM5NG8CA239U" sending FIN.
2021-01-13 13:21:00.056 +08:00 [DBG] Connection id "0HM5NG8CA239V" stopped.
2021-01-13 13:21:00.057 +08:00 [DBG] Connection id "0HM5NG8CA239U" stopped.
2021-01-13 13:47:15.571 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:15.574 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000B": started reading request body.
2021-01-13 13:47:15.575 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000B": done reading request body.
2021-01-13 13:47:15.576 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:15.577 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:15.578 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:15.579 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:15.579 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:15.580 +08:00 [DBG] Start token request.
2021-01-13 13:47:15.581 +08:00 [DBG] Start client validation
2021-01-13 13:47:15.582 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:15.582 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:15.583 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:15.583 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:15.583 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:15.584 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:15.585 +08:00 [DBG] Client validation success
2021-01-13 13:47:15.585 +08:00 [DBG] Start token request validation
2021-01-13 13:47:15.585 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:15.586 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:15.586 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:15.591 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:15.595 +08:00 [DBG] Token request success.
2021-01-13 13:47:15.595 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:15.598 +08:00 [INF] Request finished in 26.4194ms 200 application/json; charset=UTF-8
2021-01-13 13:47:17.236 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:17.242 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000C": started reading request body.
2021-01-13 13:47:17.243 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000C": done reading request body.
2021-01-13 13:47:17.244 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.244 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.245 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:17.245 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:17.246 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:17.247 +08:00 [DBG] Start token request.
2021-01-13 13:47:17.247 +08:00 [DBG] Start client validation
2021-01-13 13:47:17.247 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:17.248 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:17.248 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:17.248 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:17.249 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:17.249 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:17.250 +08:00 [DBG] Client validation success
2021-01-13 13:47:17.250 +08:00 [DBG] Start token request validation
2021-01-13 13:47:17.250 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:17.251 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:17.251 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:17.258 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:17.261 +08:00 [DBG] Token request success.
2021-01-13 13:47:17.261 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:17.262 +08:00 [INF] Request finished in 26.6467ms 200 application/json; charset=UTF-8
2021-01-13 13:47:17.603 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:17.605 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000D": started reading request body.
2021-01-13 13:47:17.607 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000D": done reading request body.
2021-01-13 13:47:17.608 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.608 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.609 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:17.610 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:17.611 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:17.611 +08:00 [DBG] Start token request.
2021-01-13 13:47:17.612 +08:00 [DBG] Start client validation
2021-01-13 13:47:17.612 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:17.612 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:17.613 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:17.613 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:17.613 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:17.614 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:17.614 +08:00 [DBG] Client validation success
2021-01-13 13:47:17.615 +08:00 [DBG] Start token request validation
2021-01-13 13:47:17.615 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:17.615 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:17.616 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:17.624 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:17.628 +08:00 [DBG] Token request success.
2021-01-13 13:47:17.628 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:17.629 +08:00 [INF] Request finished in 26.4891ms 200 application/json; charset=UTF-8
2021-01-13 13:47:17.947 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:17.948 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000E": started reading request body.
2021-01-13 13:47:17.949 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000E": done reading request body.
2021-01-13 13:47:17.951 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.951 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:17.952 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:17.953 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:17.953 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:17.954 +08:00 [DBG] Start token request.
2021-01-13 13:47:17.954 +08:00 [DBG] Start client validation
2021-01-13 13:47:17.955 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:17.955 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:17.956 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:17.956 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:17.956 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:17.957 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:17.958 +08:00 [DBG] Client validation success
2021-01-13 13:47:17.958 +08:00 [DBG] Start token request validation
2021-01-13 13:47:17.958 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:17.959 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:17.962 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:17.965 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:17.968 +08:00 [DBG] Token request success.
2021-01-13 13:47:17.968 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:17.969 +08:00 [INF] Request finished in 22.3089ms 200 application/json; charset=UTF-8
2021-01-13 13:47:18.276 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:18.277 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000F": started reading request body.
2021-01-13 13:47:18.278 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000000F": done reading request body.
2021-01-13 13:47:18.279 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.280 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.281 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:18.281 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:18.282 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:18.283 +08:00 [DBG] Start token request.
2021-01-13 13:47:18.283 +08:00 [DBG] Start client validation
2021-01-13 13:47:18.284 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:18.284 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:18.284 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:18.284 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:18.285 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:18.285 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:18.286 +08:00 [DBG] Client validation success
2021-01-13 13:47:18.286 +08:00 [DBG] Start token request validation
2021-01-13 13:47:18.287 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:18.287 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:18.287 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:18.292 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:18.296 +08:00 [DBG] Token request success.
2021-01-13 13:47:18.296 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:18.297 +08:00 [INF] Request finished in 20.6507ms 200 application/json; charset=UTF-8
2021-01-13 13:47:18.596 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:18.597 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000010": started reading request body.
2021-01-13 13:47:18.598 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000010": done reading request body.
2021-01-13 13:47:18.599 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.600 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.601 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:18.601 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:18.602 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:18.603 +08:00 [DBG] Start token request.
2021-01-13 13:47:18.604 +08:00 [DBG] Start client validation
2021-01-13 13:47:18.604 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:18.604 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:18.605 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:18.605 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:18.606 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:18.606 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:18.606 +08:00 [DBG] Client validation success
2021-01-13 13:47:18.607 +08:00 [DBG] Start token request validation
2021-01-13 13:47:18.607 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:18.608 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:18.608 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:18.610 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:18.613 +08:00 [DBG] Token request success.
2021-01-13 13:47:18.614 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:18.615 +08:00 [INF] Request finished in 18.6659ms 200 application/json; charset=UTF-8
2021-01-13 13:47:18.921 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:18.923 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000011": started reading request body.
2021-01-13 13:47:18.924 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000011": done reading request body.
2021-01-13 13:47:18.927 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.927 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:18.928 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:18.929 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:18.929 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:18.930 +08:00 [DBG] Start token request.
2021-01-13 13:47:18.930 +08:00 [DBG] Start client validation
2021-01-13 13:47:18.931 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:18.931 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:18.931 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:18.932 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:18.932 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:18.933 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:18.933 +08:00 [DBG] Client validation success
2021-01-13 13:47:18.934 +08:00 [DBG] Start token request validation
2021-01-13 13:47:18.934 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:18.934 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:18.935 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:18.941 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:18.945 +08:00 [DBG] Token request success.
2021-01-13 13:47:18.945 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:18.946 +08:00 [INF] Request finished in 24.9997ms 200 application/json; charset=UTF-8
2021-01-13 13:47:19.223 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:19.225 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000012": started reading request body.
2021-01-13 13:47:19.226 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000012": done reading request body.
2021-01-13 13:47:19.232 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.233 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.234 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:19.237 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:19.237 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:19.238 +08:00 [DBG] Start token request.
2021-01-13 13:47:19.238 +08:00 [DBG] Start client validation
2021-01-13 13:47:19.239 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:19.240 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:19.241 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:19.241 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:19.241 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:19.242 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:19.243 +08:00 [DBG] Client validation success
2021-01-13 13:47:19.243 +08:00 [DBG] Start token request validation
2021-01-13 13:47:19.244 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:19.244 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:19.244 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:19.248 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:19.251 +08:00 [DBG] Token request success.
2021-01-13 13:47:19.253 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:19.254 +08:00 [INF] Request finished in 30.8923ms 200 application/json; charset=UTF-8
2021-01-13 13:47:19.608 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:19.610 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000013": started reading request body.
2021-01-13 13:47:19.611 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000013": done reading request body.
2021-01-13 13:47:19.613 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.614 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.615 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:19.616 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:19.617 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:19.617 +08:00 [DBG] Start token request.
2021-01-13 13:47:19.618 +08:00 [DBG] Start client validation
2021-01-13 13:47:19.618 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:19.619 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:19.619 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:19.620 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:19.621 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:19.621 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:19.622 +08:00 [DBG] Client validation success
2021-01-13 13:47:19.623 +08:00 [DBG] Start token request validation
2021-01-13 13:47:19.624 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:19.625 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:19.625 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:19.627 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:19.632 +08:00 [DBG] Token request success.
2021-01-13 13:47:19.633 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:19.637 +08:00 [INF] Request finished in 29.5791ms 200 application/json; charset=UTF-8
2021-01-13 13:47:19.894 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:19.895 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000014": started reading request body.
2021-01-13 13:47:19.896 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000014": done reading request body.
2021-01-13 13:47:19.897 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.897 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:19.898 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:19.899 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:19.899 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:19.900 +08:00 [DBG] Start token request.
2021-01-13 13:47:19.900 +08:00 [DBG] Start client validation
2021-01-13 13:47:19.901 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:19.901 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:19.902 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:19.902 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:19.902 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:19.903 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:19.904 +08:00 [DBG] Client validation success
2021-01-13 13:47:19.904 +08:00 [DBG] Start token request validation
2021-01-13 13:47:19.904 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:19.905 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:19.905 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:19.907 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:19.912 +08:00 [DBG] Token request success.
2021-01-13 13:47:19.912 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:19.913 +08:00 [INF] Request finished in 19.2319ms 200 application/json; charset=UTF-8
2021-01-13 13:47:20.276 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:20.298 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000015": started reading request body.
2021-01-13 13:47:20.298 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000015": done reading request body.
2021-01-13 13:47:20.299 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:20.300 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:20.301 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:20.302 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:20.302 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:20.303 +08:00 [DBG] Start token request.
2021-01-13 13:47:20.303 +08:00 [DBG] Start client validation
2021-01-13 13:47:20.304 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:20.304 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:20.304 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:20.305 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:20.306 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:20.306 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:20.307 +08:00 [DBG] Client validation success
2021-01-13 13:47:20.307 +08:00 [DBG] Start token request validation
2021-01-13 13:47:20.307 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:20.308 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:20.308 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:20.310 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:20.327 +08:00 [DBG] Token request success.
2021-01-13 13:47:20.331 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:20.332 +08:00 [INF] Request finished in 56.0899ms 200 application/json; charset=UTF-8
2021-01-13 13:47:20.996 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:20.998 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000016": started reading request body.
2021-01-13 13:47:20.998 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000016": done reading request body.
2021-01-13 13:47:20.999 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:21.000 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:21.001 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:21.001 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:21.002 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:21.003 +08:00 [DBG] Start token request.
2021-01-13 13:47:21.003 +08:00 [DBG] Start client validation
2021-01-13 13:47:21.003 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:21.004 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:21.004 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:21.004 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:21.005 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:21.006 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:21.006 +08:00 [DBG] Client validation success
2021-01-13 13:47:21.007 +08:00 [DBG] Start token request validation
2021-01-13 13:47:21.007 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:21.007 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:21.008 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:21.010 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:21.014 +08:00 [DBG] Token request success.
2021-01-13 13:47:21.014 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:21.015 +08:00 [INF] Request finished in 18.5532ms 200 application/json; charset=UTF-8
2021-01-13 13:47:21.866 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:21.867 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000017": started reading request body.
2021-01-13 13:47:21.868 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000017": done reading request body.
2021-01-13 13:47:21.869 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:21.869 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:21.870 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:21.871 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:21.871 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:21.872 +08:00 [DBG] Start token request.
2021-01-13 13:47:21.872 +08:00 [DBG] Start client validation
2021-01-13 13:47:21.873 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:21.874 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:21.874 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:21.875 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:21.875 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:21.876 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:21.876 +08:00 [DBG] Client validation success
2021-01-13 13:47:21.876 +08:00 [DBG] Start token request validation
2021-01-13 13:47:21.877 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:21.877 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:21.877 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:21.879 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:21.883 +08:00 [DBG] Token request success.
2021-01-13 13:47:21.883 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:21.884 +08:00 [INF] Request finished in 18.0769ms 200 application/json; charset=UTF-8
2021-01-13 13:47:22.101 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:22.103 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000018": started reading request body.
2021-01-13 13:47:22.103 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000018": done reading request body.
2021-01-13 13:47:22.104 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:22.105 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:22.106 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:22.107 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:22.108 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:22.109 +08:00 [DBG] Start token request.
2021-01-13 13:47:22.109 +08:00 [DBG] Start client validation
2021-01-13 13:47:22.109 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:22.110 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:22.110 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:22.110 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:22.111 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:22.111 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:22.112 +08:00 [DBG] Client validation success
2021-01-13 13:47:22.112 +08:00 [DBG] Start token request validation
2021-01-13 13:47:22.112 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:22.113 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:22.113 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:22.115 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:22.118 +08:00 [DBG] Token request success.
2021-01-13 13:47:22.119 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:22.119 +08:00 [INF] Request finished in 17.9688ms 200 application/json; charset=UTF-8
2021-01-13 13:47:22.447 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 13:47:22.449 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000019": started reading request body.
2021-01-13 13:47:22.450 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:00000019": done reading request body.
2021-01-13 13:47:22.451 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:22.451 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 13:47:22.452 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 13:47:22.452 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 13:47:22.453 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 13:47:22.454 +08:00 [DBG] Start token request.
2021-01-13 13:47:22.454 +08:00 [DBG] Start client validation
2021-01-13 13:47:22.454 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 13:47:22.455 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 13:47:22.455 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 13:47:22.455 +08:00 [DBG] Secret id found: client
2021-01-13 13:47:22.456 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 13:47:22.457 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 13:47:22.457 +08:00 [DBG] Client validation success
2021-01-13 13:47:22.457 +08:00 [DBG] Start token request validation
2021-01-13 13:47:22.458 +08:00 [DBG] Start client credentials token request validation
2021-01-13 13:47:22.458 +08:00 [DBG] client credentials token request validation success
2021-01-13 13:47:22.459 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 13:47:22.461 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 13:47:22.464 +08:00 [DBG] Token request success.
2021-01-13 13:47:22.464 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 13:47:22.465 +08:00 [INF] Request finished in 17.7022ms 200 application/json; charset=UTF-8
2021-01-13 14:21:12.776 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:21:12.778 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000001A": started reading request body.
2021-01-13 14:21:12.779 +08:00 [DBG] Connection id "0HM5NG8CA23A1", Request id "0HM5NG8CA23A1:0000001A": done reading request body.
2021-01-13 14:21:12.780 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:21:12.780 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:21:12.781 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:21:12.782 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:21:12.782 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:21:12.783 +08:00 [DBG] Start token request.
2021-01-13 14:21:12.783 +08:00 [DBG] Start client validation
2021-01-13 14:21:12.784 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:21:12.784 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 14:21:12.785 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 14:21:12.785 +08:00 [DBG] Secret id found: client
2021-01-13 14:21:12.785 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:21:12.786 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:21:12.786 +08:00 [DBG] Client validation success
2021-01-13 14:21:12.787 +08:00 [DBG] Start token request validation
2021-01-13 14:21:12.787 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:21:12.788 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:21:12.789 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:21:12.793 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:21:12.796 +08:00 [DBG] Token request success.
2021-01-13 14:21:12.797 +08:00 [DBG] Connection id "0HM5NG8CA23A1" completed keep alive response.
2021-01-13 14:21:12.797 +08:00 [INF] Request finished in 23.495ms 200 application/json; charset=UTF-8
2021-01-13 14:22:14.293 +08:00 [DBG] Hosting starting
2021-01-13 14:22:14.362 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:22:14.370 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:22:14.372 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:22:14.372 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:22:14.372 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:22:14.372 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:22:14.372 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:22:14.461 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:22:14.468 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:22:14.498 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:22:14.512 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:22:14.535 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:22:14.539 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:22:14.540 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:22:14.545 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:22:14.547 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:22:14.551 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:22:14.552 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:22:14.570 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:22:14.635 +08:00 [DBG] Hosting started
2021-01-13 14:22:14.636 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:22:14.674 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" received FIN.
2021-01-13 14:22:14.674 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" received FIN.
2021-01-13 14:22:14.688 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" accepted.
2021-01-13 14:22:14.688 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" accepted.
2021-01-13 14:22:14.689 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" started.
2021-01-13 14:22:14.689 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" started.
2021-01-13 14:22:14.699 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" sending FIN because: "The client closed the connection."
2021-01-13 14:22:14.699 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" sending FIN because: "The client closed the connection."
2021-01-13 14:22:14.702 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" disconnecting.
2021-01-13 14:22:14.702 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" disconnecting.
2021-01-13 14:22:14.710 +08:00 [DBG] Connection id "0HM5NHE8S5TPB" stopped.
2021-01-13 14:22:14.710 +08:00 [DBG] Connection id "0HM5NHE8S5TPC" stopped.
2021-01-13 14:22:15.487 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" accepted.
2021-01-13 14:22:15.523 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" accepted.
2021-01-13 14:22:15.523 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" started.
2021-01-13 14:22:15.535 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" started.
2021-01-13 14:22:15.643 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:22:15.646 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:22:15.684 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:22:15.684 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:22:15.686 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:22:15.686 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:22:15.686 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:22:15.687 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:22:15.687 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:22:15.692 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:22:15.699 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:22:15.718 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" completed keep alive response.
2021-01-13 14:22:15.720 +08:00 [INF] Request finished in 81.6272ms 404 
2021-01-13 14:31:48.124 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" received FIN.
2021-01-13 14:31:48.124 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" received FIN.
2021-01-13 14:31:48.145 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" sending FIN because: "The client closed the connection."
2021-01-13 14:31:48.145 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" sending FIN because: "The client closed the connection."
2021-01-13 14:31:48.146 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" disconnecting.
2021-01-13 14:31:48.147 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" disconnecting.
2021-01-13 14:31:48.151 +08:00 [DBG] Connection id "0HM5NHE8S5TPE" stopped.
2021-01-13 14:31:48.151 +08:00 [DBG] Connection id "0HM5NHE8S5TPD" stopped.
2021-01-13 14:32:02.016 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" accepted.
2021-01-13 14:32:02.016 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" started.
2021-01-13 14:32:02.032 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:32:02.034 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:02.035 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:02.086 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:32:02.119 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:32:02.120 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:32:02.123 +08:00 [DBG] Start discovery request
2021-01-13 14:32:02.211 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" completed keep alive response.
2021-01-13 14:32:02.213 +08:00 [INF] Request finished in 180.7733ms 200 application/json; charset=UTF-8
2021-01-13 14:32:02.342 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:32:02.350 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:02.353 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:02.354 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:32:02.355 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:32:02.355 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:32:02.357 +08:00 [DBG] Start key discovery request
2021-01-13 14:32:02.394 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" completed keep alive response.
2021-01-13 14:32:02.397 +08:00 [INF] Request finished in 55.4582ms 200 application/json; charset=UTF-8
2021-01-13 14:32:02.905 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" received FIN.
2021-01-13 14:32:02.907 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" sending FIN because: "The client closed the connection."
2021-01-13 14:32:02.908 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" disconnecting.
2021-01-13 14:32:02.909 +08:00 [DBG] Connection id "0HM5NHE8S5TPF" stopped.
2021-01-13 14:32:02.923 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" accepted.
2021-01-13 14:32:02.924 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" started.
2021-01-13 14:32:02.936 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:32:03.033 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 34
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:32:03.195 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" completed keep alive response.
2021-01-13 14:32:03.197 +08:00 [INF] Request finished in 260.8222ms 500 text/plain
2021-01-13 14:32:03.200 +08:00 [DBG] Connection id "0HM5NHE8S5TPG", Request id "0HM5NHE8S5TPG:00000001": started reading request body.
2021-01-13 14:32:03.201 +08:00 [DBG] Connection id "0HM5NHE8S5TPG", Request id "0HM5NHE8S5TPG:00000001": done reading request body.
2021-01-13 14:32:03.330 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" reset.
2021-01-13 14:32:03.331 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" sending FIN because: "The client closed the connection."
2021-01-13 14:32:03.349 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" disconnecting.
2021-01-13 14:32:03.373 +08:00 [DBG] Connection id "0HM5NHE8S5TPG" stopped.
2021-01-13 14:32:16.229 +08:00 [DBG] Hosting shutdown
2021-01-13 14:32:22.893 +08:00 [DBG] Hosting starting
2021-01-13 14:32:22.957 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:32:22.962 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:32:22.964 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:32:22.965 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:32:22.965 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:32:22.966 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:32:22.966 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:32:23.040 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:32:23.047 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:32:23.068 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:32:23.084 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:32:23.106 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:32:23.111 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:32:23.112 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:32:23.116 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:32:23.119 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:32:23.123 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:32:23.124 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:32:23.135 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:32:23.182 +08:00 [DBG] Hosting started
2021-01-13 14:32:23.182 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:32:23.456 +08:00 [DBG] Connection id "0HM5NHJU9VL62" received FIN.
2021-01-13 14:32:23.461 +08:00 [DBG] Connection id "0HM5NHJU9VL61" received FIN.
2021-01-13 14:32:23.462 +08:00 [DBG] Connection id "0HM5NHJU9VL62" accepted.
2021-01-13 14:32:23.462 +08:00 [DBG] Connection id "0HM5NHJU9VL63" accepted.
2021-01-13 14:32:23.464 +08:00 [DBG] Connection id "0HM5NHJU9VL61" started.
2021-01-13 14:32:23.464 +08:00 [DBG] Connection id "0HM5NHJU9VL62" started.
2021-01-13 14:32:23.471 +08:00 [DBG] Connection id "0HM5NHJU9VL62" sending FIN because: "The client closed the connection."
2021-01-13 14:32:23.471 +08:00 [DBG] Connection id "0HM5NHJU9VL61" sending FIN because: "The client closed the connection."
2021-01-13 14:32:23.473 +08:00 [DBG] Connection id "0HM5NHJU9VL62" disconnecting.
2021-01-13 14:32:23.473 +08:00 [DBG] Connection id "0HM5NHJU9VL61" disconnecting.
2021-01-13 14:32:23.477 +08:00 [DBG] Connection id "0HM5NHJU9VL61" stopped.
2021-01-13 14:32:23.477 +08:00 [DBG] Connection id "0HM5NHJU9VL62" stopped.
2021-01-13 14:32:24.481 +08:00 [DBG] Connection id "0HM5NHJU9VL64" accepted.
2021-01-13 14:32:24.523 +08:00 [DBG] Connection id "0HM5NHJU9VL65" accepted.
2021-01-13 14:32:24.532 +08:00 [DBG] Connection id "0HM5NHJU9VL64" started.
2021-01-13 14:32:24.541 +08:00 [DBG] Connection id "0HM5NHJU9VL65" started.
2021-01-13 14:32:24.636 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:32:24.641 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:32:24.671 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:32:24.672 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:32:24.672 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:32:24.673 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:32:24.673 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:32:24.673 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:32:24.674 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:32:24.681 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:24.689 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:24.708 +08:00 [DBG] Connection id "0HM5NHJU9VL65" completed keep alive response.
2021-01-13 14:32:24.724 +08:00 [INF] Request finished in 91.0689ms 404 
2021-01-13 14:32:34.157 +08:00 [DBG] Connection id "0HM5NHJU9VL66" accepted.
2021-01-13 14:32:34.177 +08:00 [DBG] Connection id "0HM5NHJU9VL66" started.
2021-01-13 14:32:34.224 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:32:34.261 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:34.271 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:34.321 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:32:34.326 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:32:34.327 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:32:34.336 +08:00 [DBG] Start discovery request
2021-01-13 14:32:34.414 +08:00 [DBG] Connection id "0HM5NHJU9VL66" completed keep alive response.
2021-01-13 14:32:34.416 +08:00 [INF] Request finished in 192.2581ms 200 application/json; charset=UTF-8
2021-01-13 14:32:34.501 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:32:34.506 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:34.507 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:34.508 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:32:34.509 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:32:34.510 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:32:34.512 +08:00 [DBG] Start key discovery request
2021-01-13 14:32:34.533 +08:00 [DBG] Connection id "0HM5NHJU9VL66" completed keep alive response.
2021-01-13 14:32:34.534 +08:00 [INF] Request finished in 32.8678ms 200 application/json; charset=UTF-8
2021-01-13 14:32:34.764 +08:00 [DBG] Connection id "0HM5NHJU9VL66" received FIN.
2021-01-13 14:32:34.772 +08:00 [DBG] Connection id "0HM5NHJU9VL66" sending FIN because: "The client closed the connection."
2021-01-13 14:32:34.774 +08:00 [DBG] Connection id "0HM5NHJU9VL66" disconnecting.
2021-01-13 14:32:34.777 +08:00 [DBG] Connection id "0HM5NHJU9VL66" stopped.
2021-01-13 14:32:34.788 +08:00 [DBG] Connection id "0HM5NHJU9VL67" accepted.
2021-01-13 14:32:34.789 +08:00 [DBG] Connection id "0HM5NHJU9VL67" started.
2021-01-13 14:32:34.797 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:32:34.870 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 34
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:32:34.936 +08:00 [DBG] Connection id "0HM5NHJU9VL67" completed keep alive response.
2021-01-13 14:32:34.937 +08:00 [INF] Request finished in 140.1378ms 500 text/plain
2021-01-13 14:32:34.938 +08:00 [DBG] Connection id "0HM5NHJU9VL67", Request id "0HM5NHJU9VL67:00000001": started reading request body.
2021-01-13 14:32:34.939 +08:00 [DBG] Connection id "0HM5NHJU9VL67", Request id "0HM5NHJU9VL67:00000001": done reading request body.
2021-01-13 14:32:35.039 +08:00 [DBG] Connection id "0HM5NHJU9VL67" reset.
2021-01-13 14:32:35.047 +08:00 [DBG] Connection id "0HM5NHJU9VL67" sending FIN because: "The client closed the connection."
2021-01-13 14:32:35.069 +08:00 [DBG] Connection id "0HM5NHJU9VL67" disconnecting.
2021-01-13 14:32:35.199 +08:00 [DBG] Connection id "0HM5NHJU9VL67" stopped.
2021-01-13 14:32:48.369 +08:00 [DBG] Connection id "0HM5NHJU9VL68" accepted.
2021-01-13 14:32:48.372 +08:00 [DBG] Connection id "0HM5NHJU9VL68" started.
2021-01-13 14:32:48.406 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:32:48.411 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:48.413 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:48.414 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:32:48.414 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:32:48.415 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:32:48.416 +08:00 [DBG] Start discovery request
2021-01-13 14:32:48.418 +08:00 [DBG] Connection id "0HM5NHJU9VL68" completed keep alive response.
2021-01-13 14:32:48.419 +08:00 [INF] Request finished in 13.3727ms 200 application/json; charset=UTF-8
2021-01-13 14:32:48.501 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:32:48.503 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:48.503 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:32:48.504 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:32:48.505 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:32:48.505 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:32:48.506 +08:00 [DBG] Start key discovery request
2021-01-13 14:32:48.506 +08:00 [DBG] Connection id "0HM5NHJU9VL68" completed keep alive response.
2021-01-13 14:32:48.507 +08:00 [INF] Request finished in 6.045ms 200 application/json; charset=UTF-8
2021-01-13 14:32:48.721 +08:00 [DBG] Connection id "0HM5NHJU9VL68" received FIN.
2021-01-13 14:32:48.724 +08:00 [DBG] Connection id "0HM5NHJU9VL68" disconnecting.
2021-01-13 14:32:48.724 +08:00 [DBG] Connection id "0HM5NHJU9VL68" sending FIN because: "The client closed the connection."
2021-01-13 14:32:48.731 +08:00 [DBG] Connection id "0HM5NHJU9VL68" stopped.
2021-01-13 14:33:10.249 +08:00 [DBG] Connection id "0HM5NHJU9VL69" accepted.
2021-01-13 14:33:10.250 +08:00 [DBG] Connection id "0HM5NHJU9VL69" started.
2021-01-13 14:33:10.331 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:33:10.378 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 34
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:33:10.381 +08:00 [DBG] Connection id "0HM5NHJU9VL69" completed keep alive response.
2021-01-13 14:33:10.385 +08:00 [INF] Request finished in 54.0875ms 500 text/plain
2021-01-13 14:33:10.385 +08:00 [DBG] Connection id "0HM5NHJU9VL69", Request id "0HM5NHJU9VL69:00000001": started reading request body.
2021-01-13 14:33:10.386 +08:00 [DBG] Connection id "0HM5NHJU9VL69", Request id "0HM5NHJU9VL69:00000001": done reading request body.
2021-01-13 14:33:52.023 +08:00 [DBG] Connection id "0HM5NHJU9VL69" reset.
2021-01-13 14:33:52.088 +08:00 [DBG] Connection id "0HM5NHJU9VL69" sending FIN because: "The client closed the connection."
2021-01-13 14:33:52.128 +08:00 [DBG] Connection id "0HM5NHJU9VL69" disconnecting.
2021-01-13 14:33:52.131 +08:00 [DBG] Connection id "0HM5NHJU9VL69" stopped.
2021-01-13 14:33:58.587 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" accepted.
2021-01-13 14:33:58.588 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" started.
2021-01-13 14:33:58.610 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:33:58.611 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:33:58.612 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:33:58.613 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:33:58.616 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:33:58.618 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:33:58.620 +08:00 [DBG] Start discovery request
2021-01-13 14:33:58.624 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" completed keep alive response.
2021-01-13 14:33:58.625 +08:00 [INF] Request finished in 15.5146ms 200 application/json; charset=UTF-8
2021-01-13 14:33:58.776 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:33:58.780 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:33:58.782 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:33:58.782 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:33:58.784 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:33:58.784 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:33:58.785 +08:00 [DBG] Start key discovery request
2021-01-13 14:33:58.786 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" completed keep alive response.
2021-01-13 14:33:58.789 +08:00 [INF] Request finished in 12.4434ms 200 application/json; charset=UTF-8
2021-01-13 14:33:59.067 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" received FIN.
2021-01-13 14:33:59.069 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" disconnecting.
2021-01-13 14:33:59.070 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" sending FIN because: "The client closed the connection."
2021-01-13 14:33:59.091 +08:00 [DBG] Connection id "0HM5NHJU9VL6A" stopped.
2021-01-13 14:34:03.564 +08:00 [DBG] Connection id "0HM5NHJU9VL6B" accepted.
2021-01-13 14:34:03.565 +08:00 [DBG] Connection id "0HM5NHJU9VL6B" started.
2021-01-13 14:34:03.592 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:34:03.632 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 34
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:34:03.635 +08:00 [DBG] Connection id "0HM5NHJU9VL6B" completed keep alive response.
2021-01-13 14:34:03.636 +08:00 [INF] Request finished in 43.5212ms 500 text/plain
2021-01-13 14:34:03.636 +08:00 [DBG] Connection id "0HM5NHJU9VL6B", Request id "0HM5NHJU9VL6B:00000001": started reading request body.
2021-01-13 14:34:03.637 +08:00 [DBG] Connection id "0HM5NHJU9VL6B", Request id "0HM5NHJU9VL6B:00000001": done reading request body.
2021-01-13 14:35:13.259 +08:00 [DBG] Hosting starting
2021-01-13 14:35:13.376 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:35:13.385 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:35:13.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:35:13.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:35:13.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:35:13.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:35:13.388 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:35:13.501 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:35:13.514 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:35:13.545 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:35:13.576 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:35:13.646 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:35:13.674 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:35:13.675 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:35:13.680 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:35:13.683 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:35:13.688 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:35:13.690 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:35:13.709 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:35:13.831 +08:00 [DBG] Hosting started
2021-01-13 14:35:13.831 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:35:13.943 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" received FIN.
2021-01-13 14:35:13.943 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" received FIN.
2021-01-13 14:35:13.987 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" accepted.
2021-01-13 14:35:13.987 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" accepted.
2021-01-13 14:35:13.990 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" started.
2021-01-13 14:35:13.990 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" started.
2021-01-13 14:35:13.996 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" sending FIN because: "The client closed the connection."
2021-01-13 14:35:13.996 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" sending FIN because: "The client closed the connection."
2021-01-13 14:35:13.999 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" disconnecting.
2021-01-13 14:35:13.999 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" disconnecting.
2021-01-13 14:35:14.003 +08:00 [DBG] Connection id "0HM5NHLH3S6U2" stopped.
2021-01-13 14:35:14.003 +08:00 [DBG] Connection id "0HM5NHLH3S6U1" stopped.
2021-01-13 14:35:15.080 +08:00 [DBG] Connection id "0HM5NHLH3S6U3" accepted.
2021-01-13 14:35:15.100 +08:00 [DBG] Connection id "0HM5NHLH3S6U3" started.
2021-01-13 14:35:15.259 +08:00 [DBG] Connection id "0HM5NHLH3S6U4" accepted.
2021-01-13 14:35:15.274 +08:00 [DBG] Connection id "0HM5NHLH3S6U4" started.
2021-01-13 14:35:15.810 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:35:15.943 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:35:16.027 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:35:16.029 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:35:16.030 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:35:16.031 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:35:16.032 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:35:16.032 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:35:16.035 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:35:16.042 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:16.071 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:16.096 +08:00 [DBG] Connection id "0HM5NHLH3S6U4" completed keep alive response.
2021-01-13 14:35:16.125 +08:00 [INF] Request finished in 317.1827ms 404 
2021-01-13 14:35:19.468 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" accepted.
2021-01-13 14:35:19.470 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" started.
2021-01-13 14:35:19.526 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:35:19.540 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:19.541 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:19.571 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:35:19.579 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:35:19.583 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:35:19.599 +08:00 [DBG] Start discovery request
2021-01-13 14:35:19.678 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" completed keep alive response.
2021-01-13 14:35:19.679 +08:00 [INF] Request finished in 153.4823ms 200 application/json; charset=UTF-8
2021-01-13 14:35:19.812 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:35:19.861 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:19.915 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:35:19.949 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:35:19.958 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:35:20.005 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:35:20.034 +08:00 [DBG] Start key discovery request
2021-01-13 14:35:20.071 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" completed keep alive response.
2021-01-13 14:35:20.097 +08:00 [INF] Request finished in 284.5894ms 200 application/json; charset=UTF-8
2021-01-13 14:35:20.315 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" received FIN.
2021-01-13 14:35:20.317 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" disconnecting.
2021-01-13 14:35:20.318 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" sending FIN because: "The client closed the connection."
2021-01-13 14:35:20.319 +08:00 [DBG] Connection id "0HM5NHLH3S6U5" stopped.
2021-01-13 14:35:22.402 +08:00 [DBG] Connection id "0HM5NHLH3S6U6" accepted.
2021-01-13 14:35:22.404 +08:00 [DBG] Connection id "0HM5NHLH3S6U6" started.
2021-01-13 14:35:22.428 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:35:22.488 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 35
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:35:22.549 +08:00 [DBG] Connection id "0HM5NHLH3S6U6" completed keep alive response.
2021-01-13 14:35:22.550 +08:00 [INF] Request finished in 121.8638ms 500 text/plain
2021-01-13 14:35:22.551 +08:00 [DBG] Connection id "0HM5NHLH3S6U6", Request id "0HM5NHLH3S6U6:00000001": started reading request body.
2021-01-13 14:35:22.551 +08:00 [DBG] Connection id "0HM5NHLH3S6U6", Request id "0HM5NHLH3S6U6:00000001": done reading request body.
2021-01-13 14:35:47.753 +08:00 [DBG] Hosting starting
2021-01-13 14:36:18.727 +08:00 [DBG] Hosting starting
2021-01-13 14:36:18.908 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:36:18.914 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:36:18.915 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:36:18.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:36:18.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:36:18.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:36:18.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:36:18.984 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:36:18.991 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:36:19.012 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:36:19.033 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:36:19.055 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:36:19.058 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:36:19.060 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:36:19.064 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:36:19.067 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:36:19.071 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:36:19.072 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:36:19.083 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:36:19.126 +08:00 [DBG] Hosting started
2021-01-13 14:36:19.126 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:36:19.462 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" accepted.
2021-01-13 14:36:19.462 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" accepted.
2021-01-13 14:36:19.469 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" started.
2021-01-13 14:36:19.469 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" started.
2021-01-13 14:36:19.473 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" received FIN.
2021-01-13 14:36:19.487 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" received FIN.
2021-01-13 14:36:19.497 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" disconnecting.
2021-01-13 14:36:19.497 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" sending FIN because: "The client closed the connection."
2021-01-13 14:36:19.498 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" sending FIN because: "The client closed the connection."
2021-01-13 14:36:19.500 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" disconnecting.
2021-01-13 14:36:19.502 +08:00 [DBG] Connection id "0HM5NHM4KLKEA" stopped.
2021-01-13 14:36:19.504 +08:00 [DBG] Connection id "0HM5NHM4KLKE9" stopped.
2021-01-13 14:36:20.450 +08:00 [DBG] Connection id "0HM5NHM4KLKEB" accepted.
2021-01-13 14:36:20.477 +08:00 [DBG] Connection id "0HM5NHM4KLKEC" accepted.
2021-01-13 14:36:20.486 +08:00 [DBG] Connection id "0HM5NHM4KLKEB" started.
2021-01-13 14:36:20.508 +08:00 [DBG] Connection id "0HM5NHM4KLKEC" started.
2021-01-13 14:36:20.589 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:36:20.601 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:36:20.628 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:36:20.628 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:36:20.629 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:36:20.630 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:36:20.631 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:36:20.631 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:36:20.632 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:36:20.636 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:20.642 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:20.656 +08:00 [DBG] Connection id "0HM5NHM4KLKEC" completed keep alive response.
2021-01-13 14:36:20.658 +08:00 [INF] Request finished in 71.5695ms 404 
2021-01-13 14:36:26.502 +08:00 [DBG] Connection id "0HM5NHM4KLKED" accepted.
2021-01-13 14:36:26.504 +08:00 [DBG] Connection id "0HM5NHM4KLKED" started.
2021-01-13 14:36:26.543 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:36:26.546 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:26.553 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:26.565 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:36:26.570 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:36:26.571 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:36:26.572 +08:00 [DBG] Start discovery request
2021-01-13 14:36:26.639 +08:00 [DBG] Connection id "0HM5NHM4KLKED" completed keep alive response.
2021-01-13 14:36:26.641 +08:00 [INF] Request finished in 98.0114ms 200 application/json; charset=UTF-8
2021-01-13 14:36:26.724 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:36:26.729 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:26.731 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:36:26.732 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:36:26.733 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:36:26.734 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:36:26.736 +08:00 [DBG] Start key discovery request
2021-01-13 14:36:26.756 +08:00 [DBG] Connection id "0HM5NHM4KLKED" completed keep alive response.
2021-01-13 14:36:26.760 +08:00 [INF] Request finished in 36.3334ms 200 application/json; charset=UTF-8
2021-01-13 14:36:26.983 +08:00 [DBG] Connection id "0HM5NHM4KLKED" received FIN.
2021-01-13 14:36:26.986 +08:00 [DBG] Connection id "0HM5NHM4KLKED" sending FIN because: "The client closed the connection."
2021-01-13 14:36:26.987 +08:00 [DBG] Connection id "0HM5NHM4KLKED" disconnecting.
2021-01-13 14:36:26.989 +08:00 [DBG] Connection id "0HM5NHM4KLKED" stopped.
2021-01-13 14:36:28.526 +08:00 [DBG] Connection id "0HM5NHM4KLKEE" accepted.
2021-01-13 14:36:28.527 +08:00 [DBG] Connection id "0HM5NHM4KLKEE" started.
2021-01-13 14:36:28.552 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:36:28.611 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 35
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:36:28.672 +08:00 [DBG] Connection id "0HM5NHM4KLKEE" completed keep alive response.
2021-01-13 14:36:28.673 +08:00 [INF] Request finished in 121.2104ms 500 text/plain
2021-01-13 14:36:28.673 +08:00 [DBG] Connection id "0HM5NHM4KLKEE", Request id "0HM5NHM4KLKEE:00000001": started reading request body.
2021-01-13 14:36:28.674 +08:00 [DBG] Connection id "0HM5NHM4KLKEE", Request id "0HM5NHM4KLKEE:00000001": done reading request body.
2021-01-13 14:37:42.932 +08:00 [DBG] Hosting starting
2021-01-13 14:37:42.999 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:37:43.005 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:37:43.006 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:37:43.006 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:37:43.006 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:37:43.006 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:37:43.007 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:37:43.199 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:37:43.208 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:37:43.235 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:37:43.257 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:37:43.283 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:37:43.291 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:37:43.293 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:37:43.297 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:37:43.300 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:37:43.306 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:37:43.308 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:37:43.328 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:37:43.435 +08:00 [DBG] Hosting started
2021-01-13 14:37:43.437 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:37:43.875 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" received FIN.
2021-01-13 14:37:43.875 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" received FIN.
2021-01-13 14:37:43.890 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" accepted.
2021-01-13 14:37:43.890 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" accepted.
2021-01-13 14:37:43.893 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" started.
2021-01-13 14:37:43.893 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" started.
2021-01-13 14:37:43.900 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" sending FIN because: "The client closed the connection."
2021-01-13 14:37:43.900 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" sending FIN because: "The client closed the connection."
2021-01-13 14:37:43.904 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" disconnecting.
2021-01-13 14:37:43.904 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" disconnecting.
2021-01-13 14:37:43.911 +08:00 [DBG] Connection id "0HM5NHMTPNLE9" stopped.
2021-01-13 14:37:43.911 +08:00 [DBG] Connection id "0HM5NHMTPNLE8" stopped.
2021-01-13 14:37:44.786 +08:00 [DBG] Connection id "0HM5NHMTPNLEA" accepted.
2021-01-13 14:37:44.804 +08:00 [DBG] Connection id "0HM5NHMTPNLEB" accepted.
2021-01-13 14:37:44.811 +08:00 [DBG] Connection id "0HM5NHMTPNLEA" started.
2021-01-13 14:37:44.824 +08:00 [DBG] Connection id "0HM5NHMTPNLEB" started.
2021-01-13 14:37:44.887 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:37:44.892 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:37:44.926 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:37:44.927 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:37:44.928 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:37:44.929 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:37:44.930 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:37:44.930 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:37:44.930 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:37:44.935 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:44.946 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:44.959 +08:00 [DBG] Connection id "0HM5NHMTPNLEB" completed keep alive response.
2021-01-13 14:37:44.968 +08:00 [INF] Request finished in 84.1124ms 404 
2021-01-13 14:37:53.046 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" accepted.
2021-01-13 14:37:53.048 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" started.
2021-01-13 14:37:53.070 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:37:53.073 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:53.079 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:53.093 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:37:53.097 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:37:53.097 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:37:53.102 +08:00 [DBG] Start discovery request
2021-01-13 14:37:53.230 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" completed keep alive response.
2021-01-13 14:37:53.234 +08:00 [INF] Request finished in 164.5056ms 200 application/json; charset=UTF-8
2021-01-13 14:37:53.327 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:37:53.338 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:53.341 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:37:53.342 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:37:53.344 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:37:53.344 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:37:53.346 +08:00 [DBG] Start key discovery request
2021-01-13 14:37:53.368 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" completed keep alive response.
2021-01-13 14:37:53.369 +08:00 [INF] Request finished in 42.7926ms 200 application/json; charset=UTF-8
2021-01-13 14:37:53.718 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" received FIN.
2021-01-13 14:37:53.724 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" sending FIN because: "The client closed the connection."
2021-01-13 14:37:53.725 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" disconnecting.
2021-01-13 14:37:53.727 +08:00 [DBG] Connection id "0HM5NHMTPNLEC" stopped.
2021-01-13 14:37:56.641 +08:00 [DBG] Connection id "0HM5NHMTPNLED" accepted.
2021-01-13 14:37:56.643 +08:00 [DBG] Connection id "0HM5NHMTPNLED" started.
2021-01-13 14:37:56.669 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:37:56.728 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:37:56.794 +08:00 [DBG] Connection id "0HM5NHMTPNLED" completed keep alive response.
2021-01-13 14:37:56.795 +08:00 [INF] Request finished in 125.9111ms 500 text/plain
2021-01-13 14:37:56.796 +08:00 [DBG] Connection id "0HM5NHMTPNLED", Request id "0HM5NHMTPNLED:00000001": started reading request body.
2021-01-13 14:37:56.796 +08:00 [DBG] Connection id "0HM5NHMTPNLED", Request id "0HM5NHMTPNLED:00000001": done reading request body.
2021-01-13 14:38:04.893 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" received FIN.
2021-01-13 14:38:04.897 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" accepted.
2021-01-13 14:38:04.898 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" started.
2021-01-13 14:38:04.898 +08:00 [DBG] Connection id "0HM5NHMTPNLEF" accepted.
2021-01-13 14:38:04.899 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" sending FIN because: "The client closed the connection."
2021-01-13 14:38:04.899 +08:00 [DBG] Connection id "0HM5NHMTPNLEF" started.
2021-01-13 14:38:04.900 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" disconnecting.
2021-01-13 14:38:04.902 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:38:04.902 +08:00 [DBG] Connection id "0HM5NHMTPNLEE" stopped.
2021-01-13 14:38:04.956 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:38:04.962 +08:00 [DBG] Connection id "0HM5NHMTPNLEF" completed keep alive response.
2021-01-13 14:38:04.963 +08:00 [INF] Request finished in 61.3608ms 500 text/plain
2021-01-13 14:38:04.963 +08:00 [DBG] Connection id "0HM5NHMTPNLEF", Request id "0HM5NHMTPNLEF:00000001": started reading request body.
2021-01-13 14:38:04.966 +08:00 [DBG] Connection id "0HM5NHMTPNLEF", Request id "0HM5NHMTPNLEF:00000001": done reading request body.
2021-01-13 14:38:05.994 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:38:06.037 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:38:06.040 +08:00 [DBG] Connection id "0HM5NHMTPNLEF" completed keep alive response.
2021-01-13 14:38:06.041 +08:00 [INF] Request finished in 47.3304ms 500 text/plain
2021-01-13 14:38:06.041 +08:00 [DBG] Connection id "0HM5NHMTPNLEF", Request id "0HM5NHMTPNLEF:00000002": started reading request body.
2021-01-13 14:38:06.042 +08:00 [DBG] Connection id "0HM5NHMTPNLEF", Request id "0HM5NHMTPNLEF:00000002": done reading request body.
2021-01-13 14:38:27.224 +08:00 [DBG] Hosting starting
2021-01-13 14:38:27.310 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:38:27.319 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:38:27.320 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:38:27.320 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:38:27.320 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:38:27.321 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:38:27.321 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:38:27.378 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:38:27.394 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:38:27.408 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:38:27.426 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:38:27.451 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:38:27.454 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:38:27.456 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:38:27.460 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:38:27.463 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:38:27.467 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:38:27.469 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:38:27.539 +08:00 [DBG] Hosting started
2021-01-13 14:38:27.540 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:38:27.645 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" received FIN.
2021-01-13 14:38:27.659 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" accepted.
2021-01-13 14:38:27.661 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" started.
2021-01-13 14:38:27.676 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" sending FIN because: "The client closed the connection."
2021-01-13 14:38:27.681 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" disconnecting.
2021-01-13 14:38:27.685 +08:00 [DBG] Connection id "0HM5NHNAR5BUS" stopped.
2021-01-13 14:38:28.735 +08:00 [DBG] Connection id "0HM5NHNAR5BUT" accepted.
2021-01-13 14:38:28.803 +08:00 [DBG] Connection id "0HM5NHNAR5BUU" accepted.
2021-01-13 14:38:28.837 +08:00 [DBG] Connection id "0HM5NHNAR5BUU" started.
2021-01-13 14:38:28.837 +08:00 [DBG] Connection id "0HM5NHNAR5BUT" started.
2021-01-13 14:38:28.938 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - -
2021-01-13 14:38:28.943 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:38:28.968 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:38:28.969 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:38:28.970 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:38:28.970 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:38:28.971 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:38:28.971 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:38:28.971 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:38:28.977 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:38:28.986 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:38:29.015 +08:00 [DBG] Connection id "0HM5NHNAR5BUU" completed keep alive response.
2021-01-13 14:38:29.020 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - - - 404 0 - 83.0294ms
2021-01-13 14:38:30.942 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" received FIN.
2021-01-13 14:38:30.944 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" accepted.
2021-01-13 14:38:30.945 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" started.
2021-01-13 14:38:30.945 +08:00 [DBG] Connection id "0HM5NHNAR5BV0" accepted.
2021-01-13 14:38:30.945 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" sending FIN because: "The client closed the connection."
2021-01-13 14:38:30.945 +08:00 [DBG] Connection id "0HM5NHNAR5BV0" started.
2021-01-13 14:38:30.946 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" disconnecting.
2021-01-13 14:38:30.947 +08:00 [DBG] Connection id "0HM5NHNAR5BUV" stopped.
2021-01-13 14:38:30.947 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:38:31.043 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:38:31.128 +08:00 [DBG] Connection id "0HM5NHNAR5BV0" completed keep alive response.
2021-01-13 14:38:31.129 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 500 - text/plain 182.2127ms
2021-01-13 14:38:31.130 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000002": started reading request body.
2021-01-13 14:38:31.131 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000002": done reading request body.
2021-01-13 14:38:32.234 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:38:32.277 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:38:32.280 +08:00 [DBG] Connection id "0HM5NHNAR5BV0" completed keep alive response.
2021-01-13 14:38:32.281 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 500 - text/plain 46.7878ms
2021-01-13 14:38:32.282 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000003": started reading request body.
2021-01-13 14:38:32.283 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000003": done reading request body.
2021-01-13 14:38:33.089 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:38:33.176 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Span`1 buffer)
   at Microsoft.AspNetCore.WebUtilities.FileBufferingReadStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Stream.CopyTo(Stream destination, Int32 bufferSize)
   at System.IO.Stream.CopyTo(Stream destination)
   at IdentityServer.CorsMiddleware.Invoke(HttpContext context) in D:\WeaveMicro\微服务架构\IdentityServer\UserApi.cs:line 33
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-01-13 14:38:33.195 +08:00 [DBG] Connection id "0HM5NHNAR5BV0" completed keep alive response.
2021-01-13 14:38:33.196 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 500 - text/plain 106.8247ms
2021-01-13 14:38:33.196 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000004": started reading request body.
2021-01-13 14:38:33.197 +08:00 [DBG] Connection id "0HM5NHNAR5BV0", Request id "0HM5NHNAR5BV0:00000004": done reading request body.
2021-01-13 14:38:57.912 +08:00 [DBG] Hosting starting
2021-01-13 14:38:58.031 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 14:38:58.053 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 14:38:58.078 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 14:38:58.093 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 14:38:58.135 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:38:58.136 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 14:38:58.137 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 14:38:58.138 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 14:38:58.141 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 14:38:58.145 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 14:38:58.146 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 14:38:58.173 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 14:38:58.185 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 14:38:58.186 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 14:38:58.186 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 14:38:58.186 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 14:38:58.187 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 14:38:58.187 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 14:38:58.199 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 14:38:58.247 +08:00 [DBG] Hosting started
2021-01-13 14:38:58.252 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 14:38:58.518 +08:00 [DBG] Connection id "0HM5NHNK1E2SJ" started.
2021-01-13 14:38:58.517 +08:00 [DBG] Connection id "0HM5NHNK1E2SK" started.
2021-01-13 14:38:58.551 +08:00 [DBG] Connection id "0HM5NHNK1E2SK" received FIN.
2021-01-13 14:38:58.551 +08:00 [DBG] Connection id "0HM5NHNK1E2SJ" received FIN.
2021-01-13 14:38:58.561 +08:00 [DBG] Connection id "0HM5NHNK1E2SK" disconnecting.
2021-01-13 14:38:58.563 +08:00 [DBG] Connection id "0HM5NHNK1E2SJ" disconnecting.
2021-01-13 14:38:58.564 +08:00 [DBG] Connection id "0HM5NHNK1E2SK" sending FIN.
2021-01-13 14:38:58.571 +08:00 [DBG] Connection id "0HM5NHNK1E2SJ" sending FIN.
2021-01-13 14:38:58.571 +08:00 [DBG] Connection id "0HM5NHNK1E2SK" stopped.
2021-01-13 14:38:58.574 +08:00 [DBG] Connection id "0HM5NHNK1E2SJ" stopped.
2021-01-13 14:38:59.487 +08:00 [DBG] Connection id "0HM5NHNK1E2SL" started.
2021-01-13 14:38:59.664 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" started.
2021-01-13 14:38:59.733 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 14:38:59.739 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 14:38:59.776 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 14:38:59.777 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 14:38:59.777 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 14:38:59.778 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 14:38:59.778 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 14:38:59.778 +08:00 [DBG] Error Url: /home/error
2021-01-13 14:38:59.779 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 14:38:59.788 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:38:59.804 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:38:59.822 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" completed keep alive response.
2021-01-13 14:38:59.832 +08:00 [INF] Request finished in 100.4626ms 404 
2021-01-13 14:39:01.991 +08:00 [DBG] Connection id "0HM5NHNK1E2SN" started.
2021-01-13 14:39:01.992 +08:00 [DBG] Connection id "0HM5NHNK1E2SN" received FIN.
2021-01-13 14:39:01.994 +08:00 [DBG] Connection id "0HM5NHNK1E2SO" started.
2021-01-13 14:39:01.995 +08:00 [DBG] Connection id "0HM5NHNK1E2SN" disconnecting.
2021-01-13 14:39:01.996 +08:00 [DBG] Connection id "0HM5NHNK1E2SN" sending FIN.
2021-01-13 14:39:01.998 +08:00 [DBG] Connection id "0HM5NHNK1E2SN" stopped.
2021-01-13 14:39:01.999 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:39:02.004 +08:00 [DBG] Connection id "0HM5NHNK1E2SO", Request id "0HM5NHNK1E2SO:00000001": started reading request body.
2021-01-13 14:39:02.014 +08:00 [DBG] Connection id "0HM5NHNK1E2SO", Request id "0HM5NHNK1E2SO:00000001": done reading request body.
2021-01-13 14:39:09.033 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:09.038 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:09.050 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:39:09.060 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:39:09.061 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:39:09.069 +08:00 [DBG] Start token request.
2021-01-13 14:39:09.074 +08:00 [DBG] Start client validation
2021-01-13 14:39:09.079 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:39:09.083 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 14:39:09.084 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 14:39:09.085 +08:00 [DBG] Secret id found: client
2021-01-13 14:39:09.096 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:39:09.106 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:39:09.106 +08:00 [DBG] Client validation success
2021-01-13 14:39:09.120 +08:00 [DBG] Start token request validation
2021-01-13 14:39:09.127 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:39:09.156 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:39:09.168 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:39:09.200 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:39:09.299 +08:00 [DBG] Token request success.
2021-01-13 14:39:09.311 +08:00 [DBG] Connection id "0HM5NHNK1E2SO" completed keep alive response.
2021-01-13 14:39:09.312 +08:00 [INF] Request finished in 7313.7538ms 200 application/json; charset=UTF-8
2021-01-13 14:39:17.417 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" started.
2021-01-13 14:39:17.462 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:39:17.464 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:17.465 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:17.466 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:39:17.467 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:39:17.468 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:39:17.472 +08:00 [DBG] Start discovery request
2021-01-13 14:39:17.515 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" completed keep alive response.
2021-01-13 14:39:17.525 +08:00 [INF] Request finished in 62.666ms 200 application/json; charset=UTF-8
2021-01-13 14:39:17.623 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:39:17.624 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:17.625 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:17.626 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:39:17.627 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:39:17.627 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:39:17.635 +08:00 [DBG] Start key discovery request
2021-01-13 14:39:17.649 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" completed keep alive response.
2021-01-13 14:39:17.651 +08:00 [INF] Request finished in 28.6511ms 200 application/json; charset=UTF-8
2021-01-13 14:39:18.001 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" received FIN.
2021-01-13 14:39:18.030 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" disconnecting.
2021-01-13 14:39:18.031 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" sending FIN.
2021-01-13 14:39:18.032 +08:00 [DBG] Connection id "0HM5NHNK1E2SP" stopped.
2021-01-13 14:39:19.466 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" started.
2021-01-13 14:39:19.493 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:39:19.495 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ", Request id "0HM5NHNK1E2SQ:00000001": started reading request body.
2021-01-13 14:39:19.496 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ", Request id "0HM5NHNK1E2SQ:00000001": done reading request body.
2021-01-13 14:39:19.496 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:19.497 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:19.498 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:39:19.498 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:39:19.499 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:39:19.501 +08:00 [DBG] Start token request.
2021-01-13 14:39:19.502 +08:00 [DBG] Start client validation
2021-01-13 14:39:19.502 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:39:19.503 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:39:19.503 +08:00 [DBG] Secret id found: client
2021-01-13 14:39:19.503 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:39:19.504 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:39:19.504 +08:00 [DBG] Client validation success
2021-01-13 14:39:19.505 +08:00 [DBG] Start token request validation
2021-01-13 14:39:19.505 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:39:19.505 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:39:19.506 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:39:19.511 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:39:19.514 +08:00 [DBG] Token request success.
2021-01-13 14:39:19.514 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" completed keep alive response.
2021-01-13 14:39:19.515 +08:00 [INF] Request finished in 21.5674ms 200 application/json; charset=UTF-8
2021-01-13 14:39:34.422 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" received FIN.
2021-01-13 14:39:34.448 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" disconnecting.
2021-01-13 14:39:34.453 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" sending FIN.
2021-01-13 14:39:34.454 +08:00 [DBG] Connection id "0HM5NHNK1E2SQ" stopped.
2021-01-13 14:39:44.597 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" started.
2021-01-13 14:39:44.625 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:39:44.626 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:44.629 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:44.629 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:39:44.630 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:39:44.631 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:39:44.632 +08:00 [DBG] Start discovery request
2021-01-13 14:39:44.632 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" completed keep alive response.
2021-01-13 14:39:44.633 +08:00 [INF] Request finished in 8.1451ms 200 application/json; charset=UTF-8
2021-01-13 14:39:44.728 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:39:44.730 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:44.732 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:44.733 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:39:44.733 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:39:44.734 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:39:44.735 +08:00 [DBG] Start key discovery request
2021-01-13 14:39:44.735 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" completed keep alive response.
2021-01-13 14:39:44.736 +08:00 [INF] Request finished in 7.9257ms 200 application/json; charset=UTF-8
2021-01-13 14:39:44.966 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" received FIN.
2021-01-13 14:39:44.967 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" disconnecting.
2021-01-13 14:39:44.968 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" sending FIN.
2021-01-13 14:39:44.968 +08:00 [DBG] Connection id "0HM5NHNK1E2SR" stopped.
2021-01-13 14:39:46.629 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" started.
2021-01-13 14:39:46.636 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:39:46.637 +08:00 [DBG] Connection id "0HM5NHNK1E2SS", Request id "0HM5NHNK1E2SS:00000001": started reading request body.
2021-01-13 14:39:46.637 +08:00 [DBG] Connection id "0HM5NHNK1E2SS", Request id "0HM5NHNK1E2SS:00000001": done reading request body.
2021-01-13 14:39:46.638 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:46.639 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:46.640 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:39:46.640 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:39:46.641 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:39:46.642 +08:00 [DBG] Start token request.
2021-01-13 14:39:46.642 +08:00 [DBG] Start client validation
2021-01-13 14:39:46.642 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:39:46.644 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:39:46.647 +08:00 [DBG] Secret id found: client
2021-01-13 14:39:46.648 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:39:46.648 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:39:46.649 +08:00 [DBG] Client validation success
2021-01-13 14:39:46.649 +08:00 [DBG] Start token request validation
2021-01-13 14:39:46.650 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:39:46.650 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:39:46.651 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:39:46.652 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:39:46.656 +08:00 [DBG] Token request success.
2021-01-13 14:39:46.656 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" completed keep alive response.
2021-01-13 14:39:46.657 +08:00 [INF] Request finished in 20.6964ms 200 application/json; charset=UTF-8
2021-01-13 14:39:53.476 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" started.
2021-01-13 14:39:53.491 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:39:53.491 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:53.492 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:53.493 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:39:53.493 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:39:53.494 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:39:53.495 +08:00 [DBG] Start discovery request
2021-01-13 14:39:53.495 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" completed keep alive response.
2021-01-13 14:39:53.496 +08:00 [INF] Request finished in 5.2253ms 200 application/json; charset=UTF-8
2021-01-13 14:39:53.732 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:39:53.734 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:53.735 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:39:53.735 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:39:53.736 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:39:53.737 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:39:53.737 +08:00 [DBG] Start key discovery request
2021-01-13 14:39:53.738 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" completed keep alive response.
2021-01-13 14:39:53.738 +08:00 [INF] Request finished in 6.2081ms 200 application/json; charset=UTF-8
2021-01-13 14:40:45.346 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" reset.
2021-01-13 14:40:45.346 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" disconnecting.
2021-01-13 14:40:45.363 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" sending FIN.
2021-01-13 14:40:45.398 +08:00 [DBG] Connection id "0HM5NHNK1E2ST" stopped.
2021-01-13 14:40:48.505 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" reset.
2021-01-13 14:40:48.505 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" disconnecting.
2021-01-13 14:40:48.513 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" sending FIN.
2021-01-13 14:40:48.540 +08:00 [DBG] Connection id "0HM5NHNK1E2SS" stopped.
2021-01-13 14:41:31.480 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" started.
2021-01-13 14:41:31.504 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:41:31.504 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.505 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.506 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:41:31.506 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:41:31.507 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:41:31.508 +08:00 [DBG] Start discovery request
2021-01-13 14:41:31.508 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" completed keep alive response.
2021-01-13 14:41:31.511 +08:00 [INF] Request finished in 7.7533ms 200 application/json; charset=UTF-8
2021-01-13 14:41:31.596 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:41:31.597 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.598 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.599 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:41:31.599 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:41:31.600 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:41:31.601 +08:00 [DBG] Start key discovery request
2021-01-13 14:41:31.601 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" completed keep alive response.
2021-01-13 14:41:31.602 +08:00 [INF] Request finished in 6.2056ms 200 application/json; charset=UTF-8
2021-01-13 14:41:31.815 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" received FIN.
2021-01-13 14:41:31.816 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" disconnecting.
2021-01-13 14:41:31.817 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" sending FIN.
2021-01-13 14:41:31.817 +08:00 [DBG] Connection id "0HM5NHNK1E2SU" stopped.
2021-01-13 14:41:31.829 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" started.
2021-01-13 14:41:31.840 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:41:31.841 +08:00 [DBG] Connection id "0HM5NHNK1E2SV", Request id "0HM5NHNK1E2SV:00000001": started reading request body.
2021-01-13 14:41:31.842 +08:00 [DBG] Connection id "0HM5NHNK1E2SV", Request id "0HM5NHNK1E2SV:00000001": done reading request body.
2021-01-13 14:41:31.843 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.843 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:31.844 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:41:31.845 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:41:31.848 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:41:31.849 +08:00 [DBG] Start token request.
2021-01-13 14:41:31.849 +08:00 [DBG] Start client validation
2021-01-13 14:41:31.849 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:41:31.850 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:41:31.850 +08:00 [DBG] Secret id found: client
2021-01-13 14:41:31.851 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:41:31.852 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:41:31.852 +08:00 [DBG] Client validation success
2021-01-13 14:41:31.852 +08:00 [DBG] Start token request validation
2021-01-13 14:41:31.853 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:41:31.853 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:41:31.854 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:41:31.855 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:41:31.859 +08:00 [DBG] Token request success.
2021-01-13 14:41:31.859 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" completed keep alive response.
2021-01-13 14:41:31.860 +08:00 [INF] Request finished in 19.4814ms 200 application/json; charset=UTF-8
2021-01-13 14:41:33.912 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" started.
2021-01-13 14:41:33.940 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:41:33.941 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:33.942 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:33.942 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:41:33.943 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:41:33.944 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:41:33.948 +08:00 [DBG] Start discovery request
2021-01-13 14:41:33.950 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" completed keep alive response.
2021-01-13 14:41:33.953 +08:00 [INF] Request finished in 12.7308ms 200 application/json; charset=UTF-8
2021-01-13 14:41:34.156 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:41:34.158 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:34.158 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:41:34.159 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:41:34.160 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:41:34.160 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:41:34.161 +08:00 [DBG] Start key discovery request
2021-01-13 14:41:34.162 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" completed keep alive response.
2021-01-13 14:41:34.162 +08:00 [INF] Request finished in 5.9882ms 200 application/json; charset=UTF-8
2021-01-13 14:41:48.124 +08:00 [DBG] Connection id "0HM5NHNK1E2SL" received FIN.
2021-01-13 14:41:48.126 +08:00 [DBG] Connection id "0HM5NHNK1E2SL" disconnecting.
2021-01-13 14:41:48.127 +08:00 [DBG] Connection id "0HM5NHNK1E2SL" sending FIN.
2021-01-13 14:41:48.128 +08:00 [DBG] Connection id "0HM5NHNK1E2SL" stopped.
2021-01-13 14:41:51.092 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" reset.
2021-01-13 14:41:51.092 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" disconnecting.
2021-01-13 14:41:51.102 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" sending FIN.
2021-01-13 14:41:51.153 +08:00 [DBG] Connection id "0HM5NHNK1E2T0" stopped.
2021-01-13 14:42:17.683 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" received FIN.
2021-01-13 14:42:17.695 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" disconnecting.
2021-01-13 14:42:17.697 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" sending FIN.
2021-01-13 14:42:17.701 +08:00 [DBG] Connection id "0HM5NHNK1E2SV" stopped.
2021-01-13 14:42:21.348 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" started.
2021-01-13 14:42:21.440 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:42:21.450 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.454 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.454 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:42:21.455 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:42:21.456 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:42:21.457 +08:00 [DBG] Start discovery request
2021-01-13 14:42:21.457 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" completed keep alive response.
2021-01-13 14:42:21.458 +08:00 [INF] Request finished in 18.2228ms 200 application/json; charset=UTF-8
2021-01-13 14:42:21.629 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:42:21.631 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.632 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.636 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:42:21.637 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:42:21.638 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:42:21.639 +08:00 [DBG] Start key discovery request
2021-01-13 14:42:21.640 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" completed keep alive response.
2021-01-13 14:42:21.640 +08:00 [INF] Request finished in 10.6394ms 200 application/json; charset=UTF-8
2021-01-13 14:42:21.901 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" received FIN.
2021-01-13 14:42:21.903 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" disconnecting.
2021-01-13 14:42:21.904 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" sending FIN.
2021-01-13 14:42:21.904 +08:00 [DBG] Connection id "0HM5NHNK1E2T1" stopped.
2021-01-13 14:42:21.920 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" started.
2021-01-13 14:42:21.925 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:42:21.926 +08:00 [DBG] Connection id "0HM5NHNK1E2T2", Request id "0HM5NHNK1E2T2:00000001": started reading request body.
2021-01-13 14:42:21.926 +08:00 [DBG] Connection id "0HM5NHNK1E2T2", Request id "0HM5NHNK1E2T2:00000001": done reading request body.
2021-01-13 14:42:21.927 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.928 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:21.928 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:42:21.929 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:42:21.933 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:42:21.933 +08:00 [DBG] Start token request.
2021-01-13 14:42:21.934 +08:00 [DBG] Start client validation
2021-01-13 14:42:21.934 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:42:21.934 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:42:21.935 +08:00 [DBG] Secret id found: client
2021-01-13 14:42:21.935 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:42:21.936 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:42:21.936 +08:00 [DBG] Client validation success
2021-01-13 14:42:21.937 +08:00 [DBG] Start token request validation
2021-01-13 14:42:21.937 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:42:21.937 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:42:21.938 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:42:21.939 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:42:21.943 +08:00 [DBG] Token request success.
2021-01-13 14:42:21.943 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" completed keep alive response.
2021-01-13 14:42:21.944 +08:00 [INF] Request finished in 18.6294ms 200 application/json; charset=UTF-8
2021-01-13 14:42:23.883 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" started.
2021-01-13 14:42:23.899 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:42:23.901 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:23.902 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:23.903 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:42:23.904 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:42:23.905 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:42:23.905 +08:00 [DBG] Start discovery request
2021-01-13 14:42:23.907 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" completed keep alive response.
2021-01-13 14:42:23.907 +08:00 [INF] Request finished in 8.8482ms 200 application/json; charset=UTF-8
2021-01-13 14:42:24.168 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:42:24.169 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:24.170 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:42:24.171 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:42:24.171 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:42:24.172 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:42:24.173 +08:00 [DBG] Start key discovery request
2021-01-13 14:42:24.173 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" completed keep alive response.
2021-01-13 14:42:24.174 +08:00 [INF] Request finished in 5.8488ms 200 application/json; charset=UTF-8
2021-01-13 14:43:17.562 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" reset.
2021-01-13 14:43:17.563 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" disconnecting.
2021-01-13 14:43:17.585 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" sending FIN.
2021-01-13 14:43:17.644 +08:00 [DBG] Connection id "0HM5NHNK1E2T2" stopped.
2021-01-13 14:44:41.809 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" received FIN.
2021-01-13 14:44:41.813 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" disconnecting.
2021-01-13 14:44:41.813 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" sending FIN.
2021-01-13 14:44:41.814 +08:00 [DBG] Connection id "0HM5NHNK1E2T3" stopped.
2021-01-13 14:46:19.691 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 14:46:19.693 +08:00 [DBG] Connection id "0HM5NHNK1E2SO", Request id "0HM5NHNK1E2SO:00000002": started reading request body.
2021-01-13 14:46:19.694 +08:00 [DBG] Connection id "0HM5NHNK1E2SO", Request id "0HM5NHNK1E2SO:00000002": done reading request body.
2021-01-13 14:46:19.694 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:46:19.695 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:46:19.695 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:46:19.696 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:46:19.697 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:46:19.698 +08:00 [DBG] Start token request.
2021-01-13 14:46:19.698 +08:00 [DBG] Start client validation
2021-01-13 14:46:19.698 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:46:19.699 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 14:46:19.699 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 14:46:19.699 +08:00 [DBG] Secret id found: client
2021-01-13 14:46:19.700 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:46:19.701 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:46:19.702 +08:00 [DBG] Client validation success
2021-01-13 14:46:19.702 +08:00 [DBG] Start token request validation
2021-01-13 14:46:19.703 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:46:19.703 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:46:19.704 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:46:19.707 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:46:19.710 +08:00 [DBG] Token request success.
2021-01-13 14:46:19.711 +08:00 [DBG] Connection id "0HM5NHNK1E2SO" completed keep alive response.
2021-01-13 14:46:19.712 +08:00 [INF] Request finished in 20.5758ms 200 application/json; charset=UTF-8
2021-01-13 14:47:12.254 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" received FIN.
2021-01-13 14:47:12.264 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" disconnecting.
2021-01-13 14:47:12.265 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" sending FIN.
2021-01-13 14:47:12.268 +08:00 [DBG] Connection id "0HM5NHNK1E2SM" stopped.
2021-01-13 14:50:27.133 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" started.
2021-01-13 14:50:27.267 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:50:27.303 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.307 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.311 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:50:27.312 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:50:27.314 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:50:27.316 +08:00 [DBG] Start discovery request
2021-01-13 14:50:27.318 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" completed keep alive response.
2021-01-13 14:50:27.324 +08:00 [INF] Request finished in 57.1153ms 200 application/json; charset=UTF-8
2021-01-13 14:50:27.451 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:50:27.454 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.455 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.456 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:50:27.457 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:50:27.457 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:50:27.458 +08:00 [DBG] Start key discovery request
2021-01-13 14:50:27.459 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" completed keep alive response.
2021-01-13 14:50:27.460 +08:00 [INF] Request finished in 9.0354ms 200 application/json; charset=UTF-8
2021-01-13 14:50:27.693 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" received FIN.
2021-01-13 14:50:27.694 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" disconnecting.
2021-01-13 14:50:27.694 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" sending FIN.
2021-01-13 14:50:27.695 +08:00 [DBG] Connection id "0HM5NHNK1E2T4" stopped.
2021-01-13 14:50:27.711 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" started.
2021-01-13 14:50:27.716 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:50:27.732 +08:00 [DBG] Connection id "0HM5NHNK1E2T5", Request id "0HM5NHNK1E2T5:00000001": started reading request body.
2021-01-13 14:50:27.732 +08:00 [DBG] Connection id "0HM5NHNK1E2T5", Request id "0HM5NHNK1E2T5:00000001": done reading request body.
2021-01-13 14:50:27.733 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.736 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:27.737 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:50:27.738 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:50:27.739 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:50:27.739 +08:00 [DBG] Start token request.
2021-01-13 14:50:27.740 +08:00 [DBG] Start client validation
2021-01-13 14:50:27.740 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:50:27.741 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:50:27.741 +08:00 [DBG] Secret id found: client
2021-01-13 14:50:27.741 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:50:27.742 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:50:27.742 +08:00 [DBG] Client validation success
2021-01-13 14:50:27.743 +08:00 [DBG] Start token request validation
2021-01-13 14:50:27.743 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:50:27.743 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:50:27.744 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:50:27.745 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:50:27.749 +08:00 [DBG] Token request success.
2021-01-13 14:50:27.753 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" completed keep alive response.
2021-01-13 14:50:27.754 +08:00 [INF] Request finished in 38.6484ms 200 application/json; charset=UTF-8
2021-01-13 14:50:29.795 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" started.
2021-01-13 14:50:29.817 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:50:29.819 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:29.820 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:29.821 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:50:29.822 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:50:29.823 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:50:29.824 +08:00 [DBG] Start discovery request
2021-01-13 14:50:29.825 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" completed keep alive response.
2021-01-13 14:50:29.825 +08:00 [INF] Request finished in 7.795ms 200 application/json; charset=UTF-8
2021-01-13 14:50:30.033 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:50:30.035 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:30.036 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:50:30.036 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:50:30.037 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:50:30.038 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:50:30.039 +08:00 [DBG] Start key discovery request
2021-01-13 14:50:30.039 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" completed keep alive response.
2021-01-13 14:50:30.041 +08:00 [INF] Request finished in 7.3341ms 200 application/json; charset=UTF-8
2021-01-13 14:51:24.906 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" reset.
2021-01-13 14:51:24.910 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" disconnecting.
2021-01-13 14:51:25.032 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" sending FIN.
2021-01-13 14:51:25.040 +08:00 [DBG] Connection id "0HM5NHNK1E2T6" stopped.
2021-01-13 14:53:03.123 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" reset.
2021-01-13 14:53:03.123 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" disconnecting.
2021-01-13 14:53:03.126 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" sending FIN.
2021-01-13 14:53:03.166 +08:00 [DBG] Connection id "0HM5NHNK1E2T5" stopped.
2021-01-13 14:53:06.054 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" started.
2021-01-13 14:53:06.090 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:53:06.091 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.092 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.093 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:53:06.094 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:53:06.094 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:53:06.095 +08:00 [DBG] Start discovery request
2021-01-13 14:53:06.096 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" completed keep alive response.
2021-01-13 14:53:06.097 +08:00 [INF] Request finished in 6.9002ms 200 application/json; charset=UTF-8
2021-01-13 14:53:06.185 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:53:06.186 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.187 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.188 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:53:06.188 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:53:06.189 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:53:06.190 +08:00 [DBG] Start key discovery request
2021-01-13 14:53:06.190 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" completed keep alive response.
2021-01-13 14:53:06.191 +08:00 [INF] Request finished in 6.0394ms 200 application/json; charset=UTF-8
2021-01-13 14:53:06.473 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" received FIN.
2021-01-13 14:53:06.474 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" disconnecting.
2021-01-13 14:53:06.475 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" sending FIN.
2021-01-13 14:53:06.476 +08:00 [DBG] Connection id "0HM5NHNK1E2T7" stopped.
2021-01-13 14:53:06.486 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" started.
2021-01-13 14:53:06.497 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 40
2021-01-13 14:53:06.498 +08:00 [DBG] Connection id "0HM5NHNK1E2T8", Request id "0HM5NHNK1E2T8:00000001": started reading request body.
2021-01-13 14:53:06.498 +08:00 [DBG] Connection id "0HM5NHNK1E2T8", Request id "0HM5NHNK1E2T8:00000001": done reading request body.
2021-01-13 14:53:06.499 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.500 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:06.501 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 14:53:06.502 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 14:53:06.503 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 14:53:06.508 +08:00 [DBG] Start token request.
2021-01-13 14:53:06.514 +08:00 [DBG] Start client validation
2021-01-13 14:53:06.516 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 14:53:06.517 +08:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2021-01-13 14:53:06.529 +08:00 [DBG] Secret id found: client
2021-01-13 14:53:06.532 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 14:53:06.539 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 14:53:06.543 +08:00 [DBG] Client validation success
2021-01-13 14:53:06.544 +08:00 [DBG] Start token request validation
2021-01-13 14:53:06.545 +08:00 [DBG] Start client credentials token request validation
2021-01-13 14:53:06.553 +08:00 [DBG] client credentials token request validation success
2021-01-13 14:53:06.556 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2021-01-13 14:53:06.578 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 14:53:06.584 +08:00 [DBG] Token request success.
2021-01-13 14:53:06.585 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" completed keep alive response.
2021-01-13 14:53:06.585 +08:00 [INF] Request finished in 88.6195ms 200 application/json; charset=UTF-8
2021-01-13 14:53:12.303 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" started.
2021-01-13 14:53:12.320 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 14:53:12.321 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:12.322 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:12.322 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 14:53:12.323 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 14:53:12.324 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 14:53:12.325 +08:00 [DBG] Start discovery request
2021-01-13 14:53:12.325 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" completed keep alive response.
2021-01-13 14:53:12.326 +08:00 [INF] Request finished in 5.8261ms 200 application/json; charset=UTF-8
2021-01-13 14:53:12.534 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 14:53:12.536 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:12.536 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 14:53:12.537 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 14:53:12.538 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 14:53:12.538 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 14:53:12.539 +08:00 [DBG] Start key discovery request
2021-01-13 14:53:12.540 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" completed keep alive response.
2021-01-13 14:53:12.540 +08:00 [INF] Request finished in 6.1845ms 200 application/json; charset=UTF-8
2021-01-13 14:53:59.661 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" reset.
2021-01-13 14:53:59.661 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" disconnecting.
2021-01-13 14:53:59.663 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" sending FIN.
2021-01-13 14:53:59.768 +08:00 [DBG] Connection id "0HM5NHNK1E2T9" stopped.
2021-01-13 14:57:43.157 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" received FIN.
2021-01-13 14:57:43.159 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" disconnecting.
2021-01-13 14:57:43.160 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" sending FIN.
2021-01-13 14:57:43.161 +08:00 [DBG] Connection id "0HM5NHNK1E2T8" stopped.
2021-01-13 15:08:49.806 +08:00 [DBG] Hosting starting
2021-01-13 15:08:49.916 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 15:08:49.933 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 15:08:49.951 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 15:08:49.965 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 15:08:50.012 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 15:08:50.013 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 15:08:50.015 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 15:08:50.016 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 15:08:50.019 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 15:08:50.024 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 15:08:50.027 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 15:08:50.062 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 15:08:50.074 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 15:08:50.074 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 15:08:50.075 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 15:08:50.075 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 15:08:50.076 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 15:08:50.076 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 15:08:50.087 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 15:08:50.138 +08:00 [DBG] Hosting started
2021-01-13 15:08:50.139 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 15:08:50.629 +08:00 [DBG] Connection id "0HM5NI8A4BEIT" started.
2021-01-13 15:08:50.631 +08:00 [DBG] Connection id "0HM5NI8A4BEIU" started.
2021-01-13 15:08:50.667 +08:00 [DBG] Connection id "0HM5NI8A4BEIU" received FIN.
2021-01-13 15:08:50.667 +08:00 [DBG] Connection id "0HM5NI8A4BEIT" received FIN.
2021-01-13 15:08:50.684 +08:00 [DBG] Connection id "0HM5NI8A4BEIT" disconnecting.
2021-01-13 15:08:50.684 +08:00 [DBG] Connection id "0HM5NI8A4BEIU" disconnecting.
2021-01-13 15:08:50.687 +08:00 [DBG] Connection id "0HM5NI8A4BEIT" sending FIN.
2021-01-13 15:08:50.687 +08:00 [DBG] Connection id "0HM5NI8A4BEIU" sending FIN.
2021-01-13 15:08:50.693 +08:00 [DBG] Connection id "0HM5NI8A4BEIU" stopped.
2021-01-13 15:08:50.693 +08:00 [DBG] Connection id "0HM5NI8A4BEIT" stopped.
2021-01-13 15:08:51.645 +08:00 [DBG] Connection id "0HM5NI8A4BEIV" started.
2021-01-13 15:08:51.698 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" started.
2021-01-13 15:08:51.756 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 15:08:51.759 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 15:08:51.802 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 15:08:51.802 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 15:08:51.804 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 15:08:51.805 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 15:08:51.806 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 15:08:51.806 +08:00 [DBG] Error Url: /home/error
2021-01-13 15:08:51.807 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 15:08:51.814 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:08:51.829 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:08:51.846 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" completed keep alive response.
2021-01-13 15:08:51.853 +08:00 [INF] Request finished in 98.3718ms 404 
2021-01-13 15:11:48.136 +08:00 [DBG] Connection id "0HM5NI8A4BEIV" received FIN.
2021-01-13 15:11:48.141 +08:00 [DBG] Connection id "0HM5NI8A4BEIV" disconnecting.
2021-01-13 15:11:48.181 +08:00 [DBG] Connection id "0HM5NI8A4BEIV" sending FIN.
2021-01-13 15:11:48.183 +08:00 [DBG] Connection id "0HM5NI8A4BEIV" stopped.
2021-01-13 15:20:58.458 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" received FIN.
2021-01-13 15:20:58.462 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" disconnecting.
2021-01-13 15:20:58.468 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" sending FIN.
2021-01-13 15:20:58.469 +08:00 [DBG] Connection id "0HM5NI8A4BEJ0" stopped.
2021-01-13 15:50:59.311 +08:00 [DBG] Connection id "0HM5NI8A4BEJ1" started.
2021-01-13 15:50:59.312 +08:00 [DBG] Connection id "0HM5NI8A4BEJ1" received FIN.
2021-01-13 15:50:59.314 +08:00 [DBG] Connection id "0HM5NI8A4BEJ1" disconnecting.
2021-01-13 15:50:59.327 +08:00 [DBG] Connection id "0HM5NI8A4BEJ2" started.
2021-01-13 15:50:59.364 +08:00 [DBG] Connection id "0HM5NI8A4BEJ1" sending FIN.
2021-01-13 15:50:59.368 +08:00 [DBG] Connection id "0HM5NI8A4BEJ1" stopped.
2021-01-13 15:50:59.368 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 15:50:59.373 +08:00 [DBG] Connection id "0HM5NI8A4BEJ2", Request id "0HM5NI8A4BEJ2:00000001": started reading request body.
2021-01-13 15:50:59.383 +08:00 [DBG] Connection id "0HM5NI8A4BEJ2", Request id "0HM5NI8A4BEJ2:00000001": done reading request body.
2021-01-13 15:50:59.385 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:50:59.387 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:50:59.406 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 15:50:59.418 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 15:50:59.419 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 15:50:59.429 +08:00 [DBG] Start token request.
2021-01-13 15:50:59.435 +08:00 [DBG] Start client validation
2021-01-13 15:50:59.440 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 15:50:59.448 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 15:50:59.453 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 15:50:59.453 +08:00 [DBG] Secret id found: client
2021-01-13 15:50:59.467 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 15:50:59.475 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 15:50:59.475 +08:00 [DBG] Client validation success
2021-01-13 15:50:59.485 +08:00 [DBG] Start token request validation
2021-01-13 15:50:59.492 +08:00 [DBG] Start client credentials token request validation
2021-01-13 15:50:59.519 +08:00 [DBG] client credentials token request validation success
2021-01-13 15:50:59.532 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 15:50:59.561 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 15:50:59.671 +08:00 [DBG] Token request success.
2021-01-13 15:50:59.684 +08:00 [DBG] Connection id "0HM5NI8A4BEJ2" completed keep alive response.
2021-01-13 15:50:59.685 +08:00 [INF] Request finished in 316.2444ms 200 application/json; charset=UTF-8
2021-01-13 15:51:34.950 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" started.
2021-01-13 15:51:34.970 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 15:51:34.972 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:51:34.972 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:51:34.973 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 15:51:34.974 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 15:51:34.975 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 15:51:34.979 +08:00 [DBG] Start discovery request
2021-01-13 15:51:35.003 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" completed keep alive response.
2021-01-13 15:51:35.006 +08:00 [INF] Request finished in 35.6698ms 200 application/json; charset=UTF-8
2021-01-13 15:51:35.164 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 15:51:35.165 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:51:35.165 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 15:51:35.166 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 15:51:35.167 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 15:51:35.167 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 15:51:35.171 +08:00 [DBG] Start key discovery request
2021-01-13 15:51:35.182 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" completed keep alive response.
2021-01-13 15:51:35.186 +08:00 [INF] Request finished in 22.0717ms 200 application/json; charset=UTF-8
2021-01-13 15:54:04.941 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" received FIN.
2021-01-13 15:54:04.943 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" disconnecting.
2021-01-13 15:54:04.944 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" sending FIN.
2021-01-13 15:54:04.946 +08:00 [DBG] Connection id "0HM5NI8A4BEJ3" stopped.
2021-01-13 16:56:56.131 +08:00 [DBG] Hosting starting
2021-01-13 16:56:56.238 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 16:56:56.254 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 16:56:56.272 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 16:56:56.286 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 16:56:56.327 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 16:56:56.328 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 16:56:56.329 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 16:56:56.331 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 16:56:56.334 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 16:56:56.338 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 16:56:56.339 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 16:56:56.364 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 16:56:56.374 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 16:56:56.375 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 16:56:56.375 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 16:56:56.375 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 16:56:56.376 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 16:56:56.376 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 16:56:56.389 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 18:32:40.028 +08:00 [DBG] Hosting starting
2021-01-13 18:32:40.434 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 18:32:40.467 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 18:32:40.502 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 18:32:40.541 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 18:32:40.642 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 18:32:40.644 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 18:32:40.645 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 18:32:40.646 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 18:32:40.689 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 18:32:40.711 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 18:32:40.731 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 18:32:40.775 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 18:32:40.804 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 18:32:40.816 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 18:32:40.816 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 18:32:40.819 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 18:32:40.823 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 18:32:40.826 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 18:32:40.899 +08:00 [DBG] Failed to locate the development https certificate at 'null'.
2021-01-13 18:32:40.976 +08:00 [DBG] Hosting started
2021-01-13 18:32:40.976 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 18:32:41.134 +08:00 [DBG] Connection id "0HM5NLQ73HFT7" started.
2021-01-13 18:32:41.134 +08:00 [DBG] Connection id "0HM5NLQ73HFT6" started.
2021-01-13 18:32:41.165 +08:00 [DBG] Connection id "0HM5NLQ73HFT7" received FIN.
2021-01-13 18:32:41.165 +08:00 [DBG] Connection id "0HM5NLQ73HFT6" received FIN.
2021-01-13 18:32:41.177 +08:00 [DBG] Connection id "0HM5NLQ73HFT7" disconnecting.
2021-01-13 18:32:41.178 +08:00 [DBG] Connection id "0HM5NLQ73HFT6" disconnecting.
2021-01-13 18:32:41.187 +08:00 [DBG] Connection id "0HM5NLQ73HFT7" sending FIN.
2021-01-13 18:32:41.187 +08:00 [DBG] Connection id "0HM5NLQ73HFT6" sending FIN.
2021-01-13 18:32:41.192 +08:00 [DBG] Connection id "0HM5NLQ73HFT6" stopped.
2021-01-13 18:32:41.192 +08:00 [DBG] Connection id "0HM5NLQ73HFT7" stopped.
2021-01-13 18:32:42.037 +08:00 [DBG] Connection id "0HM5NLQ73HFT8" started.
2021-01-13 18:32:42.135 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" started.
2021-01-13 18:32:42.310 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/  
2021-01-13 18:32:42.324 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 18:32:42.373 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 18:32:42.377 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 18:32:42.381 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 18:32:42.382 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 18:32:42.384 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 18:32:42.385 +08:00 [DBG] Error Url: /home/error
2021-01-13 18:32:42.389 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 18:32:42.400 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:32:42.422 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:32:42.472 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" completed keep alive response.
2021-01-13 18:32:42.481 +08:00 [INF] Request finished in 172.4207ms 404 
2021-01-13 18:33:21.629 +08:00 [DBG] Connection id "0HM5NLQ73HFTA" started.
2021-01-13 18:33:21.631 +08:00 [DBG] Connection id "0HM5NLQ73HFTA" received FIN.
2021-01-13 18:33:21.644 +08:00 [DBG] Connection id "0HM5NLQ73HFTB" started.
2021-01-13 18:33:21.653 +08:00 [DBG] Connection id "0HM5NLQ73HFTA" disconnecting.
2021-01-13 18:33:21.677 +08:00 [DBG] Connection id "0HM5NLQ73HFTA" sending FIN.
2021-01-13 18:33:21.677 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 18:33:21.678 +08:00 [DBG] Connection id "0HM5NLQ73HFTA" stopped.
2021-01-13 18:33:21.683 +08:00 [DBG] Connection id "0HM5NLQ73HFTB", Request id "0HM5NLQ73HFTB:00000001": started reading request body.
2021-01-13 18:33:21.692 +08:00 [DBG] Connection id "0HM5NLQ73HFTB", Request id "0HM5NLQ73HFTB:00000001": done reading request body.
2021-01-13 18:33:21.694 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:33:21.694 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:33:21.742 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 18:33:21.753 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 18:33:21.754 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 18:33:21.762 +08:00 [DBG] Start token request.
2021-01-13 18:33:21.768 +08:00 [DBG] Start client validation
2021-01-13 18:33:21.772 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 18:33:21.777 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 18:33:21.782 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 18:33:21.782 +08:00 [DBG] Secret id found: client
2021-01-13 18:33:21.797 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 18:33:21.806 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 18:33:21.807 +08:00 [DBG] Client validation success
2021-01-13 18:33:21.818 +08:00 [DBG] Start token request validation
2021-01-13 18:33:21.829 +08:00 [DBG] Start client credentials token request validation
2021-01-13 18:33:21.864 +08:00 [DBG] client credentials token request validation success
2021-01-13 18:33:21.882 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 18:33:21.934 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 18:33:22.048 +08:00 [DBG] Token request success.
2021-01-13 18:33:22.065 +08:00 [DBG] Connection id "0HM5NLQ73HFTB" completed keep alive response.
2021-01-13 18:33:22.069 +08:00 [INF] Request finished in 391.5683ms 200 application/json; charset=UTF-8
2021-01-13 18:34:29.692 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" started.
2021-01-13 18:34:29.711 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 18:34:29.712 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:34:29.712 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:34:29.713 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 18:34:29.714 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 18:34:29.715 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 18:34:29.725 +08:00 [DBG] Start discovery request
2021-01-13 18:34:29.758 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" completed keep alive response.
2021-01-13 18:34:29.761 +08:00 [INF] Request finished in 50.0639ms 200 application/json; charset=UTF-8
2021-01-13 18:34:29.990 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 18:34:29.991 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:34:29.992 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:34:29.992 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 18:34:29.993 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 18:34:29.994 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 18:34:29.998 +08:00 [DBG] Start key discovery request
2021-01-13 18:34:30.009 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" completed keep alive response.
2021-01-13 18:34:30.010 +08:00 [INF] Request finished in 19.7132ms 200 application/json; charset=UTF-8
2021-01-13 18:36:38.921 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" received FIN.
2021-01-13 18:36:38.927 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" disconnecting.
2021-01-13 18:36:38.928 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" sending FIN.
2021-01-13 18:36:38.935 +08:00 [DBG] Connection id "0HM5NLQ73HFTC" stopped.
2021-01-13 18:37:45.119 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" started.
2021-01-13 18:37:45.136 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 18:37:45.170 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:37:45.171 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:37:45.171 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 18:37:45.172 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 18:37:45.173 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 18:37:45.174 +08:00 [DBG] Start discovery request
2021-01-13 18:37:45.174 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" completed keep alive response.
2021-01-13 18:37:45.175 +08:00 [INF] Request finished in 38.8979ms 200 application/json; charset=UTF-8
2021-01-13 18:37:45.328 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 18:37:45.330 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:37:45.331 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:37:45.331 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 18:37:45.332 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 18:37:45.333 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 18:37:45.333 +08:00 [DBG] Start key discovery request
2021-01-13 18:37:45.334 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" completed keep alive response.
2021-01-13 18:37:45.335 +08:00 [INF] Request finished in 6.3702ms 200 application/json; charset=UTF-8
2021-01-13 18:40:15.115 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" received FIN.
2021-01-13 18:40:15.117 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" disconnecting.
2021-01-13 18:40:15.118 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" sending FIN.
2021-01-13 18:40:15.120 +08:00 [DBG] Connection id "0HM5NLQ73HFTD" stopped.
2021-01-13 18:41:32.997 +08:00 [DBG] Connection id "0HM5NLQ73HFT8" received FIN.
2021-01-13 18:41:32.997 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" received FIN.
2021-01-13 18:41:33.001 +08:00 [DBG] Connection id "0HM5NLQ73HFT8" disconnecting.
2021-01-13 18:41:33.002 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" disconnecting.
2021-01-13 18:41:33.003 +08:00 [DBG] Connection id "0HM5NLQ73HFT8" sending FIN.
2021-01-13 18:41:33.004 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" sending FIN.
2021-01-13 18:41:33.005 +08:00 [DBG] Connection id "0HM5NLQ73HFT8" stopped.
2021-01-13 18:41:33.006 +08:00 [DBG] Connection id "0HM5NLQ73HFT9" stopped.
2021-01-13 18:49:32.597 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" started.
2021-01-13 18:49:32.633 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2021-01-13 18:49:32.643 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:49:32.644 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:49:32.645 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 18:49:32.645 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 18:49:32.646 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 18:49:32.647 +08:00 [DBG] Start discovery request
2021-01-13 18:49:32.647 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" completed keep alive response.
2021-01-13 18:49:32.648 +08:00 [INF] Request finished in 15.7263ms 200 application/json; charset=UTF-8
2021-01-13 18:49:32.867 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2021-01-13 18:49:32.868 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:49:32.869 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 18:49:32.869 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 18:49:32.870 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 18:49:32.872 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 18:49:32.872 +08:00 [DBG] Start key discovery request
2021-01-13 18:49:32.873 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" completed keep alive response.
2021-01-13 18:49:32.873 +08:00 [INF] Request finished in 6.4643ms 200 application/json; charset=UTF-8
2021-01-13 18:52:02.596 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" received FIN.
2021-01-13 18:52:02.602 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" disconnecting.
2021-01-13 18:52:02.603 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" sending FIN.
2021-01-13 18:52:02.604 +08:00 [DBG] Connection id "0HM5NLQ73HFTE" stopped.
2021-01-13 19:46:30.937 +08:00 [DBG] Hosting starting
2021-01-13 19:46:31.053 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-13 19:46:31.058 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-13 19:46:31.059 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-13 19:46:31.059 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-13 19:46:31.060 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-13 19:46:31.060 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-13 19:46:31.060 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-13 19:46:31.141 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-13 19:46:31.152 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-13 19:46:31.165 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-13 19:46:31.188 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-13 19:46:31.219 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 19:46:31.223 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-13 19:46:31.224 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-13 19:46:31.230 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-13 19:46:31.233 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-13 19:46:31.236 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-13 19:46:31.238 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-13 19:46:31.301 +08:00 [DBG] Hosting started
2021-01-13 19:46:31.302 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-13 19:46:31.347 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" received FIN.
2021-01-13 19:46:31.363 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" accepted.
2021-01-13 19:46:31.364 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" started.
2021-01-13 19:46:31.372 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" sending FIN because: "The client closed the connection."
2021-01-13 19:46:31.375 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" disconnecting.
2021-01-13 19:46:31.378 +08:00 [DBG] Connection id "0HM5NN3FDFFU0" stopped.
2021-01-13 19:46:32.663 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" accepted.
2021-01-13 19:46:32.756 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" started.
2021-01-13 19:46:32.762 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" accepted.
2021-01-13 19:46:32.763 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" started.
2021-01-13 19:46:32.825 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - -
2021-01-13 19:46:32.827 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-13 19:46:32.847 +08:00 [DBG] Login Url: /Account/Login
2021-01-13 19:46:32.847 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-13 19:46:32.848 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-13 19:46:32.848 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-13 19:46:32.849 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-13 19:46:32.849 +08:00 [DBG] Error Url: /home/error
2021-01-13 19:46:32.849 +08:00 [DBG] Error Id Parameter: errorId
2021-01-13 19:46:32.857 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:32.867 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:32.881 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" completed keep alive response.
2021-01-13 19:46:32.883 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - - - 404 0 - 59.2689ms
2021-01-13 19:46:39.967 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" accepted.
2021-01-13 19:46:39.969 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" started.
2021-01-13 19:46:39.976 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - -
2021-01-13 19:46:39.977 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:39.981 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:39.998 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 19:46:40.001 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 19:46:40.001 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 19:46:40.003 +08:00 [DBG] Start discovery request
2021-01-13 19:46:40.071 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" completed keep alive response.
2021-01-13 19:46:40.077 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 100.9425ms
2021-01-13 19:46:40.080 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - -
2021-01-13 19:46:40.085 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:40.086 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:40.087 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 19:46:40.088 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 19:46:40.094 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 19:46:40.099 +08:00 [DBG] Start key discovery request
2021-01-13 19:46:40.134 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" completed keep alive response.
2021-01-13 19:46:40.136 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 55.7114ms
2021-01-13 19:46:59.833 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" accepted.
2021-01-13 19:46:59.833 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" started.
2021-01-13 19:46:59.833 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" received FIN.
2021-01-13 19:46:59.834 +08:00 [DBG] Connection id "0HM5NN3FDFFU5" accepted.
2021-01-13 19:46:59.834 +08:00 [DBG] Connection id "0HM5NN3FDFFU5" started.
2021-01-13 19:46:59.835 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" sending FIN because: "The client closed the connection."
2021-01-13 19:46:59.836 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 19:46:59.837 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" disconnecting.
2021-01-13 19:46:59.840 +08:00 [DBG] Connection id "0HM5NN3FDFFU5", Request id "0HM5NN3FDFFU5:00000002": started reading request body.
2021-01-13 19:46:59.841 +08:00 [DBG] Connection id "0HM5NN3FDFFU4" stopped.
2021-01-13 19:46:59.841 +08:00 [DBG] Connection id "0HM5NN3FDFFU5", Request id "0HM5NN3FDFFU5:00000002": done reading request body.
2021-01-13 19:46:59.847 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:59.848 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:46:59.849 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 19:46:59.854 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 19:46:59.854 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 19:46:59.858 +08:00 [DBG] Start token request.
2021-01-13 19:46:59.861 +08:00 [DBG] Start client validation
2021-01-13 19:46:59.865 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 19:46:59.866 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 19:46:59.877 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 19:46:59.877 +08:00 [DBG] Secret id found: client
2021-01-13 19:46:59.886 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 19:46:59.900 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 19:46:59.901 +08:00 [DBG] Client validation success
2021-01-13 19:46:59.917 +08:00 [DBG] Start token request validation
2021-01-13 19:46:59.923 +08:00 [DBG] Start client credentials token request validation
2021-01-13 19:46:59.938 +08:00 [DBG] client credentials token request validation success
2021-01-13 19:46:59.948 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 19:46:59.967 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 19:47:00.133 +08:00 [DBG] Token request success.
2021-01-13 19:47:00.138 +08:00 [DBG] Connection id "0HM5NN3FDFFU5" completed keep alive response.
2021-01-13 19:47:00.139 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 200 - application/json;+charset=UTF-8 303.1601ms
2021-01-13 19:48:55.460 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" received FIN.
2021-01-13 19:48:55.462 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" sending FIN because: "The client closed the connection."
2021-01-13 19:48:55.462 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" disconnecting.
2021-01-13 19:48:55.465 +08:00 [DBG] Connection id "0HM5NN3FDFFU3" stopped.
2021-01-13 19:49:48.123 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" received FIN.
2021-01-13 19:49:48.126 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" disconnecting.
2021-01-13 19:49:48.126 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" stopped.
2021-01-13 19:49:48.134 +08:00 [DBG] Connection id "0HM5NN3FDFFU1" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-01-13 19:50:46.325 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-13 19:50:46.327 +08:00 [DBG] Connection id "0HM5NN3FDFFU5", Request id "0HM5NN3FDFFU5:00000003": started reading request body.
2021-01-13 19:50:46.328 +08:00 [DBG] Connection id "0HM5NN3FDFFU5", Request id "0HM5NN3FDFFU5:00000003": done reading request body.
2021-01-13 19:50:46.329 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:50:46.330 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 19:50:46.330 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-13 19:50:46.331 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-13 19:50:46.332 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-13 19:50:46.332 +08:00 [DBG] Start token request.
2021-01-13 19:50:46.333 +08:00 [DBG] Start client validation
2021-01-13 19:50:46.333 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-13 19:50:46.333 +08:00 [DBG] Start parsing for secret in post body
2021-01-13 19:50:46.334 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-13 19:50:46.334 +08:00 [DBG] Secret id found: client
2021-01-13 19:50:46.335 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-13 19:50:46.335 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-13 19:50:46.336 +08:00 [DBG] Client validation success
2021-01-13 19:50:46.336 +08:00 [DBG] Start token request validation
2021-01-13 19:50:46.336 +08:00 [DBG] Start client credentials token request validation
2021-01-13 19:50:46.337 +08:00 [DBG] client credentials token request validation success
2021-01-13 19:50:46.337 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-13 19:50:46.340 +08:00 [DBG] Getting claims for access token for client: client
2021-01-13 19:50:46.344 +08:00 [DBG] Token request success.
2021-01-13 19:50:46.345 +08:00 [DBG] Connection id "0HM5NN3FDFFU5" completed keep alive response.
2021-01-13 19:50:46.347 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 200 - application/json;+charset=UTF-8 21.0750ms
2021-01-13 19:51:48.160 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" received FIN.
2021-01-13 19:51:48.161 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" disconnecting.
2021-01-13 19:51:48.161 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" stopped.
2021-01-13 19:51:48.163 +08:00 [DBG] Connection id "0HM5NN3FDFFU2" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-01-13 20:05:44.424 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" accepted.
2021-01-13 20:05:44.431 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" started.
2021-01-13 20:05:44.450 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - -
2021-01-13 20:05:44.454 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:05:44.455 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:05:44.458 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 20:05:44.459 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 20:05:44.459 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 20:05:44.460 +08:00 [DBG] Start discovery request
2021-01-13 20:05:44.461 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" completed keep alive response.
2021-01-13 20:05:44.462 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 11.9524ms
2021-01-13 20:05:44.605 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - -
2021-01-13 20:05:44.606 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:05:44.607 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:05:44.608 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 20:05:44.609 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 20:05:44.609 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 20:05:44.611 +08:00 [DBG] Start key discovery request
2021-01-13 20:05:44.612 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" completed keep alive response.
2021-01-13 20:05:44.613 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 8.6148ms
2021-01-13 20:07:16.288 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" reset.
2021-01-13 20:07:16.301 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" sending FIN because: "The client closed the connection."
2021-01-13 20:07:16.314 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" disconnecting.
2021-01-13 20:07:16.341 +08:00 [DBG] Connection id "0HM5NN3FDFFU6" stopped.
2021-01-13 20:08:11.721 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" accepted.
2021-01-13 20:08:11.725 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" started.
2021-01-13 20:08:11.732 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - -
2021-01-13 20:08:11.733 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:08:11.733 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:08:11.734 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-01-13 20:08:11.736 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-01-13 20:08:11.736 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-01-13 20:08:11.737 +08:00 [DBG] Start discovery request
2021-01-13 20:08:11.738 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" completed keep alive response.
2021-01-13 20:08:11.739 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.1104ms
2021-01-13 20:08:11.877 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - -
2021-01-13 20:08:11.879 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:08:11.879 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-13 20:08:11.880 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-01-13 20:08:11.882 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-01-13 20:08:11.883 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-01-13 20:08:11.883 +08:00 [DBG] Start key discovery request
2021-01-13 20:08:11.885 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" completed keep alive response.
2021-01-13 20:08:11.886 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 8.4630ms
2021-01-13 20:10:41.716 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" received FIN.
2021-01-13 20:10:41.718 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" disconnecting.
2021-01-13 20:10:41.719 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" sending FIN because: "The client closed the connection."
2021-01-13 20:10:41.725 +08:00 [DBG] Connection id "0HM5NN3FDFFU7" stopped.
2021-01-14 14:47:59.055 +08:00 [DBG] Hosting starting
2021-01-14 14:47:59.144 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-14 14:47:59.151 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-14 14:47:59.153 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-14 14:47:59.154 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-14 14:47:59.155 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-14 14:47:59.155 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-14 14:47:59.155 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-14 14:47:59.214 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-14 14:47:59.229 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-14 14:47:59.259 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-14 14:47:59.295 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-14 14:47:59.320 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:47:59.325 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-14 14:47:59.327 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:47:59.334 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-14 14:47:59.339 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-14 14:47:59.344 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-14 14:47:59.352 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-14 14:47:59.410 +08:00 [DBG] Hosting started
2021-01-14 14:47:59.410 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-14 14:47:59.821 +08:00 [DBG] Connection id "0HM5OB1AIETL5" received FIN.
2021-01-14 14:47:59.821 +08:00 [DBG] Connection id "0HM5OB1AIETL6" received FIN.
2021-01-14 14:47:59.834 +08:00 [DBG] Connection id "0HM5OB1AIETL5" accepted.
2021-01-14 14:47:59.834 +08:00 [DBG] Connection id "0HM5OB1AIETL6" accepted.
2021-01-14 14:47:59.835 +08:00 [DBG] Connection id "0HM5OB1AIETL5" started.
2021-01-14 14:47:59.835 +08:00 [DBG] Connection id "0HM5OB1AIETL6" started.
2021-01-14 14:47:59.844 +08:00 [DBG] Connection id "0HM5OB1AIETL5" sending FIN because: "The client closed the connection."
2021-01-14 14:47:59.844 +08:00 [DBG] Connection id "0HM5OB1AIETL6" sending FIN because: "The client closed the connection."
2021-01-14 14:47:59.847 +08:00 [DBG] Connection id "0HM5OB1AIETL6" disconnecting.
2021-01-14 14:47:59.847 +08:00 [DBG] Connection id "0HM5OB1AIETL5" disconnecting.
2021-01-14 14:47:59.850 +08:00 [DBG] Connection id "0HM5OB1AIETL6" stopped.
2021-01-14 14:47:59.850 +08:00 [DBG] Connection id "0HM5OB1AIETL5" stopped.
2021-01-14 14:48:00.326 +08:00 [DBG] Connection id "0HM5OB1AIETL7" accepted.
2021-01-14 14:48:00.331 +08:00 [DBG] Connection id "0HM5OB1AIETL8" accepted.
2021-01-14 14:48:00.335 +08:00 [DBG] Connection id "0HM5OB1AIETL8" started.
2021-01-14 14:48:00.334 +08:00 [DBG] Connection id "0HM5OB1AIETL7" started.
2021-01-14 14:48:00.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - -
2021-01-14 14:48:00.419 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-14 14:48:00.441 +08:00 [DBG] Login Url: /Account/Login
2021-01-14 14:48:00.441 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-14 14:48:00.442 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-14 14:48:00.442 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-14 14:48:00.445 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-14 14:48:00.446 +08:00 [DBG] Error Url: /home/error
2021-01-14 14:48:00.446 +08:00 [DBG] Error Id Parameter: errorId
2021-01-14 14:48:00.451 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:48:00.458 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:48:00.474 +08:00 [DBG] Connection id "0HM5OB1AIETL7" completed keep alive response.
2021-01-14 14:48:00.476 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - - - 404 0 - 61.8087ms
2021-01-14 14:48:02.026 +08:00 [DBG] Connection id "0HM5OB1AIETL9" accepted.
2021-01-14 14:48:02.033 +08:00 [DBG] Connection id "0HM5OB1AIETLA" accepted.
2021-01-14 14:48:02.042 +08:00 [DBG] Connection id "0HM5OB1AIETL9" started.
2021-01-14 14:48:02.045 +08:00 [DBG] Connection id "0HM5OB1AIETLA" started.
2021-01-14 14:48:02.046 +08:00 [DBG] Connection id "0HM5OB1AIETL9" received FIN.
2021-01-14 14:48:02.046 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-14 14:48:02.048 +08:00 [DBG] Connection id "0HM5OB1AIETL9" disconnecting.
2021-01-14 14:48:02.049 +08:00 [DBG] Connection id "0HM5OB1AIETL9" stopped.
2021-01-14 14:48:02.049 +08:00 [DBG] Connection id "0HM5OB1AIETLA", Request id "0HM5OB1AIETLA:00000002": started reading request body.
2021-01-14 14:48:02.050 +08:00 [DBG] Connection id "0HM5OB1AIETLA", Request id "0HM5OB1AIETLA:00000002": done reading request body.
2021-01-14 14:48:02.051 +08:00 [DBG] Connection id "0HM5OB1AIETL9" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-01-14 14:48:02.053 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:48:02.053 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:48:02.077 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-14 14:48:02.084 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-14 14:48:02.085 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-14 14:48:02.089 +08:00 [DBG] Start token request.
2021-01-14 14:48:02.091 +08:00 [DBG] Start client validation
2021-01-14 14:48:02.095 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-14 14:48:02.096 +08:00 [DBG] Start parsing for secret in post body
2021-01-14 14:48:02.106 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-14 14:48:02.106 +08:00 [DBG] Secret id found: client
2021-01-14 14:48:02.112 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-14 14:48:02.119 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-14 14:48:02.119 +08:00 [DBG] Client validation success
2021-01-14 14:48:02.125 +08:00 [DBG] Start token request validation
2021-01-14 14:48:02.128 +08:00 [DBG] Start client credentials token request validation
2021-01-14 14:48:02.147 +08:00 [DBG] client credentials token request validation success
2021-01-14 14:48:02.157 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-14 14:48:02.176 +08:00 [DBG] Getting claims for access token for client: client
2021-01-14 14:48:02.340 +08:00 [DBG] Token request success.
2021-01-14 14:48:02.351 +08:00 [DBG] Connection id "0HM5OB1AIETLA" completed keep alive response.
2021-01-14 14:48:02.352 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 200 - application/json;+charset=UTF-8 305.9035ms
2021-01-14 14:50:38.163 +08:00 [DBG] Hosting starting
2021-01-14 14:50:38.260 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-14 14:50:38.292 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-14 14:50:38.297 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-14 14:50:38.308 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-14 14:50:38.308 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-14 14:50:38.308 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-14 14:50:38.308 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-14 14:50:38.414 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-14 14:50:38.424 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-14 14:50:38.438 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-14 14:50:38.456 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-14 14:50:38.481 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:50:38.485 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-14 14:50:38.486 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:50:38.490 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-14 14:50:38.493 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-14 14:50:38.496 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-14 14:50:38.498 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-14 14:50:38.766 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。
 ---> System.Net.Sockets.SocketException (10048): 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.<Bind>g__BindSocket|13_0(<>c__DisplayClass13_0& )
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.<Bind>g__BindSocket|13_0(<>c__DisplayClass13_0& )
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass29_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IEnumerable`1 listenOptions, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2021-01-14 14:50:38.852 +08:00 [DBG] Hosting shutdown
2021-01-14 14:50:48.325 +08:00 [DBG] Hosting starting
2021-01-14 14:50:48.388 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-14 14:50:48.396 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-14 14:50:48.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-14 14:50:48.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-14 14:50:48.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-14 14:50:48.398 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-14 14:50:48.398 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-14 14:50:48.475 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-14 14:50:48.482 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-14 14:50:48.501 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-14 14:50:48.524 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-14 14:50:48.552 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:50:48.562 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-14 14:50:48.564 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-14 14:50:48.569 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-14 14:50:48.573 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-14 14:50:48.579 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-14 14:50:48.586 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-14 14:50:48.667 +08:00 [DBG] Hosting started
2021-01-14 14:50:48.667 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-01-14 14:50:48.770 +08:00 [DBG] Connection id "0HM5OB2STKSCK" accepted.
2021-01-14 14:50:48.770 +08:00 [DBG] Connection id "0HM5OB2STKSCL" accepted.
2021-01-14 14:50:48.776 +08:00 [DBG] Connection id "0HM5OB2STKSCL" started.
2021-01-14 14:50:48.776 +08:00 [DBG] Connection id "0HM5OB2STKSCK" started.
2021-01-14 14:50:48.884 +08:00 [DBG] Connection id "0HM5OB2STKSCK" reset.
2021-01-14 14:50:48.884 +08:00 [DBG] Connection id "0HM5OB2STKSCL" reset.
2021-01-14 14:50:48.917 +08:00 [DBG] Connection id "0HM5OB2STKSCK" sending FIN because: "The client closed the connection."
2021-01-14 14:50:49.052 +08:00 [DBG] Connection id "0HM5OB2STKSCK" disconnecting.
2021-01-14 14:50:48.917 +08:00 [DBG] Connection id "0HM5OB2STKSCL" sending FIN because: "The client closed the connection."
2021-01-14 14:50:49.090 +08:00 [DBG] Connection id "0HM5OB2STKSCK" stopped.
2021-01-14 14:50:49.098 +08:00 [DBG] Connection id "0HM5OB2STKSCL" disconnecting.
2021-01-14 14:50:49.102 +08:00 [DBG] Connection id "0HM5OB2STKSCL" stopped.
2021-01-14 14:50:49.317 +08:00 [DBG] Connection id "0HM5OB2STKSCM" accepted.
2021-01-14 14:50:49.334 +08:00 [DBG] Connection id "0HM5OB2STKSCN" accepted.
2021-01-14 14:50:49.334 +08:00 [DBG] Connection id "0HM5OB2STKSCM" started.
2021-01-14 14:50:49.335 +08:00 [DBG] Connection id "0HM5OB2STKSCN" started.
2021-01-14 14:50:49.396 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - -
2021-01-14 14:50:49.399 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-01-14 14:50:49.418 +08:00 [DBG] Login Url: /Account/Login
2021-01-14 14:50:49.418 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-01-14 14:50:49.418 +08:00 [DBG] Logout Url: /Account/Logout
2021-01-14 14:50:49.419 +08:00 [DBG] ConsentUrl Url: /consent
2021-01-14 14:50:49.419 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-01-14 14:50:49.419 +08:00 [DBG] Error Url: /home/error
2021-01-14 14:50:49.420 +08:00 [DBG] Error Id Parameter: errorId
2021-01-14 14:50:49.425 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:50:49.434 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:50:49.448 +08:00 [DBG] Connection id "0HM5OB2STKSCN" completed keep alive response.
2021-01-14 14:50:49.451 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - - - 404 0 - 59.1717ms
2021-01-14 14:50:52.707 +08:00 [DBG] Connection id "0HM5OB2STKSCO" received FIN.
2021-01-14 14:50:52.707 +08:00 [DBG] Connection id "0HM5OB2STKSCO" accepted.
2021-01-14 14:50:52.707 +08:00 [DBG] Connection id "0HM5OB2STKSCO" started.
2021-01-14 14:50:52.709 +08:00 [DBG] Connection id "0HM5OB2STKSCP" accepted.
2021-01-14 14:50:52.710 +08:00 [DBG] Connection id "0HM5OB2STKSCO" sending FIN because: "The client closed the connection."
2021-01-14 14:50:52.710 +08:00 [DBG] Connection id "0HM5OB2STKSCP" started.
2021-01-14 14:50:52.711 +08:00 [DBG] Connection id "0HM5OB2STKSCO" disconnecting.
2021-01-14 14:50:52.712 +08:00 [DBG] Connection id "0HM5OB2STKSCO" stopped.
2021-01-14 14:50:52.712 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99
2021-01-14 14:50:52.715 +08:00 [DBG] Connection id "0HM5OB2STKSCP", Request id "0HM5OB2STKSCP:00000002": started reading request body.
2021-01-14 14:50:52.716 +08:00 [DBG] Connection id "0HM5OB2STKSCP", Request id "0HM5OB2STKSCP:00000002": done reading request body.
2021-01-14 14:50:52.719 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:50:52.720 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-01-14 14:50:52.730 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-01-14 14:50:52.737 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-01-14 14:50:52.737 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-01-14 14:50:52.741 +08:00 [DBG] Start token request.
2021-01-14 14:50:52.743 +08:00 [DBG] Start client validation
2021-01-14 14:50:52.746 +08:00 [DBG] Start parsing Basic Authentication secret
2021-01-14 14:50:52.748 +08:00 [DBG] Start parsing for secret in post body
2021-01-14 14:50:52.758 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-01-14 14:50:52.759 +08:00 [DBG] Secret id found: client
2021-01-14 14:50:52.765 +08:00 [DBG] client configuration validation for client client succeeded.
2021-01-14 14:50:52.771 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-01-14 14:50:52.771 +08:00 [DBG] Client validation success
2021-01-14 14:50:52.777 +08:00 [DBG] Start token request validation
2021-01-14 14:50:52.781 +08:00 [DBG] Start client credentials token request validation
2021-01-14 14:50:52.798 +08:00 [DBG] client credentials token request validation success
2021-01-14 14:50:52.808 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb"},"$type":"TokenRequestValidationLog"}
2021-01-14 14:50:52.824 +08:00 [DBG] Getting claims for access token for client: client
2021-01-14 14:50:52.919 +08:00 [DBG] Token request success.
2021-01-14 14:50:52.934 +08:00 [DBG] Connection id "0HM5OB2STKSCP" completed keep alive response.
2021-01-14 14:50:52.935 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 99 - 200 - application/json;+charset=UTF-8 222.8188ms
2021-01-28 15:07:26.189 +08:00 [DBG] Hosting starting
2021-01-28 15:07:26.296 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-01-28 15:07:26.304 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-01-28 15:07:26.305 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-01-28 15:07:26.305 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-01-28 15:07:26.305 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-01-28 15:07:26.305 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-01-28 15:07:26.306 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-01-28 15:07:26.363 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-01-28 15:07:26.370 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-01-28 15:07:26.393 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-01-28 15:07:26.411 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-01-28 15:07:26.435 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-28 15:07:26.438 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-01-28 15:07:26.439 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-01-28 15:07:26.444 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-01-28 15:07:26.447 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-01-28 15:07:26.450 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-01-28 15:07:26.452 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-01-28 15:07:26.516 +08:00 [DBG] Hosting started
2021-01-28 15:07:26.516 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:09:51.598 +08:00 [DBG] Hosting starting
2021-02-03 14:09:51.717 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:09:51.725 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:09:51.727 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:09:51.727 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:09:51.727 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:09:51.728 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:09:51.728 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:09:51.864 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:09:51.873 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:09:51.896 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:09:51.915 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:09:51.964 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:09:51.968 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:09:51.969 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:09:51.974 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:09:51.977 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:09:51.982 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:09:51.984 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:09:52.189 +08:00 [DBG] Hosting started
2021-02-03 14:09:52.191 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:10:58.173 +08:00 [DBG] Connection id "0HM6819SJANGD" accepted.
2021-02-03 14:10:58.183 +08:00 [DBG] Connection id "0HM6819SJANGD" started.
2021-02-03 14:10:58.243 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:10:58.249 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:10:58.309 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000002": started reading request body.
2021-02-03 14:10:58.310 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000002": done reading request body.
2021-02-03 14:10:58.346 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:10:58.346 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:10:58.347 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:10:58.347 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:10:58.348 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:10:58.348 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:10:58.348 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:10:58.356 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:10:58.378 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:10:58.402 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:10:58.429 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:10:58.430 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:10:58.434 +08:00 [DBG] Start token request.
2021-02-03 14:10:58.437 +08:00 [DBG] Start client validation
2021-02-03 14:10:58.441 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:10:58.443 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:10:58.467 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:10:58.467 +08:00 [DBG] Secret id found: client
2021-02-03 14:10:58.476 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:10:58.486 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:10:58.486 +08:00 [DBG] Client validation success
2021-02-03 14:10:58.496 +08:00 [DBG] Start token request validation
2021-02-03 14:10:58.500 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:10:58.522 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:10:58.533 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:10:58.556 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:10:58.878 +08:00 [DBG] Token request success.
2021-02-03 14:10:58.895 +08:00 [DBG] Connection id "0HM6819SJANGD" completed keep alive response.
2021-02-03 14:10:58.905 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 657.6951ms
2021-02-03 14:11:12.330 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:11:12.332 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000003": started reading request body.
2021-02-03 14:11:12.333 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000003": done reading request body.
2021-02-03 14:11:12.334 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:11:12.338 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:11:12.340 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:11:12.342 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:11:12.342 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:11:12.344 +08:00 [DBG] Start token request.
2021-02-03 14:11:12.345 +08:00 [DBG] Start client validation
2021-02-03 14:11:12.345 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:11:12.346 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:11:12.347 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:11:12.347 +08:00 [DBG] Secret id found: client
2021-02-03 14:11:12.348 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:11:12.349 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:11:12.349 +08:00 [DBG] Client validation success
2021-02-03 14:11:12.349 +08:00 [DBG] Start token request validation
2021-02-03 14:11:12.350 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:11:12.350 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:11:12.351 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:11:12.354 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:11:12.359 +08:00 [DBG] Token request success.
2021-02-03 14:11:12.360 +08:00 [DBG] Connection id "0HM6819SJANGD" completed keep alive response.
2021-02-03 14:11:12.364 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 33.2577ms
2021-02-03 14:11:13.264 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:11:13.268 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000004": started reading request body.
2021-02-03 14:11:13.270 +08:00 [DBG] Connection id "0HM6819SJANGD", Request id "0HM6819SJANGD:00000004": done reading request body.
2021-02-03 14:11:13.276 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:11:13.280 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:11:13.280 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:11:13.286 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:11:13.286 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:11:13.287 +08:00 [DBG] Start token request.
2021-02-03 14:11:13.287 +08:00 [DBG] Start client validation
2021-02-03 14:11:13.288 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:11:13.288 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:11:13.289 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:11:13.289 +08:00 [DBG] Secret id found: client
2021-02-03 14:11:13.289 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:11:13.290 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:11:13.290 +08:00 [DBG] Client validation success
2021-02-03 14:11:13.291 +08:00 [DBG] Start token request validation
2021-02-03 14:11:13.294 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:11:13.295 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:11:13.295 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:11:13.297 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:11:13.300 +08:00 [DBG] Token request success.
2021-02-03 14:11:13.301 +08:00 [DBG] Connection id "0HM6819SJANGD" completed keep alive response.
2021-02-03 14:11:13.302 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 37.2399ms
2021-02-03 14:13:19.256 +08:00 [DBG] Hosting starting
2021-02-03 14:13:19.337 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:13:19.354 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:13:19.373 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:13:19.396 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:13:19.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:13:19.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:13:19.397 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:13:19.584 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:13:19.593 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:13:19.606 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:13:19.631 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:13:19.658 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:13:19.662 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:13:19.664 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:13:19.669 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:13:19.672 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:13:19.680 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:13:19.682 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:13:19.790 +08:00 [DBG] Hosting started
2021-02-03 14:13:19.790 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:13:32.934 +08:00 [DBG] Connection id "0HM681BAN81KL" accepted.
2021-02-03 14:13:32.939 +08:00 [DBG] Connection id "0HM681BAN81KL" started.
2021-02-03 14:13:32.992 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:13:33.004 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:13:33.022 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000002": started reading request body.
2021-02-03 14:13:33.023 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000002": done reading request body.
2021-02-03 14:13:33.038 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:13:33.039 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:13:33.039 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:13:33.040 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:13:33.043 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:13:33.043 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:13:33.044 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:13:33.050 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:33.056 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:33.069 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:13:33.077 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:13:33.078 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:13:33.083 +08:00 [DBG] Start token request.
2021-02-03 14:13:33.085 +08:00 [DBG] Start client validation
2021-02-03 14:13:33.089 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:13:33.091 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:13:33.106 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:13:33.107 +08:00 [DBG] Secret id found: client
2021-02-03 14:13:33.113 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:13:33.121 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:13:33.122 +08:00 [DBG] Client validation success
2021-02-03 14:13:33.128 +08:00 [DBG] Start token request validation
2021-02-03 14:13:33.132 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:13:33.154 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:13:33.165 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:13:33.185 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:13:33.289 +08:00 [DBG] Token request success.
2021-02-03 14:13:33.309 +08:00 [DBG] Connection id "0HM681BAN81KL" completed keep alive response.
2021-02-03 14:13:33.313 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 324.2913ms
2021-02-03 14:13:38.372 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:13:38.384 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000003": started reading request body.
2021-02-03 14:13:38.428 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000003": done reading request body.
2021-02-03 14:13:38.458 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:38.480 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:38.487 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:13:38.489 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:13:38.490 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:13:38.490 +08:00 [DBG] Start token request.
2021-02-03 14:13:38.491 +08:00 [DBG] Start client validation
2021-02-03 14:13:38.491 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:13:38.491 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:13:38.492 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:13:38.492 +08:00 [DBG] Secret id found: client
2021-02-03 14:13:38.493 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:13:38.493 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:13:38.494 +08:00 [DBG] Client validation success
2021-02-03 14:13:38.494 +08:00 [DBG] Start token request validation
2021-02-03 14:13:38.498 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:13:38.502 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:13:38.503 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:13:38.506 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:13:38.510 +08:00 [DBG] Token request success.
2021-02-03 14:13:38.512 +08:00 [DBG] Connection id "0HM681BAN81KL" completed keep alive response.
2021-02-03 14:13:38.518 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 146.3189ms
2021-02-03 14:13:39.408 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:13:39.411 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000004": started reading request body.
2021-02-03 14:13:39.412 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000004": done reading request body.
2021-02-03 14:13:39.417 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:39.418 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:39.419 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:13:39.426 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:13:39.426 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:13:39.427 +08:00 [DBG] Start token request.
2021-02-03 14:13:39.427 +08:00 [DBG] Start client validation
2021-02-03 14:13:39.428 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:13:39.428 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:13:39.429 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:13:39.429 +08:00 [DBG] Secret id found: client
2021-02-03 14:13:39.429 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:13:39.430 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:13:39.430 +08:00 [DBG] Client validation success
2021-02-03 14:13:39.431 +08:00 [DBG] Start token request validation
2021-02-03 14:13:39.431 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:13:39.432 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:13:39.432 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:13:39.434 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:13:39.438 +08:00 [DBG] Token request success.
2021-02-03 14:13:39.442 +08:00 [DBG] Connection id "0HM681BAN81KL" completed keep alive response.
2021-02-03 14:13:39.443 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 34.6352ms
2021-02-03 14:13:40.200 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:13:40.221 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000005": started reading request body.
2021-02-03 14:13:40.222 +08:00 [DBG] Connection id "0HM681BAN81KL", Request id "0HM681BAN81KL:00000005": done reading request body.
2021-02-03 14:13:40.225 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:40.227 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:13:40.228 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:13:40.229 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:13:40.230 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:13:40.231 +08:00 [DBG] Start token request.
2021-02-03 14:13:40.233 +08:00 [DBG] Start client validation
2021-02-03 14:13:40.253 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:13:40.260 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:13:40.261 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:13:40.262 +08:00 [DBG] Secret id found: client
2021-02-03 14:13:40.263 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:13:40.264 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:13:40.265 +08:00 [DBG] Client validation success
2021-02-03 14:13:40.266 +08:00 [DBG] Start token request validation
2021-02-03 14:13:40.270 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:13:40.272 +08:00 [DBG] client credentials token request validation success
2021-02-03 14:13:40.273 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:13:40.276 +08:00 [DBG] Getting claims for access token for client: client
2021-02-03 14:13:40.280 +08:00 [DBG] Token request success.
2021-02-03 14:13:40.280 +08:00 [DBG] Connection id "0HM681BAN81KL" completed keep alive response.
2021-02-03 14:13:40.288 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 200 - application/json;+charset=UTF-8 88.2251ms
2021-02-03 14:18:00.447 +08:00 [DBG] Hosting starting
2021-02-03 14:18:00.517 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:18:00.526 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:18:00.527 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:18:00.527 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:18:00.527 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:18:00.528 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:18:00.528 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:18:00.590 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:18:00.597 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:18:00.610 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:18:00.631 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:18:00.661 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:18:00.670 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:18:00.672 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:18:00.678 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:18:00.683 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:18:00.687 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:18:00.692 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:18:00.786 +08:00 [DBG] Hosting started
2021-02-03 14:18:00.795 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:18:05.532 +08:00 [DBG] Connection id "0HM681DRUUAIQ" accepted.
2021-02-03 14:18:05.535 +08:00 [DBG] Connection id "0HM681DRUUAIQ" started.
2021-02-03 14:18:05.586 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:05.592 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:18:05.606 +08:00 [DBG] Connection id "0HM681DRUUAIQ", Request id "0HM681DRUUAIQ:00000002": started reading request body.
2021-02-03 14:18:05.607 +08:00 [DBG] Connection id "0HM681DRUUAIQ", Request id "0HM681DRUUAIQ:00000002": done reading request body.
2021-02-03 14:18:05.625 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:18:05.626 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:18:05.626 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:18:05.627 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:18:05.627 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:18:05.627 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:18:05.628 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:18:05.632 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:05.641 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:05.653 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:05.661 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:05.662 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:05.666 +08:00 [DBG] Start token request.
2021-02-03 14:18:05.667 +08:00 [DBG] Start client validation
2021-02-03 14:18:05.672 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:05.676 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:05.690 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:05.690 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:05.696 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:05.703 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:05.704 +08:00 [DBG] Client validation success
2021-02-03 14:18:05.710 +08:00 [DBG] Start token request validation
2021-02-03 14:18:05.713 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:05.724 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:05.777 +08:00 [DBG] Connection id "0HM681DRUUAIQ" completed keep alive response.
2021-02-03 14:18:05.781 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 197.1991ms
2021-02-03 14:18:35.437 +08:00 [DBG] Hosting starting
2021-02-03 14:18:35.580 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:18:35.587 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:18:35.589 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:18:35.589 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:18:35.589 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:18:35.589 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:18:35.589 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:18:35.678 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:18:35.687 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:18:35.701 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:18:35.720 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:18:35.749 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:18:35.753 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:18:35.754 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:18:35.759 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:18:35.763 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:18:35.768 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:18:35.769 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:18:35.861 +08:00 [DBG] Hosting started
2021-02-03 14:18:35.862 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:18:40.044 +08:00 [DBG] Connection id "0HM681E682FTP" accepted.
2021-02-03 14:18:40.054 +08:00 [DBG] Connection id "0HM681E682FTP" started.
2021-02-03 14:18:40.109 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:40.112 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:18:40.129 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000002": started reading request body.
2021-02-03 14:18:40.130 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000002": done reading request body.
2021-02-03 14:18:40.147 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:18:40.147 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:18:40.148 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:18:40.148 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:18:40.148 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:18:40.149 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:18:40.149 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:18:40.155 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:40.161 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:40.176 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:40.183 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:40.184 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:40.188 +08:00 [DBG] Start token request.
2021-02-03 14:18:40.190 +08:00 [DBG] Start client validation
2021-02-03 14:18:40.194 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:40.196 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:40.212 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:40.212 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:40.225 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:40.244 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:40.255 +08:00 [DBG] Client validation success
2021-02-03 14:18:40.269 +08:00 [DBG] Start token request validation
2021-02-03 14:18:40.287 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:40.378 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:40.627 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:40.673 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 565.6670ms
2021-02-03 14:18:42.611 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:42.625 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000003": started reading request body.
2021-02-03 14:18:42.626 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000003": done reading request body.
2021-02-03 14:18:42.627 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:42.628 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:42.628 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:42.629 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:42.629 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:42.630 +08:00 [DBG] Start token request.
2021-02-03 14:18:42.630 +08:00 [DBG] Start client validation
2021-02-03 14:18:42.631 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:42.631 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:42.631 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:42.632 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:42.632 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:42.633 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:42.633 +08:00 [DBG] Client validation success
2021-02-03 14:18:42.633 +08:00 [DBG] Start token request validation
2021-02-03 14:18:42.634 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:42.636 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:42.641 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:42.682 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 70.5002ms
2021-02-03 14:18:44.484 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:44.488 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000004": started reading request body.
2021-02-03 14:18:44.490 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000004": done reading request body.
2021-02-03 14:18:44.514 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:44.517 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:44.523 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:44.529 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:44.531 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:44.532 +08:00 [DBG] Start token request.
2021-02-03 14:18:44.532 +08:00 [DBG] Start client validation
2021-02-03 14:18:44.533 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:44.533 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:44.534 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:44.534 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:44.537 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:44.538 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:44.539 +08:00 [DBG] Client validation success
2021-02-03 14:18:44.539 +08:00 [DBG] Start token request validation
2021-02-03 14:18:44.540 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:44.540 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:44.544 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:44.564 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 79.4135ms
2021-02-03 14:18:45.297 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:45.301 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000005": started reading request body.
2021-02-03 14:18:45.303 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000005": done reading request body.
2021-02-03 14:18:45.305 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:45.310 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:45.311 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:45.311 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:45.314 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:45.315 +08:00 [DBG] Start token request.
2021-02-03 14:18:45.315 +08:00 [DBG] Start client validation
2021-02-03 14:18:45.316 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:45.316 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:45.317 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:45.319 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:45.320 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:45.321 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:45.321 +08:00 [DBG] Client validation success
2021-02-03 14:18:45.322 +08:00 [DBG] Start token request validation
2021-02-03 14:18:45.322 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:45.323 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:45.326 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:45.334 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 36.4435ms
2021-02-03 14:18:46.046 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:46.051 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000006": started reading request body.
2021-02-03 14:18:46.053 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000006": done reading request body.
2021-02-03 14:18:46.056 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:46.081 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:46.083 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:46.084 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:46.086 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:46.087 +08:00 [DBG] Start token request.
2021-02-03 14:18:46.088 +08:00 [DBG] Start client validation
2021-02-03 14:18:46.088 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:46.089 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:46.089 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:46.090 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:46.091 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:46.091 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:46.092 +08:00 [DBG] Client validation success
2021-02-03 14:18:46.092 +08:00 [DBG] Start token request validation
2021-02-03 14:18:46.093 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:46.093 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:46.096 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:46.098 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 51.8023ms
2021-02-03 14:18:47.560 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:18:47.563 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000007": started reading request body.
2021-02-03 14:18:47.564 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000007": done reading request body.
2021-02-03 14:18:47.566 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:47.568 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:18:47.569 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:18:47.572 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:18:47.578 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:18:47.579 +08:00 [DBG] Start token request.
2021-02-03 14:18:47.580 +08:00 [DBG] Start client validation
2021-02-03 14:18:47.580 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:18:47.581 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:18:47.581 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:18:47.588 +08:00 [DBG] Secret id found: client
2021-02-03 14:18:47.588 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:18:47.590 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:18:47.590 +08:00 [DBG] Client validation success
2021-02-03 14:18:47.593 +08:00 [DBG] Start token request validation
2021-02-03 14:18:47.596 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:18:47.597 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:18:47.599 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:18:47.602 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 41.9422ms
2021-02-03 14:19:34.729 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:19:34.733 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000008": started reading request body.
2021-02-03 14:19:34.733 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000008": done reading request body.
2021-02-03 14:19:34.734 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:19:34.735 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:19:34.735 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:19:34.736 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:19:34.737 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:19:34.738 +08:00 [DBG] Start token request.
2021-02-03 14:19:34.738 +08:00 [DBG] Start client validation
2021-02-03 14:19:34.739 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:19:34.739 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:19:34.740 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:19:34.740 +08:00 [DBG] Secret id found: client_A
2021-02-03 14:19:34.740 +08:00 [DBG] client configuration validation for client client_A succeeded.
2021-02-03 14:19:34.741 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:19:34.741 +08:00 [DBG] Client validation success
2021-02-03 14:19:34.742 +08:00 [DBG] Start token request validation
2021-02-03 14:19:34.745 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:19:34.768 +08:00 [DBG] client_A credentials token request validation success
2021-02-03 14:19:34.770 +08:00 [INF] Token request validation success
{"ClientId":"client_A","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client_A","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:19:34.796 +08:00 [DBG] Getting claims for access token for client: client_A
2021-02-03 14:19:34.876 +08:00 [DBG] Token request success.
2021-02-03 14:19:34.881 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:19:34.882 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 200 - application/json;+charset=UTF-8 153.6484ms
2021-02-03 14:19:38.869 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158
2021-02-03 14:19:38.885 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000009": started reading request body.
2021-02-03 14:19:38.886 +08:00 [DBG] Connection id "0HM681E682FTP", Request id "0HM681E682FTP:00000009": done reading request body.
2021-02-03 14:19:38.892 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:19:38.896 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:19:38.897 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:19:38.899 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:19:38.900 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:19:38.901 +08:00 [DBG] Start token request.
2021-02-03 14:19:38.902 +08:00 [DBG] Start client validation
2021-02-03 14:19:38.905 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:19:38.906 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:19:38.908 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:19:38.911 +08:00 [DBG] Secret id found: client
2021-02-03 14:19:38.911 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-03 14:19:38.912 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:19:38.912 +08:00 [DBG] Client validation success
2021-02-03 14:19:38.913 +08:00 [DBG] Start token request validation
2021-02-03 14:19:38.913 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:19:38.913 +08:00 [ERR] ["client"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1","client_Id":"client","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:19:38.916 +08:00 [DBG] Connection id "0HM681E682FTP" completed keep alive response.
2021-02-03 14:19:38.918 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 158 - 400 - application/json;+charset=UTF-8 49.0770ms
2021-02-03 14:20:23.080 +08:00 [DBG] Hosting starting
2021-02-03 14:20:23.237 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:20:23.244 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:20:23.246 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:20:23.246 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:20:23.246 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:20:23.247 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:20:23.247 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:20:23.492 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:20:23.501 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:20:23.513 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:20:23.532 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:20:23.556 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:20:23.562 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:20:23.563 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:20:23.567 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:20:23.570 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:20:23.573 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:20:23.577 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:20:23.651 +08:00 [DBG] Hosting started
2021-02-03 14:20:23.655 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:20:31.325 +08:00 [DBG] Connection id "0HM681F7DARO6" accepted.
2021-02-03 14:20:31.329 +08:00 [DBG] Connection id "0HM681F7DARO6" started.
2021-02-03 14:20:31.372 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:20:31.381 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:20:31.394 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000002": started reading request body.
2021-02-03 14:20:31.396 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000002": done reading request body.
2021-02-03 14:20:31.412 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:20:31.413 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:20:31.414 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:20:31.414 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:20:31.414 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:20:31.415 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:20:31.415 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:20:31.420 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:31.425 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:31.437 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:31.446 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:31.447 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:31.452 +08:00 [DBG] Start token request.
2021-02-03 14:20:31.453 +08:00 [DBG] Start client validation
2021-02-03 14:20:31.457 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:31.458 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:31.472 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:31.473 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:31.480 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:31.487 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:31.488 +08:00 [DBG] Client validation success
2021-02-03 14:20:31.495 +08:00 [DBG] Start token request validation
2021-02-03 14:20:31.500 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:20:31.514 +08:00 [ERR] ["client1"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client1","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:31.554 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:31.559 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 400 - application/json;+charset=UTF-8 189.5235ms
2021-02-03 14:20:34.264 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:20:34.266 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000003": started reading request body.
2021-02-03 14:20:34.268 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000003": done reading request body.
2021-02-03 14:20:34.277 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:34.284 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:34.286 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:34.287 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:34.288 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:34.289 +08:00 [DBG] Start token request.
2021-02-03 14:20:34.289 +08:00 [DBG] Start client validation
2021-02-03 14:20:34.290 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:34.290 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:34.291 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:34.292 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:34.293 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:34.294 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:34.296 +08:00 [DBG] Client validation success
2021-02-03 14:20:34.297 +08:00 [DBG] Start token request validation
2021-02-03 14:20:34.299 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:20:34.300 +08:00 [ERR] ["client1"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client1","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:34.304 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:34.308 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 400 - application/json;+charset=UTF-8 44.2750ms
2021-02-03 14:20:34.966 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:20:34.969 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000004": started reading request body.
2021-02-03 14:20:34.970 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000004": done reading request body.
2021-02-03 14:20:34.988 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:34.998 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:34.999 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:35.005 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:35.007 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:35.008 +08:00 [DBG] Start token request.
2021-02-03 14:20:35.008 +08:00 [DBG] Start client validation
2021-02-03 14:20:35.009 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:35.009 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:35.010 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:35.010 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:35.011 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:35.013 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:35.013 +08:00 [DBG] Client validation success
2021-02-03 14:20:35.014 +08:00 [DBG] Start token request validation
2021-02-03 14:20:35.014 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:20:35.015 +08:00 [ERR] ["client1"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client1","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:35.021 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:35.024 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 400 - application/json;+charset=UTF-8 58.1662ms
2021-02-03 14:20:36.459 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:20:36.467 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000005": started reading request body.
2021-02-03 14:20:36.468 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000005": done reading request body.
2021-02-03 14:20:36.470 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:36.481 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:36.482 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:36.483 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:36.484 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:36.485 +08:00 [DBG] Start token request.
2021-02-03 14:20:36.488 +08:00 [DBG] Start client validation
2021-02-03 14:20:36.488 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:36.489 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:36.489 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:36.492 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:36.492 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:36.493 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:36.493 +08:00 [DBG] Client validation success
2021-02-03 14:20:36.493 +08:00 [DBG] Start token request validation
2021-02-03 14:20:36.494 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:20:36.495 +08:00 [ERR] ["client1"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client1","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:36.500 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:36.511 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 400 - application/json;+charset=UTF-8 51.6581ms
2021-02-03 14:20:37.209 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160
2021-02-03 14:20:37.225 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000006": started reading request body.
2021-02-03 14:20:37.226 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000006": done reading request body.
2021-02-03 14:20:37.229 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:37.232 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:37.233 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:37.234 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:37.236 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:37.237 +08:00 [DBG] Start token request.
2021-02-03 14:20:37.237 +08:00 [DBG] Start client validation
2021-02-03 14:20:37.238 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:37.238 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:37.239 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:37.241 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:37.241 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:37.243 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:37.252 +08:00 [DBG] Client validation success
2021-02-03 14:20:37.253 +08:00 [DBG] Start token request validation
2021-02-03 14:20:37.255 +08:00 [DBG] Start client credentials token request validation
2021-02-03 14:20:37.261 +08:00 [ERR] ["client1"] not authorized for client credentials flow, check the AllowedGrantTypes of the client, request details: {"ClientId":"client1","ClientName":null,"GrantType":"client_credentials","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:37.356 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:37.373 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 160 - 400 - application/json;+charset=UTF-8 163.7855ms
2021-02-03 14:20:48.033 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 163
2021-02-03 14:20:48.065 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000007": started reading request body.
2021-02-03 14:20:48.076 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000007": done reading request body.
2021-02-03 14:20:48.083 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:48.087 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:20:48.088 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:20:48.089 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:20:48.092 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:20:48.093 +08:00 [DBG] Start token request.
2021-02-03 14:20:48.094 +08:00 [DBG] Start client validation
2021-02-03 14:20:48.094 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:20:48.095 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:20:48.102 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:20:48.109 +08:00 [DBG] Secret id found: client1
2021-02-03 14:20:48.110 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:20:48.115 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:20:48.115 +08:00 [DBG] Client validation success
2021-02-03 14:20:48.116 +08:00 [DBG] Start token request validation
2021-02-03 14:20:48.122 +08:00 [DBG] Start validation of custom grant token request
2021-02-03 14:20:48.122 +08:00 [ERR] ["client1"] does not have the custom grant type in the allowed list, therefore requested grant is not allowed, request details: {"ClientId":"client1","ClientName":null,"GrantType":"ResourceOwnerPassword","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"ResourceOwnerPassword","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:20:48.125 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:20:48.126 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 163 - 400 - application/json;+charset=UTF-8 92.9680ms
2021-02-03 14:22:02.188 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150
2021-02-03 14:22:02.196 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000008": started reading request body.
2021-02-03 14:22:02.197 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000008": done reading request body.
2021-02-03 14:22:02.197 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:22:02.198 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:22:02.199 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:22:02.200 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:22:02.200 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:22:02.201 +08:00 [DBG] Start token request.
2021-02-03 14:22:02.201 +08:00 [DBG] Start client validation
2021-02-03 14:22:02.202 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:22:02.202 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:22:02.202 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:22:02.203 +08:00 [DBG] Secret id found: client1
2021-02-03 14:22:02.205 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:22:02.206 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:22:02.206 +08:00 [DBG] Client validation success
2021-02-03 14:22:02.207 +08:00 [DBG] Start token request validation
2021-02-03 14:22:02.207 +08:00 [DBG] Start validation of custom grant token request
2021-02-03 14:22:02.207 +08:00 [ERR] ["client1"] does not have the custom grant type in the allowed list, therefore requested grant is not allowed, request details: {"ClientId":"client1","ClientName":null,"GrantType":"Password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"Password","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:22:02.209 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:22:02.210 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150 - 400 - application/json;+charset=UTF-8 22.4613ms
2021-02-03 14:22:03.586 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150
2021-02-03 14:22:03.587 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000009": started reading request body.
2021-02-03 14:22:03.588 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:00000009": done reading request body.
2021-02-03 14:22:03.589 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:22:03.590 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:22:03.590 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:22:03.591 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:22:03.592 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:22:03.592 +08:00 [DBG] Start token request.
2021-02-03 14:22:03.594 +08:00 [DBG] Start client validation
2021-02-03 14:22:03.594 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:22:03.595 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:22:03.595 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:22:03.596 +08:00 [DBG] Secret id found: client1
2021-02-03 14:22:03.601 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:22:03.603 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:22:03.603 +08:00 [DBG] Client validation success
2021-02-03 14:22:03.604 +08:00 [DBG] Start token request validation
2021-02-03 14:22:03.605 +08:00 [DBG] Start validation of custom grant token request
2021-02-03 14:22:03.605 +08:00 [ERR] ["client1"] does not have the custom grant type in the allowed list, therefore requested grant is not allowed, request details: {"ClientId":"client1","ClientName":null,"GrantType":"Password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"Password","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:22:03.608 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:22:03.609 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150 - 400 - application/json;+charset=UTF-8 22.9418ms
2021-02-03 14:23:51.590 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150
2021-02-03 14:23:51.592 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000A": started reading request body.
2021-02-03 14:23:51.593 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000A": done reading request body.
2021-02-03 14:23:51.597 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:23:51.599 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:23:51.600 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:23:51.601 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:23:51.601 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:23:51.602 +08:00 [DBG] Start token request.
2021-02-03 14:23:51.602 +08:00 [DBG] Start client validation
2021-02-03 14:23:51.602 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:23:51.603 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:23:51.604 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:23:51.609 +08:00 [DBG] Secret id found: client1
2021-02-03 14:23:51.609 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:23:51.610 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:23:51.610 +08:00 [DBG] Client validation success
2021-02-03 14:23:51.611 +08:00 [DBG] Start token request validation
2021-02-03 14:23:51.613 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:23:51.626 +08:00 [ERR] Requested scope not allowed: api2
2021-02-03 14:23:51.626 +08:00 [ERR] {"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","pwd":"bbb","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:23:51.629 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:23:51.630 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 150 - 400 - application/json;+charset=UTF-8 39.7377ms
2021-02-03 14:24:09.433 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155
2021-02-03 14:24:09.439 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000B": started reading request body.
2021-02-03 14:24:09.440 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000B": done reading request body.
2021-02-03 14:24:09.441 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:09.447 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:09.449 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:24:09.450 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:24:09.451 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:24:09.452 +08:00 [DBG] Start token request.
2021-02-03 14:24:09.455 +08:00 [DBG] Start client validation
2021-02-03 14:24:09.455 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:24:09.456 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:24:09.457 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:24:09.458 +08:00 [DBG] Secret id found: client1
2021-02-03 14:24:09.458 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:24:09.460 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:24:09.460 +08:00 [DBG] Client validation success
2021-02-03 14:24:09.461 +08:00 [DBG] Start token request validation
2021-02-03 14:24:09.462 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:24:09.463 +08:00 [ERR] Requested scope not allowed: api2
2021-02-03 14:24:09.464 +08:00 [ERR] {"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api2","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","password":"***REDACTED***","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:24:09.473 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:24:09.474 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155 - 400 - application/json;+charset=UTF-8 40.5886ms
2021-02-03 14:24:18.272 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155
2021-02-03 14:24:18.275 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000C": started reading request body.
2021-02-03 14:24:18.287 +08:00 [DBG] Connection id "0HM681F7DARO6", Request id "0HM681F7DARO6:0000000C": done reading request body.
2021-02-03 14:24:18.288 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:18.291 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:18.292 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:24:18.294 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:24:18.294 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:24:18.295 +08:00 [DBG] Start token request.
2021-02-03 14:24:18.296 +08:00 [DBG] Start client validation
2021-02-03 14:24:18.296 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:24:18.297 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:24:18.297 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:24:18.299 +08:00 [DBG] Secret id found: client1
2021-02-03 14:24:18.300 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:24:18.301 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:24:18.301 +08:00 [DBG] Client validation success
2021-02-03 14:24:18.302 +08:00 [DBG] Start token request validation
2021-02-03 14:24:18.302 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:24:18.305 +08:00 [ERR] Requested scope not allowed: api1
2021-02-03 14:24:18.308 +08:00 [ERR] {"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api1","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","password":"***REDACTED***","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:24:18.315 +08:00 [DBG] Connection id "0HM681F7DARO6" completed keep alive response.
2021-02-03 14:24:18.319 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155 - 400 - application/json;+charset=UTF-8 46.7536ms
2021-02-03 14:24:28.652 +08:00 [DBG] Hosting starting
2021-02-03 14:24:28.727 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-03 14:24:28.732 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-03 14:24:28.733 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-03 14:24:28.733 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-03 14:24:28.733 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-03 14:24:28.734 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-03 14:24:28.734 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-03 14:24:28.848 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-03 14:24:28.857 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-197f24f7-b435-427a-93a3-feae6f19b4bf.xml'.
2021-02-03 14:24:28.880 +08:00 [DBG] Found key "197f24f7-b435-427a-93a3-feae6f19b4bf".
2021-02-03 14:24:28.898 +08:00 [DBG] Considering key "197f24f7-b435-427a-93a3-feae6f19b4bf" with expiration date "2021-03-25T10:41:37.3300048+00:00" as default key.
2021-02-03 14:24:28.925 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:24:28.928 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-03 14:24:28.931 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-03 14:24:28.935 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-03 14:24:28.938 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-03 14:24:28.941 +08:00 [DBG] Using key "197f24f7-b435-427a-93a3-feae6f19b4bf" as the default key.
2021-02-03 14:24:28.943 +08:00 [DBG] Key ring with default key "197f24f7-b435-427a-93a3-feae6f19b4bf" was loaded during application startup.
2021-02-03 14:24:29.013 +08:00 [DBG] Hosting started
2021-02-03 14:24:29.015 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-03 14:24:33.827 +08:00 [DBG] Connection id "0HM681HFM0M4U" accepted.
2021-02-03 14:24:33.829 +08:00 [DBG] Connection id "0HM681HFM0M4U" started.
2021-02-03 14:24:33.866 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155
2021-02-03 14:24:33.870 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-03 14:24:33.884 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000002": started reading request body.
2021-02-03 14:24:33.885 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000002": done reading request body.
2021-02-03 14:24:33.899 +08:00 [DBG] Login Url: /Account/Login
2021-02-03 14:24:33.899 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-03 14:24:33.900 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-03 14:24:33.900 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-03 14:24:33.900 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-03 14:24:33.901 +08:00 [DBG] Error Url: /home/error
2021-02-03 14:24:33.901 +08:00 [DBG] Error Id Parameter: errorId
2021-02-03 14:24:33.905 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:33.911 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:24:33.921 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:24:33.928 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:24:33.930 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:24:33.933 +08:00 [DBG] Start token request.
2021-02-03 14:24:33.935 +08:00 [DBG] Start client validation
2021-02-03 14:24:33.938 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:24:33.940 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:24:33.952 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:24:33.952 +08:00 [DBG] Secret id found: client1
2021-02-03 14:24:33.959 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:24:33.968 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:24:33.968 +08:00 [DBG] Client validation success
2021-02-03 14:24:33.975 +08:00 [DBG] Start token request validation
2021-02-03 14:24:33.983 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:24:57.863 +08:00 [DBG] Resource owner password token request validation success.
2021-02-03 14:24:57.875 +08:00 [INF] Token request validation success
{"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"aaa","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api1","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","password":"***REDACTED***","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:24:57.892 +08:00 [DBG] Getting claims for access token for client: client1
2021-02-03 14:24:57.893 +08:00 [DBG] Getting claims for access token for subject: aaa
2021-02-03 14:25:17.061 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-02-03 14:25:17.472 +08:00 [DBG] Token request success.
2021-02-03 14:25:21.505 +08:00 [DBG] Connection id "0HM681HFM0M4U" completed keep alive response.
2021-02-03 14:25:21.527 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155 - 200 - application/json;+charset=UTF-8 47662.4898ms
2021-02-03 14:25:31.652 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155
2021-02-03 14:25:31.653 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000003": started reading request body.
2021-02-03 14:25:31.654 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000003": done reading request body.
2021-02-03 14:25:31.655 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:25:31.663 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:25:31.664 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:25:31.665 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:25:31.666 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:25:31.667 +08:00 [DBG] Start token request.
2021-02-03 14:25:31.667 +08:00 [DBG] Start client validation
2021-02-03 14:25:31.667 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:25:31.668 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:25:31.668 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:25:31.669 +08:00 [DBG] Secret id found: client1
2021-02-03 14:25:31.669 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:25:31.670 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:25:31.670 +08:00 [DBG] Client validation success
2021-02-03 14:25:31.674 +08:00 [DBG] Start token request validation
2021-02-03 14:25:31.675 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:26:12.665 +08:00 [DBG] Resource owner password token request validation success.
2021-02-03 14:26:12.723 +08:00 [INF] Token request validation success
{"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"aaa","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api1","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","password":"***REDACTED***","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:26:12.834 +08:00 [DBG] Getting claims for access token for client: client1
2021-02-03 14:26:12.836 +08:00 [DBG] Getting claims for access token for subject: aaa
2021-02-03 14:26:34.599 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-02-03 14:26:34.606 +08:00 [DBG] Token request success.
2021-02-03 14:26:34.607 +08:00 [DBG] Connection id "0HM681HFM0M4U" completed keep alive response.
2021-02-03 14:26:34.609 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155 - 200 - application/json;+charset=UTF-8 62957.5910ms
2021-02-03 14:26:54.249 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155
2021-02-03 14:26:54.251 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000004": started reading request body.
2021-02-03 14:26:54.252 +08:00 [DBG] Connection id "0HM681HFM0M4U", Request id "0HM681HFM0M4U:00000004": done reading request body.
2021-02-03 14:26:54.255 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:26:54.257 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-03 14:26:54.258 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-03 14:26:54.267 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-03 14:26:54.269 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-03 14:26:54.269 +08:00 [DBG] Start token request.
2021-02-03 14:26:54.270 +08:00 [DBG] Start client validation
2021-02-03 14:26:54.270 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-03 14:26:54.271 +08:00 [DBG] Start parsing for secret in post body
2021-02-03 14:26:54.271 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-03 14:26:54.271 +08:00 [DBG] Secret id found: client1
2021-02-03 14:26:54.272 +08:00 [DBG] client configuration validation for client client1 succeeded.
2021-02-03 14:26:54.272 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-03 14:26:54.273 +08:00 [DBG] Client validation success
2021-02-03 14:26:54.273 +08:00 [DBG] Start token request validation
2021-02-03 14:26:54.273 +08:00 [DBG] Start resource owner password token request validation
2021-02-03 14:27:07.139 +08:00 [DBG] Resource owner password token request validation success.
2021-02-03 14:27:07.142 +08:00 [INF] Token request validation success
{"ClientId":"client1","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"aaa","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","scope":"api1","client_Id":"client1","client_secret":"***REDACTED***","username":"aaa","password":"***REDACTED***","prj":"项目名称类型"},"$type":"TokenRequestValidationLog"}
2021-02-03 14:27:07.145 +08:00 [DBG] Getting claims for access token for client: client1
2021-02-03 14:27:07.145 +08:00 [DBG] Getting claims for access token for subject: aaa
2021-02-03 14:27:08.128 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-02-03 14:27:08.140 +08:00 [DBG] Token request success.
2021-02-03 14:27:08.140 +08:00 [DBG] Connection id "0HM681HFM0M4U" completed keep alive response.
2021-02-03 14:27:08.141 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:1221/connect/token application/x-www-form-urlencoded 155 - 200 - application/json;+charset=UTF-8 13891.6049ms
2021-02-05 16:25:25.321 +08:00 [DBG] Hosting starting
2021-02-05 16:25:25.364 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-05 16:25:25.370 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-05 16:25:25.370 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-05 16:25:25.371 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-05 16:25:25.371 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-05 16:25:25.371 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-05 16:25:25.371 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-05 16:25:25.405 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-05 16:25:25.409 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-02-05 16:25:25.417 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-02-05 16:25:25.429 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-02-05 16:25:25.446 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-05 16:25:25.449 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-05 16:25:25.450 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-05 16:25:25.453 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-05 16:25:25.455 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-05 16:25:25.457 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-02-05 16:25:25.457 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-02-05 16:25:25.501 +08:00 [DBG] Hosting started
2021-02-05 16:25:25.501 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-05 16:25:36.323 +08:00 [DBG] Connection id "0HM69LUEFPN6O" accepted.
2021-02-05 16:25:36.323 +08:00 [DBG] Connection id "0HM69LUEFPN6O" started.
2021-02-05 16:25:36.347 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:5221/connect/token application/x-www-form-urlencoded 108
2021-02-05 16:25:36.349 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-05 16:25:36.359 +08:00 [DBG] Login Url: /Account/Login
2021-02-05 16:25:36.359 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-05 16:25:36.359 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-05 16:25:36.360 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-05 16:25:36.360 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-05 16:25:36.360 +08:00 [DBG] Error Url: /home/error
2021-02-05 16:25:36.360 +08:00 [DBG] Error Id Parameter: errorId
2021-02-05 16:25:36.363 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-05 16:25:36.367 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-05 16:25:36.374 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-05 16:25:36.379 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-05 16:25:36.379 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-05 16:25:36.382 +08:00 [DBG] Start token request.
2021-02-05 16:25:36.383 +08:00 [DBG] Start client validation
2021-02-05 16:25:36.386 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-05 16:25:36.387 +08:00 [DBG] Start parsing for secret in post body
2021-02-05 16:25:36.393 +08:00 [DBG] Connection id "0HM69LUEFPN6O", Request id "0HM69LUEFPN6O:00000002": started reading request body.
2021-02-05 16:25:36.393 +08:00 [DBG] Connection id "0HM69LUEFPN6O", Request id "0HM69LUEFPN6O:00000002": done reading request body.
2021-02-05 16:25:36.396 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-05 16:25:36.396 +08:00 [DBG] Secret id found: client
2021-02-05 16:25:36.401 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-05 16:25:36.405 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-05 16:25:36.405 +08:00 [DBG] Client validation success
2021-02-05 16:25:36.409 +08:00 [DBG] Start token request validation
2021-02-05 16:25:36.413 +08:00 [DBG] Start resource owner password token request validation
2021-02-05 16:25:36.428 +08:00 [ERR] Username or password missing, request details: []
2021-02-05 16:25:36.453 +08:00 [DBG] Connection id "0HM69LUEFPN6O" completed keep alive response.
2021-02-05 16:25:36.455 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:5221/connect/token application/x-www-form-urlencoded 108 - 400 - application/json;+charset=UTF-8 109.4382ms
2021-02-05 16:26:44.731 +08:00 [INF] Request starting HTTP/1.1 POST http://127.0.0.1:5221/connect/token application/x-www-form-urlencoded 113
2021-02-05 16:26:44.735 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-05 16:26:44.742 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-05 16:26:44.747 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-02-05 16:26:44.748 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-02-05 16:26:44.748 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-02-05 16:26:44.750 +08:00 [DBG] Start token request.
2021-02-05 16:26:44.750 +08:00 [DBG] Start client validation
2021-02-05 16:26:44.750 +08:00 [DBG] Start parsing Basic Authentication secret
2021-02-05 16:26:44.750 +08:00 [DBG] Start parsing for secret in post body
2021-02-05 16:26:44.750 +08:00 [DBG] Connection id "0HM69LUEFPN6O", Request id "0HM69LUEFPN6O:00000003": started reading request body.
2021-02-05 16:26:44.751 +08:00 [DBG] Connection id "0HM69LUEFPN6O", Request id "0HM69LUEFPN6O:00000003": done reading request body.
2021-02-05 16:26:44.751 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-02-05 16:26:44.751 +08:00 [DBG] Secret id found: client
2021-02-05 16:26:44.753 +08:00 [DBG] client configuration validation for client client succeeded.
2021-02-05 16:26:44.754 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-02-05 16:26:44.755 +08:00 [DBG] Client validation success
2021-02-05 16:26:44.755 +08:00 [DBG] Start token request validation
2021-02-05 16:26:44.755 +08:00 [DBG] Start resource owner password token request validation
2021-02-05 16:27:01.621 +08:00 [INF] User authentication failed: ["invalid custom credential"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"admin","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"admin","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-02-05 16:27:01.625 +08:00 [DBG] Connection id "0HM69LUEFPN6O" completed keep alive response.
2021-02-05 16:27:01.626 +08:00 [INF] Request finished HTTP/1.1 POST http://127.0.0.1:5221/connect/token application/x-www-form-urlencoded 113 - 400 - application/json;+charset=UTF-8 16894.8526ms
2021-02-18 09:09:49.370 +08:00 [DBG] Hosting starting
2021-02-18 09:09:49.429 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-18 09:09:49.435 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-18 09:09:49.435 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-18 09:09:49.435 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-18 09:09:49.436 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-18 09:09:49.436 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-18 09:09:49.436 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-18 09:09:49.472 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-18 09:09:49.477 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-02-18 09:09:49.487 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-02-18 09:09:49.499 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-02-18 09:09:49.518 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 09:09:49.520 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-18 09:09:49.521 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 09:09:49.524 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-18 09:09:49.525 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-18 09:09:49.528 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-02-18 09:09:49.528 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-02-18 09:09:49.574 +08:00 [DBG] Hosting started
2021-02-18 09:09:49.575 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-18 09:09:49.644 +08:00 [DBG] Hosting shutdown
2021-02-18 09:10:32.690 +08:00 [DBG] Hosting starting
2021-02-18 09:10:32.726 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-18 09:10:32.730 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-18 09:10:32.731 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-18 09:10:32.731 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-18 09:10:32.731 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-18 09:10:32.731 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-18 09:10:32.731 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-18 09:10:32.769 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-18 09:10:32.774 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-02-18 09:10:32.789 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-02-18 09:10:32.802 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-02-18 09:10:32.823 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 09:10:32.825 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-18 09:10:32.826 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 09:10:32.828 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-18 09:10:32.830 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-18 09:10:32.834 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-02-18 09:10:32.835 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-02-18 09:10:32.839 +08:00 [DBG] Hosting started
2021-02-18 09:10:32.839 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-18 09:10:32.873 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44375/ - -
2021-02-18 09:10:32.876 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-02-18 09:10:32.887 +08:00 [DBG] Login Url: /Account/Login
2021-02-18 09:10:32.887 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-02-18 09:10:32.887 +08:00 [DBG] Logout Url: /Account/Logout
2021-02-18 09:10:32.887 +08:00 [DBG] ConsentUrl Url: /consent
2021-02-18 09:10:32.888 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-02-18 09:10:32.888 +08:00 [DBG] Error Url: /home/error
2021-02-18 09:10:32.888 +08:00 [DBG] Error Id Parameter: errorId
2021-02-18 09:10:32.891 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-18 09:10:32.894 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-18 09:10:32.917 +08:00 [DBG] Connection ID "18302628895834243521" disconnecting.
2021-02-18 09:10:32.919 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44375/ - - - 404 - - 47.0338ms
2021-02-18 09:10:32.984 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44375/favicon.ico - -
2021-02-18 09:10:32.985 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-18 09:10:32.985 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-02-18 09:10:33.025 +08:00 [DBG] Connection ID "17942340942824473145" disconnecting.
2021-02-18 09:10:33.025 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44375/favicon.ico - - - 404 - - 40.6440ms
2021-02-18 10:10:23.711 +08:00 [DBG] Hosting starting
2021-02-18 10:10:23.757 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-18 10:10:23.763 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-18 10:10:23.764 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-18 10:10:23.764 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-18 10:10:23.764 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-18 10:10:23.764 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-18 10:10:23.765 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-18 10:10:23.801 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-18 10:10:23.805 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-02-18 10:10:23.815 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-02-18 10:10:23.827 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-02-18 10:10:23.846 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 10:10:23.849 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-18 10:10:23.850 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 10:10:23.853 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-18 10:10:23.856 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-18 10:10:23.858 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-02-18 10:10:23.859 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-02-18 10:10:23.917 +08:00 [DBG] Hosting started
2021-02-18 10:10:23.917 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-18 10:11:45.861 +08:00 [DBG] Hosting starting
2021-02-18 10:11:45.906 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-02-18 10:11:45.911 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-02-18 10:11:45.913 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-02-18 10:11:45.913 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-02-18 10:11:45.913 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-02-18 10:11:45.913 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-02-18 10:11:45.913 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-02-18 10:11:45.957 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-18 10:11:45.962 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-02-18 10:11:45.970 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-02-18 10:11:45.984 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-02-18 10:11:46.004 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 10:11:46.008 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-02-18 10:11:46.009 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-02-18 10:11:46.013 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-02-18 10:11:46.016 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-02-18 10:11:46.018 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-02-18 10:11:46.019 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-02-18 10:11:46.066 +08:00 [DBG] Hosting started
2021-02-18 10:11:46.066 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-02-18 10:11:51.305 +08:00 [DBG] Hosting shutdown
2021-03-08 18:38:27.094 +08:00 [DBG] Hosting starting
2021-03-08 18:38:27.144 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 18:38:27.151 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 18:38:27.152 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 18:38:27.152 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 18:38:27.152 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 18:38:27.153 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 18:38:27.153 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 18:38:27.192 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 18:38:27.197 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 18:38:27.206 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 18:38:27.220 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 18:38:27.236 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:38:27.239 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 18:38:27.240 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:38:27.243 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 18:38:27.245 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 18:38:27.247 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 18:38:27.248 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 18:38:27.292 +08:00 [DBG] Hosting started
2021-03-08 18:38:27.293 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 18:38:41.698 +08:00 [DBG] Connection id "0HM723PBN61AN" received FIN.
2021-03-08 18:38:41.707 +08:00 [DBG] Connection id "0HM723PBN61AN" accepted.
2021-03-08 18:38:41.710 +08:00 [DBG] Connection id "0HM723PBN61AN" started.
2021-03-08 18:38:41.712 +08:00 [DBG] Connection id "0HM723PBN61AO" accepted.
2021-03-08 18:38:41.712 +08:00 [DBG] Connection id "0HM723PBN61AO" started.
2021-03-08 18:38:41.719 +08:00 [DBG] Connection id "0HM723PBN61AN" sending FIN because: "The client closed the connection."
2021-03-08 18:38:41.721 +08:00 [DBG] Connection id "0HM723PBN61AN" disconnecting.
2021-03-08 18:38:41.722 +08:00 [DBG] Connection id "0HM723PBN61AN" stopped.
2021-03-08 18:38:41.743 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:38:41.745 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 18:38:41.758 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 18:38:41.758 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 18:38:41.759 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 18:38:41.759 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 18:38:41.759 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 18:38:41.759 +08:00 [DBG] Error Url: /home/error
2021-03-08 18:38:41.760 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 18:38:41.763 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:38:41.768 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:38:41.777 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:38:41.783 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:38:41.783 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:38:41.786 +08:00 [DBG] Start token request.
2021-03-08 18:38:41.787 +08:00 [DBG] Start client validation
2021-03-08 18:38:41.790 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:38:41.791 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:38:41.798 +08:00 [DBG] Connection id "0HM723PBN61AO", Request id "0HM723PBN61AO:00000002": started reading request body.
2021-03-08 18:38:41.799 +08:00 [DBG] Connection id "0HM723PBN61AO", Request id "0HM723PBN61AO:00000002": done reading request body.
2021-03-08 18:38:41.801 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:38:41.801 +08:00 [DBG] Secret id found: client
2021-03-08 18:38:41.806 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:38:41.811 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:38:41.811 +08:00 [DBG] Client validation success
2021-03-08 18:38:41.815 +08:00 [DBG] Start token request validation
2021-03-08 18:38:41.819 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:39:00.057 +08:00 [INF] User authentication failed: ["invalid custom credential"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-08 18:39:00.084 +08:00 [DBG] Connection id "0HM723PBN61AO" completed keep alive response.
2021-03-08 18:39:00.085 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 18343.7413ms
2021-03-08 18:40:26.098 +08:00 [DBG] Hosting starting
2021-03-08 18:40:26.140 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 18:40:26.145 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 18:40:26.146 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 18:40:26.146 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 18:40:26.146 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 18:40:26.146 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 18:40:26.147 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 18:40:26.180 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 18:40:26.184 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 18:40:26.192 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 18:40:26.204 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 18:40:26.222 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:40:26.224 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 18:40:26.225 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:40:26.228 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 18:40:26.229 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 18:40:26.232 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 18:40:26.232 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 18:40:26.272 +08:00 [DBG] Hosting started
2021-03-08 18:40:26.273 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 18:40:34.448 +08:00 [DBG] Connection id "0HM723QDAERBI" received FIN.
2021-03-08 18:40:34.460 +08:00 [DBG] Connection id "0HM723QDAERBI" accepted.
2021-03-08 18:40:34.463 +08:00 [DBG] Connection id "0HM723QDAERBI" started.
2021-03-08 18:40:34.465 +08:00 [DBG] Connection id "0HM723QDAERBJ" accepted.
2021-03-08 18:40:34.465 +08:00 [DBG] Connection id "0HM723QDAERBJ" started.
2021-03-08 18:40:34.469 +08:00 [DBG] Connection id "0HM723QDAERBI" sending FIN because: "The client closed the connection."
2021-03-08 18:40:34.471 +08:00 [DBG] Connection id "0HM723QDAERBI" disconnecting.
2021-03-08 18:40:34.472 +08:00 [DBG] Connection id "0HM723QDAERBI" stopped.
2021-03-08 18:40:34.488 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:40:34.489 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 18:40:34.500 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 18:40:34.500 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 18:40:34.500 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 18:40:34.503 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 18:40:34.503 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 18:40:34.503 +08:00 [DBG] Error Url: /home/error
2021-03-08 18:40:34.503 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 18:40:34.506 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:40:34.510 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:40:34.517 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:40:34.522 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:40:34.522 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:40:34.525 +08:00 [DBG] Start token request.
2021-03-08 18:40:34.526 +08:00 [DBG] Start client validation
2021-03-08 18:40:34.529 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:40:34.529 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:40:34.536 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000002": started reading request body.
2021-03-08 18:40:34.536 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000002": done reading request body.
2021-03-08 18:40:34.539 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:40:34.539 +08:00 [DBG] Secret id found: client
2021-03-08 18:40:34.544 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:40:34.548 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:40:34.550 +08:00 [DBG] Client validation success
2021-03-08 18:40:34.554 +08:00 [DBG] Start token request validation
2021-03-08 18:40:34.557 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:41:10.386 +08:00 [INF] User authentication failed: ["invalid custom credential"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-08 18:41:10.412 +08:00 [DBG] Connection id "0HM723QDAERBJ" completed keep alive response.
2021-03-08 18:41:10.413 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 35926.2742ms
2021-03-08 18:41:31.434 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:41:31.439 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:41:31.442 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:41:31.445 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:41:31.446 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:41:31.446 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:41:31.448 +08:00 [DBG] Start token request.
2021-03-08 18:41:31.448 +08:00 [DBG] Start client validation
2021-03-08 18:41:31.449 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:41:31.449 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:41:31.449 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000003": started reading request body.
2021-03-08 18:41:31.449 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000003": done reading request body.
2021-03-08 18:41:31.450 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:41:31.450 +08:00 [DBG] Secret id found: client
2021-03-08 18:41:31.450 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:41:31.451 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:41:31.451 +08:00 [DBG] Client validation success
2021-03-08 18:41:31.451 +08:00 [DBG] Start token request validation
2021-03-08 18:41:31.451 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:41:34.713 +08:00 [INF] User authentication failed: ["invalid custom credential"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-08 18:41:34.715 +08:00 [DBG] Connection id "0HM723QDAERBJ" completed keep alive response.
2021-03-08 18:41:34.715 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 3281.4094ms
2021-03-08 18:41:37.606 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:41:37.610 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:41:37.611 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:41:37.611 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:41:37.616 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:41:37.617 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:41:37.617 +08:00 [DBG] Start token request.
2021-03-08 18:41:37.617 +08:00 [DBG] Start client validation
2021-03-08 18:41:37.618 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:41:37.618 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:41:37.618 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000004": started reading request body.
2021-03-08 18:41:37.618 +08:00 [DBG] Connection id "0HM723QDAERBJ", Request id "0HM723QDAERBJ:00000004": done reading request body.
2021-03-08 18:41:37.619 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:41:37.619 +08:00 [DBG] Secret id found: client
2021-03-08 18:41:37.619 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:41:37.620 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:41:37.620 +08:00 [DBG] Client validation success
2021-03-08 18:41:37.620 +08:00 [DBG] Start token request validation
2021-03-08 18:41:37.620 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:50:43.277 +08:00 [DBG] Hosting starting
2021-03-08 18:50:43.323 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 18:50:43.329 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 18:50:43.330 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 18:50:43.330 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 18:50:43.330 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 18:50:43.330 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 18:50:43.330 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 18:50:43.365 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 18:50:43.371 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 18:50:43.379 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 18:50:43.390 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 18:50:43.408 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:50:43.410 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 18:50:43.411 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:50:43.414 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 18:50:43.416 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 18:50:43.418 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 18:50:43.419 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 18:50:43.459 +08:00 [DBG] Hosting started
2021-03-08 18:50:43.459 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 18:50:46.614 +08:00 [DBG] Connection id "0HM72403OH3Q0" received FIN.
2021-03-08 18:50:46.623 +08:00 [DBG] Connection id "0HM72403OH3Q0" accepted.
2021-03-08 18:50:46.626 +08:00 [DBG] Connection id "0HM72403OH3Q0" started.
2021-03-08 18:50:46.628 +08:00 [DBG] Connection id "0HM72403OH3Q1" accepted.
2021-03-08 18:50:46.628 +08:00 [DBG] Connection id "0HM72403OH3Q1" started.
2021-03-08 18:50:46.632 +08:00 [DBG] Connection id "0HM72403OH3Q0" sending FIN because: "The client closed the connection."
2021-03-08 18:50:46.634 +08:00 [DBG] Connection id "0HM72403OH3Q0" disconnecting.
2021-03-08 18:50:46.634 +08:00 [DBG] Connection id "0HM72403OH3Q0" stopped.
2021-03-08 18:50:46.651 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:50:46.652 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 18:50:46.663 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 18:50:46.663 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 18:50:46.663 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 18:50:46.664 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 18:50:46.664 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 18:50:46.664 +08:00 [DBG] Error Url: /home/error
2021-03-08 18:50:46.664 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 18:50:46.667 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:50:46.670 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:50:46.677 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:50:46.683 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:50:46.684 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:50:46.687 +08:00 [DBG] Start token request.
2021-03-08 18:50:46.688 +08:00 [DBG] Start client validation
2021-03-08 18:50:46.690 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:50:46.691 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:50:46.697 +08:00 [DBG] Connection id "0HM72403OH3Q1", Request id "0HM72403OH3Q1:00000002": started reading request body.
2021-03-08 18:50:46.698 +08:00 [DBG] Connection id "0HM72403OH3Q1", Request id "0HM72403OH3Q1:00000002": done reading request body.
2021-03-08 18:50:46.700 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:50:46.700 +08:00 [DBG] Secret id found: client
2021-03-08 18:50:46.705 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:50:46.710 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:50:46.710 +08:00 [DBG] Client validation success
2021-03-08 18:50:46.714 +08:00 [DBG] Start token request validation
2021-03-08 18:50:46.717 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:50:55.059 +08:00 [INF] User authentication failed: ["invalid custom credential"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-08 18:50:55.087 +08:00 [DBG] Connection id "0HM72403OH3Q1" completed keep alive response.
2021-03-08 18:50:55.088 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 8438.5015ms
2021-03-08 18:53:26.354 +08:00 [DBG] Hosting starting
2021-03-08 18:53:26.397 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 18:53:26.403 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 18:53:26.403 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 18:53:26.403 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 18:53:26.404 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 18:53:26.404 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 18:53:26.404 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 18:53:26.440 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 18:53:26.445 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 18:53:26.453 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 18:53:26.465 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 18:53:26.481 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:53:26.483 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 18:53:26.484 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:53:26.487 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 18:53:26.488 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 18:53:26.490 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 18:53:26.491 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 18:53:26.530 +08:00 [DBG] Hosting started
2021-03-08 18:53:26.530 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 18:53:29.557 +08:00 [DBG] Connection id "0HM7241KAF886" received FIN.
2021-03-08 18:53:29.565 +08:00 [DBG] Connection id "0HM7241KAF886" accepted.
2021-03-08 18:53:29.569 +08:00 [DBG] Connection id "0HM7241KAF886" started.
2021-03-08 18:53:29.571 +08:00 [DBG] Connection id "0HM7241KAF887" accepted.
2021-03-08 18:53:29.571 +08:00 [DBG] Connection id "0HM7241KAF887" started.
2021-03-08 18:53:29.575 +08:00 [DBG] Connection id "0HM7241KAF886" sending FIN because: "The client closed the connection."
2021-03-08 18:53:29.576 +08:00 [DBG] Connection id "0HM7241KAF886" disconnecting.
2021-03-08 18:53:29.577 +08:00 [DBG] Connection id "0HM7241KAF886" stopped.
2021-03-08 18:53:29.593 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:53:29.594 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 18:53:29.604 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 18:53:29.604 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 18:53:29.605 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 18:53:29.605 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 18:53:29.605 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 18:53:29.605 +08:00 [DBG] Error Url: /home/error
2021-03-08 18:53:29.606 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 18:53:29.609 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:53:29.612 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:53:29.620 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:53:29.624 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:53:29.625 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:53:29.629 +08:00 [DBG] Start token request.
2021-03-08 18:53:29.630 +08:00 [DBG] Start client validation
2021-03-08 18:53:29.632 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:53:29.633 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:53:29.639 +08:00 [DBG] Connection id "0HM7241KAF887", Request id "0HM7241KAF887:00000002": started reading request body.
2021-03-08 18:53:29.640 +08:00 [DBG] Connection id "0HM7241KAF887", Request id "0HM7241KAF887:00000002": done reading request body.
2021-03-08 18:53:29.643 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:53:29.643 +08:00 [DBG] Secret id found: client
2021-03-08 18:53:29.647 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:53:29.652 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:53:29.652 +08:00 [DBG] Client validation success
2021-03-08 18:53:29.656 +08:00 [DBG] Start token request validation
2021-03-08 18:53:29.659 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 18:53:58.941 +08:00 [DBG] Hosting starting
2021-03-08 18:53:58.989 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 18:53:58.996 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 18:53:58.997 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 18:53:58.997 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 18:53:58.998 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 18:53:58.998 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 18:53:58.998 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 18:53:59.039 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 18:53:59.044 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 18:53:59.053 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 18:53:59.065 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 18:53:59.084 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:53:59.087 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 18:53:59.088 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 18:53:59.091 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 18:53:59.094 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 18:53:59.096 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 18:53:59.097 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 18:53:59.173 +08:00 [DBG] Hosting started
2021-03-08 18:53:59.173 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 18:54:00.928 +08:00 [DBG] Connection id "0HM7241TLKQMG" received FIN.
2021-03-08 18:54:00.940 +08:00 [DBG] Connection id "0HM7241TLKQMG" accepted.
2021-03-08 18:54:00.944 +08:00 [DBG] Connection id "0HM7241TLKQMG" started.
2021-03-08 18:54:00.946 +08:00 [DBG] Connection id "0HM7241TLKQMH" accepted.
2021-03-08 18:54:00.946 +08:00 [DBG] Connection id "0HM7241TLKQMH" started.
2021-03-08 18:54:00.949 +08:00 [DBG] Connection id "0HM7241TLKQMG" sending FIN because: "The client closed the connection."
2021-03-08 18:54:00.951 +08:00 [DBG] Connection id "0HM7241TLKQMG" disconnecting.
2021-03-08 18:54:00.952 +08:00 [DBG] Connection id "0HM7241TLKQMG" stopped.
2021-03-08 18:54:00.967 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 18:54:00.969 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 18:54:00.980 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 18:54:00.980 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 18:54:00.980 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 18:54:00.980 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 18:54:00.981 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 18:54:00.981 +08:00 [DBG] Error Url: /home/error
2021-03-08 18:54:00.981 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 18:54:00.984 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:54:00.987 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 18:54:00.996 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 18:54:01.000 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 18:54:01.001 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 18:54:01.004 +08:00 [DBG] Start token request.
2021-03-08 18:54:01.005 +08:00 [DBG] Start client validation
2021-03-08 18:54:01.008 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 18:54:01.009 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 18:54:01.015 +08:00 [DBG] Connection id "0HM7241TLKQMH", Request id "0HM7241TLKQMH:00000002": started reading request body.
2021-03-08 18:54:01.016 +08:00 [DBG] Connection id "0HM7241TLKQMH", Request id "0HM7241TLKQMH:00000002": done reading request body.
2021-03-08 18:54:01.018 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 18:54:01.018 +08:00 [DBG] Secret id found: client
2021-03-08 18:54:01.022 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 18:54:01.027 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 18:54:01.028 +08:00 [DBG] Client validation success
2021-03-08 18:54:01.031 +08:00 [DBG] Start token request validation
2021-03-08 18:54:01.034 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 19:00:10.900 +08:00 [DBG] Hosting starting
2021-03-08 19:00:10.945 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 19:00:10.950 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 19:00:10.951 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 19:00:10.951 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 19:00:10.952 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 19:00:10.952 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 19:00:10.952 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 19:00:10.988 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 19:00:10.993 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 19:00:11.001 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 19:00:11.014 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 19:00:11.031 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:00:11.034 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 19:00:11.035 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:00:11.038 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 19:00:11.039 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 19:00:11.042 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 19:00:11.044 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 19:00:11.082 +08:00 [DBG] Hosting started
2021-03-08 19:00:11.083 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 19:00:13.889 +08:00 [DBG] Connection id "0HM7245CQFISD" received FIN.
2021-03-08 19:00:13.897 +08:00 [DBG] Connection id "0HM7245CQFISD" accepted.
2021-03-08 19:00:13.901 +08:00 [DBG] Connection id "0HM7245CQFISD" started.
2021-03-08 19:00:13.902 +08:00 [DBG] Connection id "0HM7245CQFISE" accepted.
2021-03-08 19:00:13.903 +08:00 [DBG] Connection id "0HM7245CQFISE" started.
2021-03-08 19:00:13.907 +08:00 [DBG] Connection id "0HM7245CQFISD" sending FIN because: "The client closed the connection."
2021-03-08 19:00:13.909 +08:00 [DBG] Connection id "0HM7245CQFISD" disconnecting.
2021-03-08 19:00:13.910 +08:00 [DBG] Connection id "0HM7245CQFISD" stopped.
2021-03-08 19:00:13.926 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 19:00:13.929 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 19:00:13.940 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 19:00:13.940 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 19:00:13.940 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 19:00:13.941 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 19:00:13.941 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 19:00:13.941 +08:00 [DBG] Error Url: /home/error
2021-03-08 19:00:13.941 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 19:00:13.944 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:00:13.948 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:00:13.955 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 19:00:13.959 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 19:00:13.960 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 19:00:13.963 +08:00 [DBG] Start token request.
2021-03-08 19:00:13.964 +08:00 [DBG] Start client validation
2021-03-08 19:00:13.966 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 19:00:13.967 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 19:00:13.973 +08:00 [DBG] Connection id "0HM7245CQFISE", Request id "0HM7245CQFISE:00000002": started reading request body.
2021-03-08 19:00:13.973 +08:00 [DBG] Connection id "0HM7245CQFISE", Request id "0HM7245CQFISE:00000002": done reading request body.
2021-03-08 19:00:13.976 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 19:00:13.976 +08:00 [DBG] Secret id found: client
2021-03-08 19:00:13.980 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 19:00:13.985 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 19:00:13.985 +08:00 [DBG] Client validation success
2021-03-08 19:00:13.989 +08:00 [DBG] Start token request validation
2021-03-08 19:00:13.992 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 19:00:56.165 +08:00 [DBG] Hosting starting
2021-03-08 19:00:56.207 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 19:00:56.212 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 19:00:56.213 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 19:00:56.213 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 19:00:56.213 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 19:00:56.213 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 19:00:56.214 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 19:00:56.247 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 19:00:56.253 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 19:00:56.261 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 19:00:56.274 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 19:00:56.291 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:00:56.294 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 19:00:56.295 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:00:56.298 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 19:00:56.302 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 19:00:56.305 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 19:00:56.305 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 19:00:56.358 +08:00 [DBG] Hosting started
2021-03-08 19:00:56.358 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 19:00:58.612 +08:00 [DBG] Connection id "0HM7245Q4VUN0" received FIN.
2021-03-08 19:00:58.629 +08:00 [DBG] Connection id "0HM7245Q4VUN0" accepted.
2021-03-08 19:00:58.634 +08:00 [DBG] Connection id "0HM7245Q4VUN0" started.
2021-03-08 19:00:58.637 +08:00 [DBG] Connection id "0HM7245Q4VUN1" accepted.
2021-03-08 19:00:58.637 +08:00 [DBG] Connection id "0HM7245Q4VUN1" started.
2021-03-08 19:00:58.642 +08:00 [DBG] Connection id "0HM7245Q4VUN0" sending FIN because: "The client closed the connection."
2021-03-08 19:00:58.644 +08:00 [DBG] Connection id "0HM7245Q4VUN0" disconnecting.
2021-03-08 19:00:58.645 +08:00 [DBG] Connection id "0HM7245Q4VUN0" stopped.
2021-03-08 19:00:58.661 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 19:00:58.662 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 19:00:58.675 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 19:00:58.675 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 19:00:58.675 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 19:00:58.675 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 19:00:58.676 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 19:00:58.676 +08:00 [DBG] Error Url: /home/error
2021-03-08 19:00:58.676 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 19:00:58.679 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:00:58.682 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:00:58.690 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 19:00:58.694 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 19:00:58.695 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 19:00:58.698 +08:00 [DBG] Start token request.
2021-03-08 19:00:58.699 +08:00 [DBG] Start client validation
2021-03-08 19:00:58.701 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 19:00:58.702 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 19:00:58.708 +08:00 [DBG] Connection id "0HM7245Q4VUN1", Request id "0HM7245Q4VUN1:00000002": started reading request body.
2021-03-08 19:00:58.708 +08:00 [DBG] Connection id "0HM7245Q4VUN1", Request id "0HM7245Q4VUN1:00000002": done reading request body.
2021-03-08 19:00:58.711 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 19:00:58.711 +08:00 [DBG] Secret id found: client
2021-03-08 19:00:58.716 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 19:00:58.723 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 19:00:58.723 +08:00 [DBG] Client validation success
2021-03-08 19:00:58.727 +08:00 [DBG] Start token request validation
2021-03-08 19:00:58.731 +08:00 [DBG] Start resource owner password token request validation
2021-03-08 19:01:38.793 +08:00 [DBG] Hosting starting
2021-03-08 19:01:38.841 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-08 19:01:38.849 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-08 19:01:38.850 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-08 19:01:38.850 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-08 19:01:38.850 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-08 19:01:38.851 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-08 19:01:38.851 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-08 19:01:38.927 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-08 19:01:38.934 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-08 19:01:38.945 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-08 19:01:38.960 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-08 19:01:38.983 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:01:38.987 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-08 19:01:38.988 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-08 19:01:38.992 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-08 19:01:38.994 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-08 19:01:38.996 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-08 19:01:38.997 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-08 19:01:39.047 +08:00 [DBG] Hosting started
2021-03-08 19:01:39.048 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-08 19:01:49.440 +08:00 [DBG] Connection id "0HM724699NDHM" received FIN.
2021-03-08 19:01:49.448 +08:00 [DBG] Connection id "0HM724699NDHM" accepted.
2021-03-08 19:01:49.451 +08:00 [DBG] Connection id "0HM724699NDHM" started.
2021-03-08 19:01:49.453 +08:00 [DBG] Connection id "0HM724699NDHN" accepted.
2021-03-08 19:01:49.453 +08:00 [DBG] Connection id "0HM724699NDHN" started.
2021-03-08 19:01:49.457 +08:00 [DBG] Connection id "0HM724699NDHM" sending FIN because: "The client closed the connection."
2021-03-08 19:01:49.459 +08:00 [DBG] Connection id "0HM724699NDHM" disconnecting.
2021-03-08 19:01:49.461 +08:00 [DBG] Connection id "0HM724699NDHM" stopped.
2021-03-08 19:01:49.475 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-08 19:01:49.477 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-08 19:01:49.487 +08:00 [DBG] Login Url: /Account/Login
2021-03-08 19:01:49.487 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-08 19:01:49.488 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-08 19:01:49.488 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-08 19:01:49.488 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-08 19:01:49.488 +08:00 [DBG] Error Url: /home/error
2021-03-08 19:01:49.489 +08:00 [DBG] Error Id Parameter: errorId
2021-03-08 19:01:49.492 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:01:49.495 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-08 19:01:49.502 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-08 19:01:49.506 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-08 19:01:49.507 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-08 19:01:49.510 +08:00 [DBG] Start token request.
2021-03-08 19:01:49.511 +08:00 [DBG] Start client validation
2021-03-08 19:01:49.513 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-08 19:01:49.514 +08:00 [DBG] Start parsing for secret in post body
2021-03-08 19:01:49.520 +08:00 [DBG] Connection id "0HM724699NDHN", Request id "0HM724699NDHN:00000002": started reading request body.
2021-03-08 19:01:49.520 +08:00 [DBG] Connection id "0HM724699NDHN", Request id "0HM724699NDHN:00000002": done reading request body.
2021-03-08 19:01:49.523 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-08 19:01:49.523 +08:00 [DBG] Secret id found: client
2021-03-08 19:01:49.528 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-08 19:01:49.533 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-08 19:01:49.533 +08:00 [DBG] Client validation success
2021-03-08 19:01:49.537 +08:00 [DBG] Start token request validation
2021-03-08 19:01:49.540 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 09:15:49.335 +08:00 [DBG] Hosting starting
2021-03-09 09:15:49.390 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 09:15:49.398 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-09 09:15:49.399 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-09 09:15:49.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 09:15:49.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 09:15:49.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-09 09:15:49.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-09 09:15:49.449 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 09:15:49.454 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 09:15:49.471 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 09:15:49.483 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 09:15:49.501 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 09:15:49.503 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 09:15:49.504 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 09:15:49.506 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 09:15:49.508 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 09:15:49.510 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 09:15:49.511 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 09:15:49.558 +08:00 [DBG] Hosting started
2021-03-09 09:15:49.558 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 09:15:52.533 +08:00 [DBG] Connection id "0HM72J3GTUCEH" received FIN.
2021-03-09 09:15:52.543 +08:00 [DBG] Connection id "0HM72J3GTUCEH" accepted.
2021-03-09 09:15:52.547 +08:00 [DBG] Connection id "0HM72J3GTUCEH" started.
2021-03-09 09:15:52.548 +08:00 [DBG] Connection id "0HM72J3GTUCEI" accepted.
2021-03-09 09:15:52.549 +08:00 [DBG] Connection id "0HM72J3GTUCEI" started.
2021-03-09 09:15:52.553 +08:00 [DBG] Connection id "0HM72J3GTUCEH" sending FIN because: "The client closed the connection."
2021-03-09 09:15:52.555 +08:00 [DBG] Connection id "0HM72J3GTUCEH" disconnecting.
2021-03-09 09:15:52.556 +08:00 [DBG] Connection id "0HM72J3GTUCEH" stopped.
2021-03-09 09:15:52.574 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 09:15:52.575 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 09:15:52.590 +08:00 [DBG] Login Url: /Account/Login
2021-03-09 09:15:52.590 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 09:15:52.591 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-09 09:15:52.591 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-09 09:15:52.591 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 09:15:52.592 +08:00 [DBG] Error Url: /home/error
2021-03-09 09:15:52.592 +08:00 [DBG] Error Id Parameter: errorId
2021-03-09 09:15:52.595 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 09:15:52.601 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 09:15:52.608 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 09:15:52.612 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 09:15:52.615 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 09:15:52.618 +08:00 [DBG] Start token request.
2021-03-09 09:15:52.619 +08:00 [DBG] Start client validation
2021-03-09 09:15:52.622 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 09:15:52.623 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 09:15:52.630 +08:00 [DBG] Connection id "0HM72J3GTUCEI", Request id "0HM72J3GTUCEI:00000002": started reading request body.
2021-03-09 09:15:52.632 +08:00 [DBG] Connection id "0HM72J3GTUCEI", Request id "0HM72J3GTUCEI:00000002": done reading request body.
2021-03-09 09:15:52.635 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 09:15:52.635 +08:00 [DBG] Secret id found: client
2021-03-09 09:15:52.639 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 09:15:52.644 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 09:15:52.644 +08:00 [DBG] Client validation success
2021-03-09 09:15:52.652 +08:00 [DBG] Start token request validation
2021-03-09 09:15:52.655 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 09:16:03.558 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 09:16:03.566 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 09:16:03.579 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 09:16:03.579 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 09:16:23.597 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 09:16:23.751 +08:00 [DBG] Token request success.
2021-03-09 09:16:23.761 +08:00 [DBG] Connection id "0HM72J3GTUCEI" completed keep alive response.
2021-03-09 09:16:23.765 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 31193.9048ms
2021-03-09 09:28:23.864 +08:00 [DBG] Hosting starting
2021-03-09 09:28:23.909 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 09:28:23.915 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-09 09:28:23.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-09 09:28:23.916 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 09:28:23.917 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 09:28:23.917 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-09 09:28:23.917 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-09 09:28:23.963 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 09:28:23.968 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 09:28:23.978 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 09:28:23.992 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 09:28:24.014 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 09:28:24.017 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 09:28:24.018 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 09:28:24.021 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 09:28:24.023 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 09:28:24.025 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 09:28:24.027 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 09:28:24.078 +08:00 [DBG] Hosting started
2021-03-09 09:28:24.079 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 09:28:26.864 +08:00 [DBG] Connection id "0HM72JAHNQ025" received FIN.
2021-03-09 09:28:26.876 +08:00 [DBG] Connection id "0HM72JAHNQ025" accepted.
2021-03-09 09:28:26.879 +08:00 [DBG] Connection id "0HM72JAHNQ025" started.
2021-03-09 09:28:26.881 +08:00 [DBG] Connection id "0HM72JAHNQ026" accepted.
2021-03-09 09:28:26.881 +08:00 [DBG] Connection id "0HM72JAHNQ026" started.
2021-03-09 09:28:26.885 +08:00 [DBG] Connection id "0HM72JAHNQ025" sending FIN because: "The client closed the connection."
2021-03-09 09:28:26.887 +08:00 [DBG] Connection id "0HM72JAHNQ025" disconnecting.
2021-03-09 09:28:26.888 +08:00 [DBG] Connection id "0HM72JAHNQ025" stopped.
2021-03-09 09:28:26.904 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 09:28:26.906 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 09:28:26.916 +08:00 [DBG] Login Url: /Account/Login
2021-03-09 09:28:26.917 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 09:28:26.917 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-09 09:28:26.918 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-09 09:28:26.918 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 09:28:26.919 +08:00 [DBG] Error Url: /home/error
2021-03-09 09:28:26.919 +08:00 [DBG] Error Id Parameter: errorId
2021-03-09 09:28:26.922 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 09:28:26.925 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 09:28:26.933 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 09:28:26.939 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 09:28:26.939 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 09:28:26.942 +08:00 [DBG] Start token request.
2021-03-09 09:28:26.943 +08:00 [DBG] Start client validation
2021-03-09 09:28:26.945 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 09:28:26.946 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 09:28:26.953 +08:00 [DBG] Connection id "0HM72JAHNQ026", Request id "0HM72JAHNQ026:00000002": started reading request body.
2021-03-09 09:28:26.954 +08:00 [DBG] Connection id "0HM72JAHNQ026", Request id "0HM72JAHNQ026:00000002": done reading request body.
2021-03-09 09:28:26.956 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 09:28:26.957 +08:00 [DBG] Secret id found: client
2021-03-09 09:28:26.961 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 09:28:26.966 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 09:28:26.967 +08:00 [DBG] Client validation success
2021-03-09 09:28:26.971 +08:00 [DBG] Start token request validation
2021-03-09 09:28:26.973 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 09:30:42.521 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 09:30:42.529 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 09:30:42.541 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 09:30:42.542 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 09:30:42.559 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 09:30:42.700 +08:00 [DBG] Token request success.
2021-03-09 09:33:30.031 +08:00 [DBG] Connection id "0HM72JAHNQ026" completed keep alive response.
2021-03-09 09:33:30.033 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 303130.2630ms
2021-03-09 10:19:42.497 +08:00 [DBG] Hosting starting
2021-03-09 10:19:42.539 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 10:19:42.544 +08:00 [INF] Using the default authentication scheme Bearer for IdentityServer
2021-03-09 10:19:42.545 +08:00 [ERR] Authentication scheme Bearer is configured for IdentityServer, but it is not a scheme that supports signin (like cookies). Either configure the default authentication scheme with cookies or set the CookieAuthenticationScheme on the IdentityServerOptions.
2021-03-09 10:19:42.545 +08:00 [DBG] Using Bearer as default ASP.NET Core scheme for authentication
2021-03-09 10:19:42.545 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 10:19:42.545 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 10:19:42.545 +08:00 [DBG] Using Bearer as default ASP.NET Core scheme for challenge
2021-03-09 10:19:42.545 +08:00 [DBG] Using Bearer as default ASP.NET Core scheme for forbid
2021-03-09 10:19:42.580 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 10:19:42.585 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 10:19:42.593 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 10:19:42.606 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 10:19:42.622 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 10:19:42.624 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 10:19:42.625 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 10:19:42.628 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 10:19:42.629 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 10:19:42.632 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 10:19:42.632 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 10:19:42.670 +08:00 [DBG] Hosting started
2021-03-09 10:19:42.670 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 10:19:46.677 +08:00 [DBG] Connection id "0HM72K77J69D5" received FIN.
2021-03-09 10:19:46.685 +08:00 [DBG] Connection id "0HM72K77J69D5" accepted.
2021-03-09 10:19:46.687 +08:00 [DBG] Connection id "0HM72K77J69D5" started.
2021-03-09 10:19:46.689 +08:00 [DBG] Connection id "0HM72K77J69D6" accepted.
2021-03-09 10:19:46.689 +08:00 [DBG] Connection id "0HM72K77J69D6" started.
2021-03-09 10:19:46.693 +08:00 [DBG] Connection id "0HM72K77J69D5" sending FIN because: "The client closed the connection."
2021-03-09 10:19:46.695 +08:00 [DBG] Connection id "0HM72K77J69D5" disconnecting.
2021-03-09 10:19:46.696 +08:00 [DBG] Connection id "0HM72K77J69D5" stopped.
2021-03-09 10:19:46.713 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 10:19:46.714 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 10:19:46.839 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-03-09 10:19:46.843 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2021-03-09 10:19:46.850 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 10:19:46.854 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 10:19:46.854 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 10:19:46.857 +08:00 [DBG] Start token request.
2021-03-09 10:19:46.858 +08:00 [DBG] Start client validation
2021-03-09 10:19:46.860 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 10:19:46.861 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 10:19:46.867 +08:00 [DBG] Connection id "0HM72K77J69D6", Request id "0HM72K77J69D6:00000002": started reading request body.
2021-03-09 10:19:46.867 +08:00 [DBG] Connection id "0HM72K77J69D6", Request id "0HM72K77J69D6:00000002": done reading request body.
2021-03-09 10:19:46.870 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 10:19:46.870 +08:00 [DBG] Secret id found: client
2021-03-09 10:19:46.874 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 10:19:46.880 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 10:19:46.881 +08:00 [DBG] Client validation success
2021-03-09 10:19:46.884 +08:00 [DBG] Start token request validation
2021-03-09 10:19:46.887 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 10:19:51.561 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 10:19:51.569 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 10:19:51.580 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 10:19:51.581 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 10:19:51.584 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 10:19:51.710 +08:00 [DBG] Token request success.
2021-03-09 10:19:51.733 +08:00 [DBG] Connection id "0HM72K77J69D6" completed keep alive response.
2021-03-09 10:19:51.734 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 5022.9081ms
2021-03-09 11:15:04.192 +08:00 [DBG] Hosting starting
2021-03-09 11:15:04.233 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 11:15:04.238 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-09 11:15:04.239 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-09 11:15:04.239 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 11:15:04.239 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 11:15:04.239 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-09 11:15:04.239 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-09 11:15:04.271 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 11:15:04.276 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 11:15:04.283 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 11:15:04.295 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 11:15:04.313 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:15:04.315 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 11:15:04.316 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:15:04.320 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 11:15:04.321 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 11:15:04.323 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 11:15:04.324 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 11:15:04.365 +08:00 [DBG] Hosting started
2021-03-09 11:15:04.365 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 11:15:09.336 +08:00 [DBG] Connection id "0HM72L65QH75A" received FIN.
2021-03-09 11:15:09.344 +08:00 [DBG] Connection id "0HM72L65QH75A" accepted.
2021-03-09 11:15:09.347 +08:00 [DBG] Connection id "0HM72L65QH75A" started.
2021-03-09 11:15:09.349 +08:00 [DBG] Connection id "0HM72L65QH75B" accepted.
2021-03-09 11:15:09.349 +08:00 [DBG] Connection id "0HM72L65QH75B" started.
2021-03-09 11:15:09.354 +08:00 [DBG] Connection id "0HM72L65QH75A" sending FIN because: "The client closed the connection."
2021-03-09 11:15:09.356 +08:00 [DBG] Connection id "0HM72L65QH75A" disconnecting.
2021-03-09 11:15:09.358 +08:00 [DBG] Connection id "0HM72L65QH75A" stopped.
2021-03-09 11:15:09.375 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:15:09.377 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 11:15:09.389 +08:00 [DBG] Login Url: /Account/Login
2021-03-09 11:15:09.389 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 11:15:09.389 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-09 11:15:09.389 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-09 11:15:09.390 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 11:15:09.390 +08:00 [DBG] Error Url: /home/error
2021-03-09 11:15:09.390 +08:00 [DBG] Error Id Parameter: errorId
2021-03-09 11:15:09.393 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:15:09.397 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:15:09.404 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:15:09.408 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:15:09.409 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:15:09.411 +08:00 [DBG] Start token request.
2021-03-09 11:15:09.413 +08:00 [DBG] Start client validation
2021-03-09 11:15:09.415 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:15:09.416 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:15:09.422 +08:00 [DBG] Connection id "0HM72L65QH75B", Request id "0HM72L65QH75B:00000002": started reading request body.
2021-03-09 11:15:09.422 +08:00 [DBG] Connection id "0HM72L65QH75B", Request id "0HM72L65QH75B:00000002": done reading request body.
2021-03-09 11:15:09.425 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:15:09.425 +08:00 [DBG] Secret id found: client
2021-03-09 11:15:09.430 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:15:09.435 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:15:09.436 +08:00 [DBG] Client validation success
2021-03-09 11:15:09.440 +08:00 [DBG] Start token request validation
2021-03-09 11:15:09.443 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:15:09.910 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:15:09.918 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:15:09.931 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:15:09.932 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:15:09.935 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:15:10.121 +08:00 [DBG] Token request success.
2021-03-09 11:15:10.147 +08:00 [DBG] Connection id "0HM72L65QH75B" completed keep alive response.
2021-03-09 11:15:10.148 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 775.5462ms
2021-03-09 11:16:10.327 +08:00 [DBG] Hosting starting
2021-03-09 11:16:10.374 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 11:16:10.380 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-09 11:16:10.381 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-09 11:16:10.381 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 11:16:10.381 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 11:16:10.382 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-09 11:16:10.382 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-09 11:16:10.419 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 11:16:10.425 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 11:16:10.434 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 11:16:10.448 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 11:16:10.470 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:16:10.473 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 11:16:10.474 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:16:10.479 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 11:16:10.482 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 11:16:10.484 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 11:16:10.485 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 11:16:10.529 +08:00 [DBG] Hosting started
2021-03-09 11:16:10.529 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 11:16:17.177 +08:00 [DBG] Connection id "0HM72L6Q1GNII" received FIN.
2021-03-09 11:16:17.191 +08:00 [DBG] Connection id "0HM72L6Q1GNII" accepted.
2021-03-09 11:16:17.194 +08:00 [DBG] Connection id "0HM72L6Q1GNII" started.
2021-03-09 11:16:17.197 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" accepted.
2021-03-09 11:16:17.197 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" started.
2021-03-09 11:16:17.202 +08:00 [DBG] Connection id "0HM72L6Q1GNII" sending FIN because: "The client closed the connection."
2021-03-09 11:16:17.204 +08:00 [DBG] Connection id "0HM72L6Q1GNII" disconnecting.
2021-03-09 11:16:17.206 +08:00 [DBG] Connection id "0HM72L6Q1GNII" stopped.
2021-03-09 11:16:17.224 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:17.225 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 11:16:17.236 +08:00 [DBG] Login Url: /Account/Login
2021-03-09 11:16:17.236 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 11:16:17.236 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-09 11:16:17.236 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-09 11:16:17.236 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 11:16:17.236 +08:00 [DBG] Error Url: /home/error
2021-03-09 11:16:17.237 +08:00 [DBG] Error Id Parameter: errorId
2021-03-09 11:16:17.239 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:17.243 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:17.250 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:17.254 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:17.255 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:17.258 +08:00 [DBG] Start token request.
2021-03-09 11:16:17.260 +08:00 [DBG] Start client validation
2021-03-09 11:16:17.262 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:17.263 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:17.268 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000002": started reading request body.
2021-03-09 11:16:17.269 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000002": done reading request body.
2021-03-09 11:16:17.271 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:17.271 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:17.276 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:17.281 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:17.281 +08:00 [DBG] Client validation success
2021-03-09 11:16:17.285 +08:00 [DBG] Start token request validation
2021-03-09 11:16:17.288 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:17.742 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:17.749 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:17.761 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:17.761 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:17.764 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:17.937 +08:00 [DBG] Token request success.
2021-03-09 11:16:17.961 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:17.961 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 739.6852ms
2021-03-09 11:16:24.707 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:24.708 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:24.708 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:24.708 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:24.708 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:24.709 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:24.711 +08:00 [DBG] Start token request.
2021-03-09 11:16:24.711 +08:00 [DBG] Start client validation
2021-03-09 11:16:24.711 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:24.711 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:24.711 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000003": started reading request body.
2021-03-09 11:16:24.711 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000003": done reading request body.
2021-03-09 11:16:24.712 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:24.712 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:24.712 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:24.712 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:24.712 +08:00 [DBG] Client validation success
2021-03-09 11:16:24.712 +08:00 [DBG] Start token request validation
2021-03-09 11:16:24.712 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:24.739 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:24.739 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:24.740 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:24.740 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:24.740 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:24.741 +08:00 [DBG] Token request success.
2021-03-09 11:16:24.742 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:24.742 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 34.7703ms
2021-03-09 11:16:26.669 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:26.672 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:26.672 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:26.673 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:26.676 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:26.676 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:26.677 +08:00 [DBG] Start token request.
2021-03-09 11:16:26.677 +08:00 [DBG] Start client validation
2021-03-09 11:16:26.677 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:26.677 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:26.677 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000004": started reading request body.
2021-03-09 11:16:26.677 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000004": done reading request body.
2021-03-09 11:16:26.677 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:26.678 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:26.678 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:26.678 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:26.678 +08:00 [DBG] Client validation success
2021-03-09 11:16:26.678 +08:00 [DBG] Start token request validation
2021-03-09 11:16:26.678 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:26.687 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:26.687 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:26.688 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:26.688 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:26.688 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:26.689 +08:00 [DBG] Token request success.
2021-03-09 11:16:26.689 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:26.689 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 20.7126ms
2021-03-09 11:16:34.607 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:34.607 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:34.607 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:34.608 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:34.608 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:34.608 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:34.609 +08:00 [DBG] Start token request.
2021-03-09 11:16:34.609 +08:00 [DBG] Start client validation
2021-03-09 11:16:34.609 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:34.609 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:34.609 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000005": started reading request body.
2021-03-09 11:16:34.609 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000005": done reading request body.
2021-03-09 11:16:34.609 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:34.610 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:34.610 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:34.610 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:34.610 +08:00 [DBG] Client validation success
2021-03-09 11:16:34.610 +08:00 [DBG] Start token request validation
2021-03-09 11:16:34.610 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:34.653 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:34.653 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:34.654 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:34.654 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:34.654 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:34.655 +08:00 [DBG] Token request success.
2021-03-09 11:16:34.655 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:34.656 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 48.9611ms
2021-03-09 11:16:36.617 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:36.618 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:36.618 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:36.618 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:36.618 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:36.619 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:36.619 +08:00 [DBG] Start token request.
2021-03-09 11:16:36.619 +08:00 [DBG] Start client validation
2021-03-09 11:16:36.619 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:36.619 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:36.619 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000006": started reading request body.
2021-03-09 11:16:36.620 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000006": done reading request body.
2021-03-09 11:16:36.620 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:36.620 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:36.620 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:36.620 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:36.620 +08:00 [DBG] Client validation success
2021-03-09 11:16:36.621 +08:00 [DBG] Start token request validation
2021-03-09 11:16:36.621 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:36.636 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:36.636 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:36.637 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:36.637 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:36.637 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:36.638 +08:00 [DBG] Token request success.
2021-03-09 11:16:36.638 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:36.638 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 21.2297ms
2021-03-09 11:16:37.533 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:16:37.534 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:37.534 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:16:37.535 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:16:37.536 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:16:37.536 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:16:37.537 +08:00 [DBG] Start token request.
2021-03-09 11:16:37.537 +08:00 [DBG] Start client validation
2021-03-09 11:16:37.537 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:16:37.537 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:16:37.537 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000007": started reading request body.
2021-03-09 11:16:37.537 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ", Request id "0HM72L6Q1GNIJ:00000007": done reading request body.
2021-03-09 11:16:37.537 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:16:37.538 +08:00 [DBG] Secret id found: client
2021-03-09 11:16:37.538 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:16:37.538 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:16:37.538 +08:00 [DBG] Client validation success
2021-03-09 11:16:37.538 +08:00 [DBG] Start token request validation
2021-03-09 11:16:37.538 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:16:37.578 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:16:37.579 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:16:37.580 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:16:37.580 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:16:37.580 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:16:37.581 +08:00 [DBG] Token request success.
2021-03-09 11:16:37.581 +08:00 [DBG] Connection id "0HM72L6Q1GNIJ" completed keep alive response.
2021-03-09 11:16:37.581 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 47.8934ms
2021-03-09 11:27:43.918 +08:00 [DBG] Hosting starting
2021-03-09 11:27:43.964 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-09 11:27:43.970 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-09 11:27:43.971 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-09 11:27:43.971 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-09 11:27:43.972 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-09 11:27:43.972 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-09 11:27:43.972 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-09 11:27:44.018 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-09 11:27:44.023 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-09 11:27:44.032 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-09 11:27:44.046 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-09 11:27:44.068 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:27:44.070 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-09 11:27:44.071 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-09 11:27:44.075 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-09 11:27:44.077 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-09 11:27:44.079 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-09 11:27:44.080 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-09 11:27:44.132 +08:00 [DBG] Hosting started
2021-03-09 11:27:44.132 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-09 11:27:48.114 +08:00 [DBG] Connection id "0HM72LD7UPT3E" received FIN.
2021-03-09 11:27:48.122 +08:00 [DBG] Connection id "0HM72LD7UPT3E" accepted.
2021-03-09 11:27:48.124 +08:00 [DBG] Connection id "0HM72LD7UPT3E" started.
2021-03-09 11:27:48.126 +08:00 [DBG] Connection id "0HM72LD7UPT3F" accepted.
2021-03-09 11:27:48.126 +08:00 [DBG] Connection id "0HM72LD7UPT3F" started.
2021-03-09 11:27:48.130 +08:00 [DBG] Connection id "0HM72LD7UPT3E" sending FIN because: "The client closed the connection."
2021-03-09 11:27:48.132 +08:00 [DBG] Connection id "0HM72LD7UPT3E" disconnecting.
2021-03-09 11:27:48.133 +08:00 [DBG] Connection id "0HM72LD7UPT3E" stopped.
2021-03-09 11:27:48.148 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:27:48.149 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-09 11:27:48.157 +08:00 [DBG] Login Url: /Account/Login
2021-03-09 11:27:48.158 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-09 11:27:48.158 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-09 11:27:48.158 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-09 11:27:48.158 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-09 11:27:48.158 +08:00 [DBG] Error Url: /home/error
2021-03-09 11:27:48.158 +08:00 [DBG] Error Id Parameter: errorId
2021-03-09 11:27:48.161 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:48.163 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:48.169 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:48.175 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:27:48.179 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:27:48.180 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:27:48.183 +08:00 [DBG] Start token request.
2021-03-09 11:27:48.184 +08:00 [DBG] Start client validation
2021-03-09 11:27:48.186 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:27:48.187 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:27:48.193 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000002": started reading request body.
2021-03-09 11:27:48.193 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000002": done reading request body.
2021-03-09 11:27:48.196 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:27:48.196 +08:00 [DBG] Secret id found: client
2021-03-09 11:27:48.200 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:27:48.204 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:27:48.204 +08:00 [DBG] Client validation success
2021-03-09 11:27:48.208 +08:00 [DBG] Start token request validation
2021-03-09 11:27:48.211 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:27:48.640 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:27:48.647 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:27:48.660 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:27:48.660 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:27:48.663 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:27:48.837 +08:00 [DBG] Token request success.
2021-03-09 11:27:48.862 +08:00 [DBG] Connection id "0HM72LD7UPT3F" completed keep alive response.
2021-03-09 11:27:48.863 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 717.1098ms
2021-03-09 11:27:50.341 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:27:50.343 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:50.344 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:50.344 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:50.344 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:27:50.345 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:27:50.347 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:27:50.348 +08:00 [DBG] Start token request.
2021-03-09 11:27:50.348 +08:00 [DBG] Start client validation
2021-03-09 11:27:50.348 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:27:50.348 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:27:50.348 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000003": started reading request body.
2021-03-09 11:27:50.348 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000003": done reading request body.
2021-03-09 11:27:50.349 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:27:50.349 +08:00 [DBG] Secret id found: client
2021-03-09 11:27:50.349 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:27:50.349 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:27:50.349 +08:00 [DBG] Client validation success
2021-03-09 11:27:50.349 +08:00 [DBG] Start token request validation
2021-03-09 11:27:50.350 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:27:50.369 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:27:50.369 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:27:50.370 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:27:50.370 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:27:50.370 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:27:50.371 +08:00 [DBG] Token request success.
2021-03-09 11:27:50.372 +08:00 [DBG] Connection id "0HM72LD7UPT3F" completed keep alive response.
2021-03-09 11:27:50.372 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 30.6566ms
2021-03-09 11:27:51.478 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-09 11:27:51.478 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:51.479 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:51.479 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-09 11:27:51.480 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-09 11:27:51.483 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-09 11:27:51.483 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-09 11:27:51.484 +08:00 [DBG] Start token request.
2021-03-09 11:27:51.484 +08:00 [DBG] Start client validation
2021-03-09 11:27:51.484 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-09 11:27:51.484 +08:00 [DBG] Start parsing for secret in post body
2021-03-09 11:27:51.484 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000004": started reading request body.
2021-03-09 11:27:51.484 +08:00 [DBG] Connection id "0HM72LD7UPT3F", Request id "0HM72LD7UPT3F:00000004": done reading request body.
2021-03-09 11:27:51.484 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-09 11:27:51.484 +08:00 [DBG] Secret id found: client
2021-03-09 11:27:51.485 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-09 11:27:51.485 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-09 11:27:51.485 +08:00 [DBG] Client validation success
2021-03-09 11:27:51.485 +08:00 [DBG] Start token request validation
2021-03-09 11:27:51.485 +08:00 [DBG] Start resource owner password token request validation
2021-03-09 11:27:51.495 +08:00 [DBG] Resource owner password token request validation success.
2021-03-09 11:27:51.495 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-09 11:27:51.495 +08:00 [DBG] Getting claims for access token for client: client
2021-03-09 11:27:51.496 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-09 11:27:51.496 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-09 11:27:51.497 +08:00 [DBG] Token request success.
2021-03-09 11:27:51.497 +08:00 [DBG] Connection id "0HM72LD7UPT3F" completed keep alive response.
2021-03-09 11:27:51.497 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 19.3662ms
2021-03-15 14:20:11.309 +08:00 [DBG] Hosting starting
2021-03-15 14:20:11.358 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 14:20:11.364 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 14:20:11.364 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 14:20:11.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 14:20:11.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 14:20:11.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 14:20:11.365 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 14:20:11.401 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 14:20:11.406 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 14:20:11.424 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 14:20:11.436 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 14:20:11.456 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:20:11.466 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 14:20:11.467 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:20:11.471 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 14:20:11.473 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 14:20:11.475 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 14:20:11.476 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 14:20:11.534 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:1221: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。
 ---> System.Net.Sockets.SocketException (10048): 通常每个套接字地址(协议/网络地址/端口)只允许使用一次。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.<Bind>g__BindSocket|13_0(<>c__DisplayClass13_0& )
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.<Bind>g__BindSocket|13_0(<>c__DisplayClass13_0& )
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass29_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IEnumerable`1 listenOptions, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2021-03-15 14:20:11.564 +08:00 [DBG] Hosting shutdown
2021-03-15 14:20:22.865 +08:00 [DBG] Hosting starting
2021-03-15 14:20:22.920 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 14:20:22.929 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 14:20:22.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 14:20:22.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 14:20:22.931 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 14:20:22.931 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 14:20:22.931 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 14:20:22.973 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 14:20:22.978 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 14:20:22.988 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 14:20:23.001 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 14:20:23.023 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:20:23.025 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 14:20:23.026 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:20:23.029 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 14:20:23.031 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 14:20:23.034 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 14:20:23.035 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 14:20:23.095 +08:00 [DBG] Hosting started
2021-03-15 14:20:23.095 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 14:20:37.507 +08:00 [DBG] Connection id "0HM77F9PGMH1E" received FIN.
2021-03-15 14:20:37.515 +08:00 [DBG] Connection id "0HM77F9PGMH1E" accepted.
2021-03-15 14:20:37.518 +08:00 [DBG] Connection id "0HM77F9PGMH1E" started.
2021-03-15 14:20:37.520 +08:00 [DBG] Connection id "0HM77F9PGMH1F" accepted.
2021-03-15 14:20:37.520 +08:00 [DBG] Connection id "0HM77F9PGMH1F" started.
2021-03-15 14:20:37.524 +08:00 [DBG] Connection id "0HM77F9PGMH1E" sending FIN because: "The client closed the connection."
2021-03-15 14:20:37.526 +08:00 [DBG] Connection id "0HM77F9PGMH1E" disconnecting.
2021-03-15 14:20:37.527 +08:00 [DBG] Connection id "0HM77F9PGMH1E" stopped.
2021-03-15 14:20:37.544 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 14:20:37.545 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 14:20:37.558 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 14:20:37.558 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 14:20:37.558 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 14:20:37.558 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 14:20:37.558 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 14:20:37.558 +08:00 [DBG] Error Url: /home/error
2021-03-15 14:20:37.559 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 14:20:37.561 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 14:20:37.565 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 14:20:37.573 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 14:20:37.578 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 14:20:37.578 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 14:20:37.581 +08:00 [DBG] Start token request.
2021-03-15 14:20:37.582 +08:00 [DBG] Start client validation
2021-03-15 14:20:37.584 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 14:20:37.586 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 14:20:37.593 +08:00 [DBG] Connection id "0HM77F9PGMH1F", Request id "0HM77F9PGMH1F:00000002": started reading request body.
2021-03-15 14:20:37.593 +08:00 [DBG] Connection id "0HM77F9PGMH1F", Request id "0HM77F9PGMH1F:00000002": done reading request body.
2021-03-15 14:20:37.596 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 14:20:37.596 +08:00 [DBG] Secret id found: client
2021-03-15 14:20:37.600 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 14:20:37.606 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 14:20:37.606 +08:00 [DBG] Client validation success
2021-03-15 14:20:37.611 +08:00 [DBG] Start token request validation
2021-03-15 14:20:37.614 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 14:20:38.142 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 14:20:38.151 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 14:20:38.166 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 14:20:38.166 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 14:20:38.170 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 14:20:38.382 +08:00 [DBG] Token request success.
2021-03-15 14:20:38.414 +08:00 [DBG] Connection id "0HM77F9PGMH1F" completed keep alive response.
2021-03-15 14:20:38.416 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 873.5369ms
2021-03-15 14:42:36.395 +08:00 [DBG] Hosting starting
2021-03-15 14:42:36.446 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 14:42:36.455 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 14:42:36.456 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 14:42:36.456 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 14:42:36.457 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 14:42:36.457 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 14:42:36.457 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 14:43:02.243 +08:00 [DBG] Hosting starting
2021-03-15 14:43:16.592 +08:00 [DBG] Hosting starting
2021-03-15 14:43:16.643 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 14:43:16.652 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 14:43:16.653 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 14:43:16.653 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 14:43:16.654 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 14:43:16.654 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 14:43:16.654 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 14:43:16.698 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 14:43:16.704 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 14:43:16.715 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 14:43:16.728 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 14:43:16.746 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:43:16.748 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 14:43:16.749 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 14:43:16.751 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 14:43:16.753 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 14:43:16.755 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 14:43:16.756 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 14:43:16.811 +08:00 [DBG] Hosting started
2021-03-15 14:43:16.811 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 14:43:22.894 +08:00 [DBG] Connection id "0HM77FMGE1KIN" received FIN.
2021-03-15 14:43:22.902 +08:00 [DBG] Connection id "0HM77FMGE1KIN" accepted.
2021-03-15 14:43:22.905 +08:00 [DBG] Connection id "0HM77FMGE1KIN" started.
2021-03-15 14:43:22.907 +08:00 [DBG] Connection id "0HM77FMGE1KIO" accepted.
2021-03-15 14:43:22.907 +08:00 [DBG] Connection id "0HM77FMGE1KIO" started.
2021-03-15 14:43:22.911 +08:00 [DBG] Connection id "0HM77FMGE1KIN" sending FIN because: "The client closed the connection."
2021-03-15 14:43:22.913 +08:00 [DBG] Connection id "0HM77FMGE1KIN" disconnecting.
2021-03-15 14:43:22.914 +08:00 [DBG] Connection id "0HM77FMGE1KIN" stopped.
2021-03-15 14:43:22.934 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 14:43:22.935 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 14:43:22.947 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 14:43:22.947 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 14:43:22.947 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 14:43:22.947 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 14:43:22.947 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 14:43:22.947 +08:00 [DBG] Error Url: /home/error
2021-03-15 14:43:22.948 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 14:43:22.951 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 14:43:22.954 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 14:43:22.961 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 14:43:22.965 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 14:43:22.965 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 14:43:22.968 +08:00 [DBG] Start token request.
2021-03-15 14:43:22.969 +08:00 [DBG] Start client validation
2021-03-15 14:43:22.971 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 14:43:22.972 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 14:43:22.978 +08:00 [DBG] Connection id "0HM77FMGE1KIO", Request id "0HM77FMGE1KIO:00000002": started reading request body.
2021-03-15 14:43:22.978 +08:00 [DBG] Connection id "0HM77FMGE1KIO", Request id "0HM77FMGE1KIO:00000002": done reading request body.
2021-03-15 14:43:22.981 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 14:43:22.981 +08:00 [DBG] Secret id found: client
2021-03-15 14:43:22.985 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 14:43:22.990 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 14:43:22.990 +08:00 [DBG] Client validation success
2021-03-15 14:43:22.994 +08:00 [DBG] Start token request validation
2021-03-15 14:43:22.997 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 14:43:23.477 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 14:43:23.484 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 14:43:23.496 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 14:43:23.496 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 14:43:23.499 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 14:43:23.682 +08:00 [DBG] Token request success.
2021-03-15 14:43:23.709 +08:00 [DBG] Connection id "0HM77FMGE1KIO" completed keep alive response.
2021-03-15 14:43:23.710 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 777.9088ms
2021-03-15 15:08:05.898 +08:00 [DBG] Hosting starting
2021-03-15 15:08:05.956 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:08:05.961 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:08:05.962 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:08:05.962 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:08:05.963 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:08:05.963 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:08:05.963 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:08:06.000 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:08:06.005 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:08:06.014 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:08:06.026 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:08:06.042 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:08:06.044 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:08:06.045 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:08:06.047 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:08:06.049 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:08:06.051 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:08:06.051 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:08:06.090 +08:00 [DBG] Hosting started
2021-03-15 15:08:06.090 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:09:56.916 +08:00 [DBG] Connection id "0HM77G5BFQLUG" received FIN.
2021-03-15 15:09:56.932 +08:00 [DBG] Connection id "0HM77G5BFQLUG" accepted.
2021-03-15 15:09:56.937 +08:00 [DBG] Connection id "0HM77G5BFQLUG" started.
2021-03-15 15:09:56.939 +08:00 [DBG] Connection id "0HM77G5BFQLUH" accepted.
2021-03-15 15:09:56.940 +08:00 [DBG] Connection id "0HM77G5BFQLUH" started.
2021-03-15 15:09:56.946 +08:00 [DBG] Connection id "0HM77G5BFQLUG" sending FIN because: "The client closed the connection."
2021-03-15 15:09:56.947 +08:00 [DBG] Connection id "0HM77G5BFQLUG" disconnecting.
2021-03-15 15:09:56.952 +08:00 [DBG] Connection id "0HM77G5BFQLUG" stopped.
2021-03-15 15:09:56.967 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:09:56.968 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:09:56.979 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:09:56.980 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:09:56.980 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:09:56.980 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:09:56.980 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:09:56.980 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:09:56.980 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:09:56.983 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:09:56.987 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:09:56.994 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:09:56.999 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:09:56.999 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:09:57.002 +08:00 [DBG] Start token request.
2021-03-15 15:09:57.004 +08:00 [DBG] Start client validation
2021-03-15 15:09:57.006 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:09:57.007 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:09:57.013 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000002": started reading request body.
2021-03-15 15:09:57.014 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000002": done reading request body.
2021-03-15 15:09:57.017 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:09:57.018 +08:00 [DBG] Secret id found: client
2021-03-15 15:09:57.022 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:09:57.027 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:09:57.027 +08:00 [DBG] Client validation success
2021-03-15 15:09:57.031 +08:00 [DBG] Start token request validation
2021-03-15 15:09:57.034 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:10:06.474 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:10:06.505 +08:00 [DBG] Connection id "0HM77G5BFQLUH" completed keep alive response.
2021-03-15 15:10:06.506 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 9540.6611ms
2021-03-15 15:10:14.870 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:10:14.871 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:10:14.879 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:10:14.882 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:10:14.882 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:10:14.883 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:10:14.885 +08:00 [DBG] Start token request.
2021-03-15 15:10:14.885 +08:00 [DBG] Start client validation
2021-03-15 15:10:14.885 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:10:14.885 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:10:14.885 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000003": started reading request body.
2021-03-15 15:10:14.886 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000003": done reading request body.
2021-03-15 15:10:14.886 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:10:14.886 +08:00 [DBG] Secret id found: client
2021-03-15 15:10:14.886 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:10:14.886 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:10:14.887 +08:00 [DBG] Client validation success
2021-03-15 15:10:14.887 +08:00 [DBG] Start token request validation
2021-03-15 15:10:14.887 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:10:29.430 +08:00 [INF] User authentication failed: ["用户名或密码不正确"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:10:29.432 +08:00 [DBG] Connection id "0HM77G5BFQLUH" completed keep alive response.
2021-03-15 15:10:29.432 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 14561.7876ms
2021-03-15 15:10:50.714 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:10:50.717 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:10:50.718 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:10:50.718 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:10:50.722 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:10:50.723 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:10:50.723 +08:00 [DBG] Start token request.
2021-03-15 15:10:50.723 +08:00 [DBG] Start client validation
2021-03-15 15:10:50.723 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:10:50.723 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:10:50.723 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000004": started reading request body.
2021-03-15 15:10:50.723 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000004": done reading request body.
2021-03-15 15:10:50.724 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:10:50.724 +08:00 [DBG] Secret id found: client
2021-03-15 15:10:50.724 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:10:50.724 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:10:50.724 +08:00 [DBG] Client validation success
2021-03-15 15:10:50.724 +08:00 [DBG] Start token request validation
2021-03-15 15:10:50.724 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:10:59.179 +08:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:10:59.180 +08:00 [DBG] Connection id "0HM77G5BFQLUH" completed keep alive response.
2021-03-15 15:10:59.182 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 400 - application/json;+charset=UTF-8 8466.8537ms
2021-03-15 15:12:27.868 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:12:27.869 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:12:27.869 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:12:27.869 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:12:27.869 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:12:27.869 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:12:27.870 +08:00 [DBG] Start token request.
2021-03-15 15:12:27.870 +08:00 [DBG] Start client validation
2021-03-15 15:12:27.870 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:12:27.870 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:12:27.870 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000005": started reading request body.
2021-03-15 15:12:27.870 +08:00 [DBG] Connection id "0HM77G5BFQLUH", Request id "0HM77G5BFQLUH:00000005": done reading request body.
2021-03-15 15:12:27.871 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:12:27.871 +08:00 [DBG] Secret id found: client
2021-03-15 15:12:27.871 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:12:27.871 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:12:27.871 +08:00 [DBG] Client validation success
2021-03-15 15:12:27.871 +08:00 [DBG] Start token request validation
2021-03-15 15:12:27.871 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:13:58.532 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:13:58.533 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:13:58.542 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:13:58.543 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:13:58.545 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:13:58.731 +08:00 [DBG] Token request success.
2021-03-15 15:13:58.735 +08:00 [DBG] Connection id "0HM77G5BFQLUH" completed keep alive response.
2021-03-15 15:13:58.737 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 90867.8476ms
2021-03-15 15:31:44.240 +08:00 [DBG] Hosting starting
2021-03-15 15:32:21.846 +08:00 [DBG] Hosting starting
2021-03-15 15:32:21.928 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:32:21.934 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:32:21.943 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:32:21.955 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:32:21.976 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:32:21.978 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:32:21.979 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:32:21.982 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:32:21.984 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:32:21.987 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:32:21.988 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:32:22.038 +08:00 [DBG] Hosting started
2021-03-15 15:32:22.041 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:32:25.693 +08:00 [DBG] Connection id "0HM77GHTEOMMG" received FIN.
2021-03-15 15:32:25.703 +08:00 [DBG] Connection id "0HM77GHTEOMMG" accepted.
2021-03-15 15:32:25.707 +08:00 [DBG] Connection id "0HM77GHTEOMMG" started.
2021-03-15 15:32:25.709 +08:00 [DBG] Connection id "0HM77GHTEOMMH" accepted.
2021-03-15 15:32:25.709 +08:00 [DBG] Connection id "0HM77GHTEOMMH" started.
2021-03-15 15:32:25.714 +08:00 [DBG] Connection id "0HM77GHTEOMMG" sending FIN because: "The client closed the connection."
2021-03-15 15:32:25.716 +08:00 [DBG] Connection id "0HM77GHTEOMMG" disconnecting.
2021-03-15 15:32:25.718 +08:00 [DBG] Connection id "0HM77GHTEOMMG" stopped.
2021-03-15 15:32:25.736 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:32:25.737 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:32:25.738 +08:00 [DBG] POST requests are not supported
2021-03-15 15:32:25.744 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:32:25.746 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:32:25.762 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:32:25.763 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 28.4996ms
2021-03-15 15:32:25.771 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000002": started reading request body.
2021-03-15 15:32:25.772 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000002": done reading request body.
2021-03-15 15:32:56.871 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:32:56.872 +08:00 [DBG] POST requests are not supported
2021-03-15 15:32:56.873 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:32:56.873 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:32:56.873 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:32:56.874 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.9076ms
2021-03-15 15:32:56.875 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000003": started reading request body.
2021-03-15 15:32:56.875 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000003": done reading request body.
2021-03-15 15:32:58.372 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:32:58.373 +08:00 [DBG] POST requests are not supported
2021-03-15 15:32:58.373 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:32:58.374 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:32:58.374 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:32:58.375 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 3.4953ms
2021-03-15 15:32:58.375 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000004": started reading request body.
2021-03-15 15:32:58.376 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000004": done reading request body.
2021-03-15 15:32:59.098 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:32:59.099 +08:00 [DBG] POST requests are not supported
2021-03-15 15:32:59.099 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:32:59.100 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:32:59.100 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:32:59.105 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 6.9848ms
2021-03-15 15:32:59.106 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000005": started reading request body.
2021-03-15 15:32:59.107 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000005": done reading request body.
2021-03-15 15:32:59.667 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:32:59.668 +08:00 [DBG] POST requests are not supported
2021-03-15 15:32:59.669 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:32:59.669 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:32:59.670 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:32:59.670 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.8783ms
2021-03-15 15:32:59.671 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000006": started reading request body.
2021-03-15 15:32:59.671 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000006": done reading request body.
2021-03-15 15:33:00.488 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:33:00.489 +08:00 [DBG] POST requests are not supported
2021-03-15 15:33:00.490 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:33:00.490 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:33:00.490 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:33:00.491 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.6590ms
2021-03-15 15:33:00.491 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000007": started reading request body.
2021-03-15 15:33:00.492 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000007": done reading request body.
2021-03-15 15:33:01.169 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:33:01.170 +08:00 [DBG] POST requests are not supported
2021-03-15 15:33:01.170 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:33:01.170 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:33:01.171 +08:00 [DBG] Connection id "0HM77GHTEOMMH" completed keep alive response.
2021-03-15 15:33:01.171 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.4469ms
2021-03-15 15:33:01.172 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000008": started reading request body.
2021-03-15 15:33:01.172 +08:00 [DBG] Connection id "0HM77GHTEOMMH", Request id "0HM77GHTEOMMH:00000008": done reading request body.
2021-03-15 15:33:21.899 +08:00 [DBG] Hosting starting
2021-03-15 15:33:21.980 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:33:21.987 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:33:21.997 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:33:22.011 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:33:22.032 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:33:22.034 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:33:22.035 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:33:22.038 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:33:22.040 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:33:22.044 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:33:22.045 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:33:22.094 +08:00 [DBG] Hosting started
2021-03-15 15:33:22.095 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:33:25.110 +08:00 [DBG] Connection id "0HM77GIF5D9TB" received FIN.
2021-03-15 15:33:25.123 +08:00 [DBG] Connection id "0HM77GIF5D9TB" accepted.
2021-03-15 15:33:25.126 +08:00 [DBG] Connection id "0HM77GIF5D9TB" started.
2021-03-15 15:33:25.128 +08:00 [DBG] Connection id "0HM77GIF5D9TC" accepted.
2021-03-15 15:33:25.128 +08:00 [DBG] Connection id "0HM77GIF5D9TC" started.
2021-03-15 15:33:25.132 +08:00 [DBG] Connection id "0HM77GIF5D9TB" sending FIN because: "The client closed the connection."
2021-03-15 15:33:25.135 +08:00 [DBG] Connection id "0HM77GIF5D9TB" disconnecting.
2021-03-15 15:33:25.137 +08:00 [DBG] Connection id "0HM77GIF5D9TB" stopped.
2021-03-15 15:33:25.153 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:33:25.154 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:33:25.155 +08:00 [DBG] POST requests are not supported
2021-03-15 15:33:25.162 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:33:25.162 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:33:25.174 +08:00 [DBG] Connection id "0HM77GIF5D9TC" completed keep alive response.
2021-03-15 15:33:25.175 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 24.4306ms
2021-03-15 15:33:25.180 +08:00 [DBG] Connection id "0HM77GIF5D9TC", Request id "0HM77GIF5D9TC:00000002": started reading request body.
2021-03-15 15:33:25.180 +08:00 [DBG] Connection id "0HM77GIF5D9TC", Request id "0HM77GIF5D9TC:00000002": done reading request body.
2021-03-15 15:33:29.312 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:33:29.313 +08:00 [DBG] POST requests are not supported
2021-03-15 15:33:29.313 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:33:29.314 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:33:29.314 +08:00 [DBG] Connection id "0HM77GIF5D9TC" completed keep alive response.
2021-03-15 15:33:29.315 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 3.1443ms
2021-03-15 15:33:29.316 +08:00 [DBG] Connection id "0HM77GIF5D9TC", Request id "0HM77GIF5D9TC:00000003": started reading request body.
2021-03-15 15:33:29.316 +08:00 [DBG] Connection id "0HM77GIF5D9TC", Request id "0HM77GIF5D9TC:00000003": done reading request body.
2021-03-15 15:33:49.201 +08:00 [DBG] Hosting starting
2021-03-15 15:33:49.286 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:33:49.293 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:33:49.302 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:33:49.316 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:33:49.341 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:33:49.344 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:33:49.346 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:33:49.358 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:33:49.363 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:33:49.367 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:33:49.368 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:33:49.421 +08:00 [DBG] Hosting started
2021-03-15 15:33:49.422 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:33:52.362 +08:00 [DBG] Connection id "0HM77GIN99PGL" received FIN.
2021-03-15 15:33:52.370 +08:00 [DBG] Connection id "0HM77GIN99PGL" accepted.
2021-03-15 15:33:52.373 +08:00 [DBG] Connection id "0HM77GIN99PGL" started.
2021-03-15 15:33:52.375 +08:00 [DBG] Connection id "0HM77GIN99PGM" accepted.
2021-03-15 15:33:52.375 +08:00 [DBG] Connection id "0HM77GIN99PGM" started.
2021-03-15 15:33:52.379 +08:00 [DBG] Connection id "0HM77GIN99PGL" sending FIN because: "The client closed the connection."
2021-03-15 15:33:52.380 +08:00 [DBG] Connection id "0HM77GIN99PGL" disconnecting.
2021-03-15 15:33:52.381 +08:00 [DBG] Connection id "0HM77GIN99PGL" stopped.
2021-03-15 15:33:52.399 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:33:52.402 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:33:52.404 +08:00 [DBG] POST requests are not supported
2021-03-15 15:33:52.410 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:33:52.410 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:33:52.423 +08:00 [DBG] Connection id "0HM77GIN99PGM" completed keep alive response.
2021-03-15 15:33:52.424 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 26.0903ms
2021-03-15 15:33:52.429 +08:00 [DBG] Connection id "0HM77GIN99PGM", Request id "0HM77GIN99PGM:00000002": started reading request body.
2021-03-15 15:33:52.429 +08:00 [DBG] Connection id "0HM77GIN99PGM", Request id "0HM77GIN99PGM:00000002": done reading request body.
2021-03-15 15:34:10.715 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:34:17.879 +08:00 [DBG] POST requests are not supported
2021-03-15 15:34:17.879 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:34:17.880 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:34:28.807 +08:00 [DBG] Connection id "0HM77GIN99PGM" completed keep alive response.
2021-03-15 15:34:28.808 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 18092.6165ms
2021-03-15 15:34:28.808 +08:00 [DBG] Connection id "0HM77GIN99PGM", Request id "0HM77GIN99PGM:00000003": started reading request body.
2021-03-15 15:34:28.809 +08:00 [DBG] Connection id "0HM77GIN99PGM", Request id "0HM77GIN99PGM:00000003": done reading request body.
2021-03-15 15:34:58.047 +08:00 [DBG] Hosting starting
2021-03-15 15:35:15.707 +08:00 [DBG] Hosting starting
2021-03-15 15:35:15.791 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:35:15.797 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:35:15.808 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:35:15.826 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:35:15.847 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:35:15.849 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:35:15.850 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:35:15.854 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:35:15.857 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:35:15.861 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:35:15.862 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:35:15.923 +08:00 [DBG] Hosting started
2021-03-15 15:35:15.923 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:35:19.291 +08:00 [DBG] Connection id "0HM77GJH6AKQN" received FIN.
2021-03-15 15:35:19.303 +08:00 [DBG] Connection id "0HM77GJH6AKQN" accepted.
2021-03-15 15:35:19.307 +08:00 [DBG] Connection id "0HM77GJH6AKQN" started.
2021-03-15 15:35:19.309 +08:00 [DBG] Connection id "0HM77GJH6AKQO" accepted.
2021-03-15 15:35:19.309 +08:00 [DBG] Connection id "0HM77GJH6AKQO" started.
2021-03-15 15:35:19.313 +08:00 [DBG] Connection id "0HM77GJH6AKQN" sending FIN because: "The client closed the connection."
2021-03-15 15:35:19.315 +08:00 [DBG] Connection id "0HM77GJH6AKQN" disconnecting.
2021-03-15 15:35:19.316 +08:00 [DBG] Connection id "0HM77GJH6AKQN" stopped.
2021-03-15 15:35:19.338 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:35:19.340 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:35:23.411 +08:00 [DBG] POST requests are not supported
2021-03-15 15:35:23.417 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:35:23.417 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:35:23.423 +08:00 [DBG] Connection id "0HM77GJH6AKQO" completed keep alive response.
2021-03-15 15:35:23.424 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 4088.3103ms
2021-03-15 15:35:23.429 +08:00 [DBG] Connection id "0HM77GJH6AKQO", Request id "0HM77GJH6AKQO:00000002": started reading request body.
2021-03-15 15:35:23.430 +08:00 [DBG] Connection id "0HM77GJH6AKQO", Request id "0HM77GJH6AKQO:00000002": done reading request body.
2021-03-15 15:36:39.029 +08:00 [DBG] Hosting starting
2021-03-15 15:36:39.103 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:36:39.108 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:36:39.116 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:36:39.128 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:36:39.145 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:36:39.147 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:36:39.148 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:36:39.150 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:36:39.152 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:36:39.154 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:36:39.155 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:36:39.200 +08:00 [DBG] Hosting started
2021-03-15 15:36:39.200 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:36:48.245 +08:00 [DBG] Connection id "0HM77GKBML4P8" received FIN.
2021-03-15 15:36:48.254 +08:00 [DBG] Connection id "0HM77GKBML4P8" accepted.
2021-03-15 15:36:48.257 +08:00 [DBG] Connection id "0HM77GKBML4P8" started.
2021-03-15 15:36:48.259 +08:00 [DBG] Connection id "0HM77GKBML4P9" accepted.
2021-03-15 15:36:48.259 +08:00 [DBG] Connection id "0HM77GKBML4P9" started.
2021-03-15 15:36:48.263 +08:00 [DBG] Connection id "0HM77GKBML4P8" sending FIN because: "The client closed the connection."
2021-03-15 15:36:48.265 +08:00 [DBG] Connection id "0HM77GKBML4P8" disconnecting.
2021-03-15 15:36:48.268 +08:00 [DBG] Connection id "0HM77GKBML4P8" stopped.
2021-03-15 15:36:48.284 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:36:48.286 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:36:48.288 +08:00 [DBG] POST requests are not supported
2021-03-15 15:36:48.294 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:36:48.294 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:36:48.300 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:36:48.301 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 17.9162ms
2021-03-15 15:36:48.306 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000002": started reading request body.
2021-03-15 15:36:48.306 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000002": done reading request body.
2021-03-15 15:37:02.906 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:37:02.907 +08:00 [DBG] POST requests are not supported
2021-03-15 15:37:02.907 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:37:02.907 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:37:02.907 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:37:02.908 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.3200ms
2021-03-15 15:37:02.908 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000003": started reading request body.
2021-03-15 15:37:02.909 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000003": done reading request body.
2021-03-15 15:37:05.328 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:37:05.329 +08:00 [DBG] POST requests are not supported
2021-03-15 15:37:05.330 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:37:05.330 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:37:05.330 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:37:05.331 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 2.2869ms
2021-03-15 15:37:05.331 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000004": started reading request body.
2021-03-15 15:37:05.331 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000004": done reading request body.
2021-03-15 15:37:06.279 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:37:06.281 +08:00 [DBG] POST requests are not supported
2021-03-15 15:37:06.281 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:37:06.282 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:37:06.282 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:37:06.282 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 3.3322ms
2021-03-15 15:37:06.284 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000005": started reading request body.
2021-03-15 15:37:06.285 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000005": done reading request body.
2021-03-15 15:37:07.689 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:37:07.690 +08:00 [DBG] POST requests are not supported
2021-03-15 15:37:07.690 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:37:07.691 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:37:07.691 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:37:07.691 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 1.9516ms
2021-03-15 15:37:07.692 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000006": started reading request body.
2021-03-15 15:37:07.692 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000006": done reading request body.
2021-03-15 15:37:09.888 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:37:09.890 +08:00 [DBG] POST requests are not supported
2021-03-15 15:37:09.890 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:37:09.890 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:37:09.891 +08:00 [DBG] Connection id "0HM77GKBML4P9" completed keep alive response.
2021-03-15 15:37:09.892 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 404 0 - 3.7900ms
2021-03-15 15:37:09.892 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000007": started reading request body.
2021-03-15 15:37:09.893 +08:00 [DBG] Connection id "0HM77GKBML4P9", Request id "0HM77GKBML4P9:00000007": done reading request body.
2021-03-15 15:38:06.097 +08:00 [DBG] Hosting starting
2021-03-15 15:38:06.141 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:38:06.147 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:38:06.148 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:38:06.148 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:38:06.148 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:38:06.148 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:38:06.148 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:38:06.185 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:38:06.189 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:38:06.198 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:38:06.210 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:38:06.227 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:38:06.231 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:38:06.232 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:38:06.235 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:38:06.237 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:38:06.240 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:38:06.240 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:38:06.285 +08:00 [DBG] Hosting started
2021-03-15 15:38:06.285 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:38:09.565 +08:00 [DBG] Connection id "0HM77GL3U6381" received FIN.
2021-03-15 15:38:09.573 +08:00 [DBG] Connection id "0HM77GL3U6381" accepted.
2021-03-15 15:38:09.578 +08:00 [DBG] Connection id "0HM77GL3U6381" started.
2021-03-15 15:38:09.580 +08:00 [DBG] Connection id "0HM77GL3U6382" accepted.
2021-03-15 15:38:09.580 +08:00 [DBG] Connection id "0HM77GL3U6382" started.
2021-03-15 15:38:09.584 +08:00 [DBG] Connection id "0HM77GL3U6381" sending FIN because: "The client closed the connection."
2021-03-15 15:38:09.586 +08:00 [DBG] Connection id "0HM77GL3U6381" disconnecting.
2021-03-15 15:38:09.587 +08:00 [DBG] Connection id "0HM77GL3U6381" stopped.
2021-03-15 15:38:09.602 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:38:09.603 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:38:09.614 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:38:09.614 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:38:09.615 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:38:09.615 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:38:09.615 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:38:09.615 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:38:09.615 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:38:09.621 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:38:09.624 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:38:09.631 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:38:09.637 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:38:09.637 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:38:09.640 +08:00 [DBG] Start token request.
2021-03-15 15:38:09.641 +08:00 [DBG] Start client validation
2021-03-15 15:38:09.644 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:38:09.645 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:38:09.651 +08:00 [DBG] Connection id "0HM77GL3U6382", Request id "0HM77GL3U6382:00000002": started reading request body.
2021-03-15 15:38:09.651 +08:00 [DBG] Connection id "0HM77GL3U6382", Request id "0HM77GL3U6382:00000002": done reading request body.
2021-03-15 15:38:09.654 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:38:09.654 +08:00 [DBG] Secret id found: client
2021-03-15 15:38:09.659 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:38:09.664 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:38:09.664 +08:00 [DBG] Client validation success
2021-03-15 15:38:09.669 +08:00 [DBG] Start token request validation
2021-03-15 15:38:09.672 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:38:12.957 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:38:12.966 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:38:12.978 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:38:12.979 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:38:12.982 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:38:13.160 +08:00 [DBG] Token request success.
2021-03-15 15:38:13.185 +08:00 [DBG] Connection id "0HM77GL3U6382" completed keep alive response.
2021-03-15 15:38:13.187 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 3586.5091ms
2021-03-15 15:38:39.809 +08:00 [DBG] Hosting starting
2021-03-15 15:38:39.861 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:38:39.866 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:38:39.867 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:38:39.867 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:38:39.867 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:38:39.868 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:38:39.868 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:38:39.906 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:38:39.912 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:38:39.921 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:38:39.933 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:38:39.951 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:38:39.953 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:38:39.954 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:38:39.957 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:38:39.959 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:38:39.964 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:38:39.965 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:38:40.011 +08:00 [DBG] Hosting started
2021-03-15 15:38:40.011 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:38:42.559 +08:00 [DBG] Connection id "0HM77GLDOR3AB" received FIN.
2021-03-15 15:38:42.569 +08:00 [DBG] Connection id "0HM77GLDOR3AB" accepted.
2021-03-15 15:38:42.572 +08:00 [DBG] Connection id "0HM77GLDOR3AB" started.
2021-03-15 15:38:42.574 +08:00 [DBG] Connection id "0HM77GLDOR3AC" accepted.
2021-03-15 15:38:42.574 +08:00 [DBG] Connection id "0HM77GLDOR3AC" started.
2021-03-15 15:38:42.581 +08:00 [DBG] Connection id "0HM77GLDOR3AB" sending FIN because: "The client closed the connection."
2021-03-15 15:38:42.584 +08:00 [DBG] Connection id "0HM77GLDOR3AB" disconnecting.
2021-03-15 15:38:42.585 +08:00 [DBG] Connection id "0HM77GLDOR3AB" stopped.
2021-03-15 15:38:42.603 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:38:42.605 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:38:42.606 +08:00 [DBG] POST requests are not supported
2021-03-15 15:38:42.619 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:38:42.620 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:38:42.620 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:38:42.620 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:38:42.621 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:38:42.621 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:38:42.621 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:38:42.624 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:38:42.628 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:38:42.637 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:38:42.642 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:38:42.643 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:38:42.647 +08:00 [DBG] Start token request.
2021-03-15 15:38:42.649 +08:00 [DBG] Start client validation
2021-03-15 15:38:42.652 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:38:42.653 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:38:42.661 +08:00 [DBG] Connection id "0HM77GLDOR3AC", Request id "0HM77GLDOR3AC:00000002": started reading request body.
2021-03-15 15:38:42.662 +08:00 [DBG] Connection id "0HM77GLDOR3AC", Request id "0HM77GLDOR3AC:00000002": done reading request body.
2021-03-15 15:38:42.666 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:38:42.667 +08:00 [DBG] Secret id found: client
2021-03-15 15:38:42.671 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:38:42.676 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:38:42.676 +08:00 [DBG] Client validation success
2021-03-15 15:38:42.680 +08:00 [DBG] Start token request validation
2021-03-15 15:38:42.683 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:38:50.700 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:38:50.708 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:38:50.720 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:38:50.721 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:38:50.727 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:38:50.823 +08:00 [DBG] Token request success.
2021-03-15 15:38:50.847 +08:00 [DBG] Connection id "0HM77GLDOR3AC" completed keep alive response.
2021-03-15 15:38:50.848 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 8246.8442ms
2021-03-15 15:48:23.359 +08:00 [DBG] Hosting starting
2021-03-15 15:48:23.422 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:48:23.429 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:48:23.430 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:48:23.430 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:48:23.430 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:48:23.430 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:48:23.430 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:48:53.147 +08:00 [DBG] Hosting starting
2021-03-15 15:48:53.199 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:48:53.204 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:48:53.205 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:48:53.205 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:48:53.205 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:48:53.206 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:48:53.206 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:48:53.277 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:48:53.282 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:48:53.291 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:48:53.303 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:48:53.324 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:48:53.328 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:48:53.329 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:48:53.332 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:48:53.334 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:48:53.337 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:48:53.337 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:48:53.384 +08:00 [DBG] Hosting started
2021-03-15 15:48:53.384 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:48:56.568 +08:00 [DBG] Connection id "0HM77GR4OFK83" received FIN.
2021-03-15 15:48:56.577 +08:00 [DBG] Connection id "0HM77GR4OFK83" accepted.
2021-03-15 15:48:56.582 +08:00 [DBG] Connection id "0HM77GR4OFK83" started.
2021-03-15 15:48:56.583 +08:00 [DBG] Connection id "0HM77GR4OFK84" accepted.
2021-03-15 15:48:56.584 +08:00 [DBG] Connection id "0HM77GR4OFK84" started.
2021-03-15 15:48:56.590 +08:00 [DBG] Connection id "0HM77GR4OFK83" sending FIN because: "The client closed the connection."
2021-03-15 15:48:56.592 +08:00 [DBG] Connection id "0HM77GR4OFK83" disconnecting.
2021-03-15 15:48:56.593 +08:00 [DBG] Connection id "0HM77GR4OFK83" stopped.
2021-03-15 15:48:56.609 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:48:56.610 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:48:56.612 +08:00 [DBG] POST requests are not supported
2021-03-15 15:48:56.619 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:48:56.619 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:48:56.630 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:48:56.631 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:48:56.631 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:48:56.631 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:48:56.631 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:48:56.632 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:48:56.632 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:48:56.635 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:48:56.639 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:48:56.647 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:48:56.652 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:48:56.652 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:48:56.655 +08:00 [DBG] Start token request.
2021-03-15 15:48:56.656 +08:00 [DBG] Start client validation
2021-03-15 15:48:56.658 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:48:56.659 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:48:56.666 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000002": started reading request body.
2021-03-15 15:48:56.667 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000002": done reading request body.
2021-03-15 15:48:56.670 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:48:56.670 +08:00 [DBG] Secret id found: client
2021-03-15 15:48:56.674 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:48:56.680 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:48:56.680 +08:00 [DBG] Client validation success
2021-03-15 15:48:56.686 +08:00 [DBG] Start token request validation
2021-03-15 15:48:56.689 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:48:57.132 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:48:57.139 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:48:57.153 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:48:57.153 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:48:57.156 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:48:57.351 +08:00 [DBG] Token request success.
2021-03-15 15:48:57.375 +08:00 [DBG] Connection id "0HM77GR4OFK84" completed keep alive response.
2021-03-15 15:48:57.399 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 791.5898ms
2021-03-15 15:48:59.946 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:48:59.946 +08:00 [DBG] POST requests are not supported
2021-03-15 15:48:59.947 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:48:59.947 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:48:59.954 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:48:59.957 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:48:59.957 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:48:59.958 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:48:59.960 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:48:59.961 +08:00 [DBG] Start token request.
2021-03-15 15:48:59.961 +08:00 [DBG] Start client validation
2021-03-15 15:48:59.961 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:48:59.961 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:48:59.961 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000003": started reading request body.
2021-03-15 15:48:59.962 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000003": done reading request body.
2021-03-15 15:48:59.962 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:48:59.962 +08:00 [DBG] Secret id found: client
2021-03-15 15:48:59.963 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:48:59.963 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:48:59.965 +08:00 [DBG] Client validation success
2021-03-15 15:48:59.966 +08:00 [DBG] Start token request validation
2021-03-15 15:48:59.966 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:48:59.976 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:48:59.976 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:48:59.977 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:48:59.977 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:48:59.978 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:48:59.979 +08:00 [DBG] Token request success.
2021-03-15 15:48:59.979 +08:00 [DBG] Connection id "0HM77GR4OFK84" completed keep alive response.
2021-03-15 15:48:59.980 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 34.0548ms
2021-03-15 15:49:01.513 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:49:01.513 +08:00 [DBG] POST requests are not supported
2021-03-15 15:49:01.514 +08:00 [DBG] No candidates found for the request path '/connect/token'
2021-03-15 15:49:01.515 +08:00 [DBG] Request did not match any endpoints
2021-03-15 15:49:01.517 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:49:01.518 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:49:01.519 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:49:01.523 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:49:01.523 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:49:01.524 +08:00 [DBG] Start token request.
2021-03-15 15:49:01.524 +08:00 [DBG] Start client validation
2021-03-15 15:49:01.524 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:49:01.524 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:49:01.525 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000004": started reading request body.
2021-03-15 15:49:01.525 +08:00 [DBG] Connection id "0HM77GR4OFK84", Request id "0HM77GR4OFK84:00000004": done reading request body.
2021-03-15 15:49:01.525 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:49:01.525 +08:00 [DBG] Secret id found: client
2021-03-15 15:49:01.526 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:49:01.526 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:49:01.529 +08:00 [DBG] Client validation success
2021-03-15 15:49:01.529 +08:00 [DBG] Start token request validation
2021-03-15 15:49:01.530 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:49:01.540 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:49:01.540 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:49:01.541 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:49:01.544 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:49:01.544 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:49:01.545 +08:00 [DBG] Token request success.
2021-03-15 15:49:01.546 +08:00 [DBG] Connection id "0HM77GR4OFK84" completed keep alive response.
2021-03-15 15:49:01.546 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 33.0094ms
2021-03-15 15:51:51.655 +08:00 [DBG] Hosting starting
2021-03-15 15:51:51.708 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:51:51.715 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:51:51.716 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:51:51.716 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:51:51.716 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:51:51.716 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:51:51.716 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:51:51.761 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:51:51.767 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:51:51.777 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:51:51.793 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:51:51.816 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:51:51.819 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:51:51.820 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:51:51.825 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:51:51.827 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:51:51.830 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:51:51.831 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:51:51.894 +08:00 [DBG] Hosting started
2021-03-15 15:51:51.895 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:52:01.419 +08:00 [DBG] Connection id "0HM77GSRRBO9C" received FIN.
2021-03-15 15:52:01.430 +08:00 [DBG] Connection id "0HM77GSRRBO9C" accepted.
2021-03-15 15:52:01.433 +08:00 [DBG] Connection id "0HM77GSRRBO9C" started.
2021-03-15 15:52:01.435 +08:00 [DBG] Connection id "0HM77GSRRBO9D" accepted.
2021-03-15 15:52:01.435 +08:00 [DBG] Connection id "0HM77GSRRBO9D" started.
2021-03-15 15:52:01.439 +08:00 [DBG] Connection id "0HM77GSRRBO9C" sending FIN because: "The client closed the connection."
2021-03-15 15:52:01.440 +08:00 [DBG] Connection id "0HM77GSRRBO9C" disconnecting.
2021-03-15 15:52:01.441 +08:00 [DBG] Connection id "0HM77GSRRBO9C" stopped.
2021-03-15 15:52:01.457 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:52:01.458 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:52:01.459 +08:00 [DBG] POST requests are not supported
2021-03-15 15:52:01.470 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:52:01.470 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:52:01.470 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:52:01.470 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:52:01.470 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:52:01.471 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:52:01.471 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:52:01.473 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:52:01.477 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:52:01.484 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:52:01.489 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:52:01.490 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:52:01.492 +08:00 [DBG] Start token request.
2021-03-15 15:52:01.493 +08:00 [DBG] Start client validation
2021-03-15 15:52:01.496 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:52:01.497 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:52:01.503 +08:00 [DBG] Connection id "0HM77GSRRBO9D", Request id "0HM77GSRRBO9D:00000002": started reading request body.
2021-03-15 15:52:01.504 +08:00 [DBG] Connection id "0HM77GSRRBO9D", Request id "0HM77GSRRBO9D:00000002": done reading request body.
2021-03-15 15:52:01.506 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:52:01.506 +08:00 [DBG] Secret id found: client
2021-03-15 15:52:01.510 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:52:01.515 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:52:01.516 +08:00 [DBG] Client validation success
2021-03-15 15:52:01.520 +08:00 [DBG] Start token request validation
2021-03-15 15:52:01.523 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:52:01.964 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:52:01.972 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:52:01.984 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:52:01.985 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:52:01.989 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:52:02.170 +08:00 [DBG] Token request success.
2021-03-15 15:52:02.198 +08:00 [DBG] Connection id "0HM77GSRRBO9D" completed keep alive response.
2021-03-15 15:52:02.199 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 744.2395ms
2021-03-15 15:52:04.944 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:52:04.945 +08:00 [DBG] POST requests are not supported
2021-03-15 15:52:04.945 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:52:04.946 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:52:04.946 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:52:04.946 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:52:04.947 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:52:04.949 +08:00 [DBG] Start token request.
2021-03-15 15:52:04.949 +08:00 [DBG] Start client validation
2021-03-15 15:52:04.949 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:52:04.949 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:52:04.949 +08:00 [DBG] Connection id "0HM77GSRRBO9D", Request id "0HM77GSRRBO9D:00000003": started reading request body.
2021-03-15 15:52:04.950 +08:00 [DBG] Connection id "0HM77GSRRBO9D", Request id "0HM77GSRRBO9D:00000003": done reading request body.
2021-03-15 15:52:04.950 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:52:04.950 +08:00 [DBG] Secret id found: client
2021-03-15 15:52:04.950 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:52:04.951 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:52:04.951 +08:00 [DBG] Client validation success
2021-03-15 15:52:04.951 +08:00 [DBG] Start token request validation
2021-03-15 15:52:04.951 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:52:04.960 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:52:04.960 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:52:04.961 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:52:04.961 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:52:04.962 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:52:04.963 +08:00 [DBG] Token request success.
2021-03-15 15:52:04.963 +08:00 [DBG] Connection id "0HM77GSRRBO9D" completed keep alive response.
2021-03-15 15:52:04.963 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 19.4814ms
2021-03-15 15:54:21.405 +08:00 [DBG] Hosting starting
2021-03-15 15:54:21.465 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 15:54:21.473 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 15:54:21.474 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 15:54:21.474 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 15:54:21.474 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 15:54:21.474 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 15:54:21.474 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 15:54:21.528 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 15:54:21.534 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 15:54:21.544 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 15:54:21.559 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 15:54:21.581 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:54:21.584 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 15:54:21.586 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 15:54:21.590 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 15:54:21.592 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 15:54:21.595 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 15:54:21.597 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 15:54:21.659 +08:00 [DBG] Hosting started
2021-03-15 15:54:21.659 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 15:54:25.508 +08:00 [DBG] Connection id "0HM77GU6PGB4A" received FIN.
2021-03-15 15:54:25.517 +08:00 [DBG] Connection id "0HM77GU6PGB4A" accepted.
2021-03-15 15:54:25.520 +08:00 [DBG] Connection id "0HM77GU6PGB4A" started.
2021-03-15 15:54:25.522 +08:00 [DBG] Connection id "0HM77GU6PGB4B" accepted.
2021-03-15 15:54:25.522 +08:00 [DBG] Connection id "0HM77GU6PGB4B" started.
2021-03-15 15:54:25.527 +08:00 [DBG] Connection id "0HM77GU6PGB4A" sending FIN because: "The client closed the connection."
2021-03-15 15:54:25.529 +08:00 [DBG] Connection id "0HM77GU6PGB4A" disconnecting.
2021-03-15 15:54:25.531 +08:00 [DBG] Connection id "0HM77GU6PGB4A" stopped.
2021-03-15 15:54:25.546 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 15:54:25.547 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 15:54:25.549 +08:00 [DBG] POST requests are not supported
2021-03-15 15:54:25.560 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 15:54:25.561 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 15:54:25.562 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 15:54:25.562 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 15:54:25.562 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 15:54:25.562 +08:00 [DBG] Error Url: /home/error
2021-03-15 15:54:25.562 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 15:54:25.565 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:54:25.569 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 15:54:25.578 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 15:54:25.583 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 15:54:25.584 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 15:54:25.586 +08:00 [DBG] Start token request.
2021-03-15 15:54:25.588 +08:00 [DBG] Start client validation
2021-03-15 15:54:25.592 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 15:54:25.593 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 15:54:25.599 +08:00 [DBG] Connection id "0HM77GU6PGB4B", Request id "0HM77GU6PGB4B:00000002": started reading request body.
2021-03-15 15:54:25.599 +08:00 [DBG] Connection id "0HM77GU6PGB4B", Request id "0HM77GU6PGB4B:00000002": done reading request body.
2021-03-15 15:54:25.602 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 15:54:25.602 +08:00 [DBG] Secret id found: client
2021-03-15 15:54:25.607 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 15:54:25.612 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 15:54:25.612 +08:00 [DBG] Client validation success
2021-03-15 15:54:25.616 +08:00 [DBG] Start token request validation
2021-03-15 15:54:25.619 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 15:54:26.068 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 15:54:26.076 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 15:54:26.089 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 15:54:26.089 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 15:54:26.093 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 15:54:26.276 +08:00 [DBG] Token request success.
2021-03-15 15:54:26.301 +08:00 [DBG] Connection id "0HM77GU6PGB4B" completed keep alive response.
2021-03-15 15:54:26.312 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 767.6902ms
2021-03-15 16:07:40.775 +08:00 [DBG] Hosting starting
2021-03-15 16:07:40.824 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 16:07:40.828 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 16:07:40.828 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 16:07:40.829 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 16:07:40.829 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 16:07:40.829 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 16:07:40.829 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 16:07:40.867 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 16:07:40.874 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 16:07:40.883 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 16:07:40.896 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 16:07:40.916 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 16:07:40.919 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 16:07:40.920 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 16:07:40.924 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 16:07:40.926 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 16:07:40.929 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 16:07:40.931 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 16:07:40.980 +08:00 [DBG] Hosting started
2021-03-15 16:07:40.981 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 16:07:43.220 +08:00 [DBG] Connection id "0HM77H5KH2EIL" received FIN.
2021-03-15 16:07:43.228 +08:00 [DBG] Connection id "0HM77H5KH2EIL" accepted.
2021-03-15 16:07:43.232 +08:00 [DBG] Connection id "0HM77H5KH2EIL" started.
2021-03-15 16:07:43.234 +08:00 [DBG] Connection id "0HM77H5KH2EIM" accepted.
2021-03-15 16:07:43.234 +08:00 [DBG] Connection id "0HM77H5KH2EIM" started.
2021-03-15 16:07:43.238 +08:00 [DBG] Connection id "0HM77H5KH2EIL" sending FIN because: "The client closed the connection."
2021-03-15 16:07:43.239 +08:00 [DBG] Connection id "0HM77H5KH2EIL" disconnecting.
2021-03-15 16:07:43.242 +08:00 [DBG] Connection id "0HM77H5KH2EIL" stopped.
2021-03-15 16:07:43.256 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109
2021-03-15 16:07:43.258 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 16:07:43.269 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 16:07:43.270 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 16:07:43.270 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 16:07:43.272 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 16:07:43.272 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 16:07:43.273 +08:00 [DBG] Error Url: /home/error
2021-03-15 16:07:43.273 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 16:07:43.276 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:07:43.280 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:07:43.287 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:07:43.292 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:07:43.293 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:07:43.295 +08:00 [DBG] Start token request.
2021-03-15 16:07:43.297 +08:00 [DBG] Start client validation
2021-03-15 16:07:43.299 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:07:43.301 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:07:43.308 +08:00 [DBG] Connection id "0HM77H5KH2EIM", Request id "0HM77H5KH2EIM:00000002": started reading request body.
2021-03-15 16:07:43.309 +08:00 [DBG] Connection id "0HM77H5KH2EIM", Request id "0HM77H5KH2EIM:00000002": done reading request body.
2021-03-15 16:07:43.312 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:07:43.312 +08:00 [DBG] Secret id found: client
2021-03-15 16:07:43.317 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:07:43.322 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:07:43.322 +08:00 [DBG] Client validation success
2021-03-15 16:07:43.328 +08:00 [DBG] Start token request validation
2021-03-15 16:07:43.331 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:07:43.678 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 16:07:43.685 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:07:43.700 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 16:07:43.700 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 16:07:43.703 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 16:07:43.805 +08:00 [DBG] Token request success.
2021-03-15 16:07:43.836 +08:00 [DBG] Connection id "0HM77H5KH2EIM" completed keep alive response.
2021-03-15 16:07:43.837 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 109 - 200 - application/json;+charset=UTF-8 582.4618ms
2021-03-15 16:08:13.410 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126
2021-03-15 16:08:13.416 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:08:13.416 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:08:13.418 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:08:13.419 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:08:13.455 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:08:13.457 +08:00 [DBG] Start token request.
2021-03-15 16:08:13.457 +08:00 [DBG] Start client validation
2021-03-15 16:08:13.458 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:08:13.458 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:08:13.458 +08:00 [DBG] Connection id "0HM77H5KH2EIM", Request id "0HM77H5KH2EIM:00000003": started reading request body.
2021-03-15 16:08:13.458 +08:00 [DBG] Connection id "0HM77H5KH2EIM", Request id "0HM77H5KH2EIM:00000003": done reading request body.
2021-03-15 16:08:13.459 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:08:13.459 +08:00 [DBG] Secret id found: client
2021-03-15 16:08:13.459 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:08:13.460 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:08:13.460 +08:00 [DBG] Client validation success
2021-03-15 16:08:13.460 +08:00 [DBG] Start token request validation
2021-03-15 16:08:13.460 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:08:13.475 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 16:08:13.475 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:08:13.477 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 16:08:13.477 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 16:08:13.477 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 16:08:13.479 +08:00 [DBG] Creating refresh token
2021-03-15 16:08:13.480 +08:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-15 16:08:13.499 +08:00 [DBG] Token request success.
2021-03-15 16:08:13.499 +08:00 [DBG] Connection id "0HM77H5KH2EIM" completed keep alive response.
2021-03-15 16:08:13.500 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126 - 200 - application/json;+charset=UTF-8 90.3494ms
2021-03-15 16:11:13.509 +08:00 [DBG] Hosting starting
2021-03-15 16:11:13.556 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-03-15 16:11:13.563 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-03-15 16:11:13.564 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-03-15 16:11:13.564 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-03-15 16:11:13.565 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-03-15 16:11:13.565 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-03-15 16:11:13.565 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-03-15 16:11:13.607 +08:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-03-15 16:11:13.613 +08:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9.xml'.
2021-03-15 16:11:13.623 +08:00 [DBG] Found key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9".
2021-03-15 16:11:13.638 +08:00 [DBG] Considering key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" with expiration date "2021-04-20T09:14:00.2671553+00:00" as default key.
2021-03-15 16:11:13.660 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 16:11:13.663 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-03-15 16:11:13.665 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-03-15 16:11:13.669 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-03-15 16:11:13.671 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-03-15 16:11:13.673 +08:00 [DBG] Using key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" as the default key.
2021-03-15 16:11:13.674 +08:00 [DBG] Key ring with default key "f1e0e34a-c2e8-4cd9-9f89-5927bcbaeaf9" was loaded during application startup.
2021-03-15 16:11:13.736 +08:00 [DBG] Hosting started
2021-03-15 16:11:13.736 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-03-15 16:11:16.822 +08:00 [DBG] Connection id "0HM77H7K64LGN" received FIN.
2021-03-15 16:11:16.831 +08:00 [DBG] Connection id "0HM77H7K64LGN" accepted.
2021-03-15 16:11:16.835 +08:00 [DBG] Connection id "0HM77H7K64LGN" started.
2021-03-15 16:11:16.837 +08:00 [DBG] Connection id "0HM77H7K64LGO" accepted.
2021-03-15 16:11:16.837 +08:00 [DBG] Connection id "0HM77H7K64LGO" started.
2021-03-15 16:11:16.842 +08:00 [DBG] Connection id "0HM77H7K64LGN" sending FIN because: "The client closed the connection."
2021-03-15 16:11:16.844 +08:00 [DBG] Connection id "0HM77H7K64LGN" disconnecting.
2021-03-15 16:11:16.846 +08:00 [DBG] Connection id "0HM77H7K64LGN" stopped.
2021-03-15 16:11:16.863 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126
2021-03-15 16:11:16.865 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2021-03-15 16:11:16.876 +08:00 [DBG] Login Url: /Account/Login
2021-03-15 16:11:16.876 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-15 16:11:16.877 +08:00 [DBG] Logout Url: /Account/Logout
2021-03-15 16:11:16.877 +08:00 [DBG] ConsentUrl Url: /consent
2021-03-15 16:11:16.877 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-15 16:11:16.878 +08:00 [DBG] Error Url: /home/error
2021-03-15 16:11:16.879 +08:00 [DBG] Error Id Parameter: errorId
2021-03-15 16:11:16.882 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:11:16.886 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:11:16.894 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:11:16.899 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:11:16.901 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:11:16.903 +08:00 [DBG] Start token request.
2021-03-15 16:11:16.905 +08:00 [DBG] Start client validation
2021-03-15 16:11:16.907 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:11:16.908 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:11:16.915 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000002": started reading request body.
2021-03-15 16:11:16.915 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000002": done reading request body.
2021-03-15 16:11:16.918 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:11:16.918 +08:00 [DBG] Secret id found: client
2021-03-15 16:11:16.922 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:11:16.927 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:11:16.927 +08:00 [DBG] Client validation success
2021-03-15 16:11:16.933 +08:00 [DBG] Start token request validation
2021-03-15 16:11:16.936 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:11:18.382 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 16:11:18.390 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:11:18.403 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 16:11:18.403 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 16:11:18.406 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 16:11:18.590 +08:00 [DBG] Creating refresh token
2021-03-15 16:11:18.590 +08:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-15 16:11:18.628 +08:00 [DBG] Token request success.
2021-03-15 16:11:18.637 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:11:18.638 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126 - 200 - application/json;+charset=UTF-8 1777.5493ms
2021-03-15 16:12:15.686 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 98
2021-03-15 16:12:15.693 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:12:15.697 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:12:15.699 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:12:15.700 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:12:15.700 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:12:15.702 +08:00 [DBG] Start token request.
2021-03-15 16:12:15.702 +08:00 [DBG] Start client validation
2021-03-15 16:12:15.703 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:12:15.703 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:12:15.703 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000003": started reading request body.
2021-03-15 16:12:15.703 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000003": done reading request body.
2021-03-15 16:12:15.704 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:12:15.704 +08:00 [DBG] Secret id found: client
2021-03-15 16:12:15.704 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:12:15.705 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:12:15.705 +08:00 [DBG] Client validation success
2021-03-15 16:12:15.705 +08:00 [DBG] Start token request validation
2021-03-15 16:12:15.705 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:12:15.706 +08:00 [ERR] Requested scope not allowed: profile
2021-03-15 16:12:15.706 +08:00 [ERR] {"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:12:15.710 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:12:15.711 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 98 - 400 - application/json;+charset=UTF-8 24.7491ms
2021-03-15 16:12:19.260 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126
2021-03-15 16:12:19.264 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:12:19.265 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:12:19.265 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:12:19.269 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:12:19.270 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:12:19.270 +08:00 [DBG] Start token request.
2021-03-15 16:12:19.270 +08:00 [DBG] Start client validation
2021-03-15 16:12:19.270 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:12:19.271 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:12:19.271 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000004": started reading request body.
2021-03-15 16:12:19.271 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000004": done reading request body.
2021-03-15 16:12:19.272 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:12:19.272 +08:00 [DBG] Secret id found: client
2021-03-15 16:12:19.272 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:12:19.273 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:12:19.273 +08:00 [DBG] Client validation success
2021-03-15 16:12:19.273 +08:00 [DBG] Start token request validation
2021-03-15 16:12:19.273 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:12:19.289 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 16:12:19.290 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:12:19.291 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 16:12:19.291 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 16:12:19.291 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 16:12:19.293 +08:00 [DBG] Creating refresh token
2021-03-15 16:12:19.293 +08:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-15 16:12:19.298 +08:00 [DBG] Token request success.
2021-03-15 16:12:19.298 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:12:19.298 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126 - 200 - application/json;+charset=UTF-8 38.6254ms
2021-03-15 16:13:50.709 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180
2021-03-15 16:13:50.710 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:13:50.710 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:13:50.711 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:13:50.711 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:13:50.713 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:13:50.713 +08:00 [DBG] Start token request.
2021-03-15 16:13:50.714 +08:00 [DBG] Start client validation
2021-03-15 16:13:50.714 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:13:50.714 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:13:50.714 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000005": started reading request body.
2021-03-15 16:13:50.715 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000005": done reading request body.
2021-03-15 16:13:50.715 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:13:50.716 +08:00 [DBG] Secret id found: client
2021-03-15 16:13:50.716 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:13:50.716 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:13:50.716 +08:00 [DBG] Client validation success
2021-03-15 16:13:50.717 +08:00 [DBG] Start token request validation
2021-03-15 16:13:50.718 +08:00 [DBG] Start validation of refresh token request
2021-03-15 16:13:50.740 +08:00 [DBG] Token validation success
{"ClientId":"client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"momo","client_id":"client","scope":["api1","offline_access"],"auth_time":1615795939,"idp":"local","amr":"custom","UserId":"1001","Name":"momo","Phone":"135*******4","Role":"41"},"$type":"TokenValidationLog"}
2021-03-15 16:13:50.742 +08:00 [DBG] Validation of refresh token request success
2021-03-15 16:13:50.742 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"e0d1316975dd001ccf715e9527c9ffbfc76d28dd6645d6d5e57e4db9c1f912be","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"prj":"Signal","grant_type":"refresh_token","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:13:50.746 +08:00 [DBG] Updating refresh token
2021-03-15 16:13:50.746 +08:00 [DBG] Token usage is one-time only. Generating new handle
2021-03-15 16:13:50.753 +08:00 [DBG] Created refresh token in store
2021-03-15 16:13:50.754 +08:00 [DBG] Token request success.
2021-03-15 16:13:50.754 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:13:50.757 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180 - 200 - application/json;+charset=UTF-8 46.1316ms
2021-03-15 16:14:04.639 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180
2021-03-15 16:14:04.640 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:04.640 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:04.641 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:14:04.641 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:14:04.642 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:14:04.642 +08:00 [DBG] Start token request.
2021-03-15 16:14:04.642 +08:00 [DBG] Start client validation
2021-03-15 16:14:04.642 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:14:04.643 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:14:04.643 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000006": started reading request body.
2021-03-15 16:14:04.643 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000006": done reading request body.
2021-03-15 16:14:04.644 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:14:04.644 +08:00 [DBG] Secret id found: client
2021-03-15 16:14:04.644 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:14:04.644 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:14:04.644 +08:00 [DBG] Client validation success
2021-03-15 16:14:04.645 +08:00 [DBG] Start token request validation
2021-03-15 16:14:04.645 +08:00 [DBG] Start validation of refresh token request
2021-03-15 16:14:04.646 +08:00 [DBG] refresh_token grant with value: e0d1316975dd001ccf715e9527c9ffbfc76d28dd6645d6d5e57e4db9c1f912be not found in store.
2021-03-15 16:14:04.646 +08:00 [WRN] Invalid refresh token
2021-03-15 16:14:04.647 +08:00 [WRN] Refresh token validation failed. aborting., request details: []
2021-03-15 16:14:04.647 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:14:04.648 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180 - 400 - application/json;+charset=UTF-8 8.4380ms
2021-03-15 16:14:23.796 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126
2021-03-15 16:14:23.797 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:23.797 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:23.798 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:14:23.798 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:14:23.798 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:14:23.799 +08:00 [DBG] Start token request.
2021-03-15 16:14:23.799 +08:00 [DBG] Start client validation
2021-03-15 16:14:23.799 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:14:23.799 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:14:23.799 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000007": started reading request body.
2021-03-15 16:14:23.800 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000007": done reading request body.
2021-03-15 16:14:23.800 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:14:23.800 +08:00 [DBG] Secret id found: client
2021-03-15 16:14:23.801 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:14:23.801 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:14:23.801 +08:00 [DBG] Client validation success
2021-03-15 16:14:23.801 +08:00 [DBG] Start token request validation
2021-03-15 16:14:23.802 +08:00 [DBG] Start resource owner password token request validation
2021-03-15 16:14:25.356 +08:00 [DBG] Resource owner password token request validation success.
2021-03-15 16:14:25.357 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"momo","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"momo","password":"***REDACTED***","prj":"Signal","grant_type":"password","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:14:25.359 +08:00 [DBG] Getting claims for access token for client: client
2021-03-15 16:14:25.359 +08:00 [DBG] Getting claims for access token for subject: momo
2021-03-15 16:14:25.359 +08:00 [DBG] Claim types from profile service that were filtered: ["sub","amr","idp","auth_time"]
2021-03-15 16:14:25.361 +08:00 [DBG] Creating refresh token
2021-03-15 16:14:25.361 +08:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-15 16:14:25.366 +08:00 [DBG] Token request success.
2021-03-15 16:14:25.367 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:14:25.367 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 126 - 200 - application/json;+charset=UTF-8 1570.8620ms
2021-03-15 16:14:46.022 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180
2021-03-15 16:14:46.023 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:46.023 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:14:46.023 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:14:46.023 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:14:46.023 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:14:46.024 +08:00 [DBG] Start token request.
2021-03-15 16:14:46.024 +08:00 [DBG] Start client validation
2021-03-15 16:14:46.024 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:14:46.024 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:14:46.025 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000008": started reading request body.
2021-03-15 16:14:46.025 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000008": done reading request body.
2021-03-15 16:14:46.025 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:14:46.025 +08:00 [DBG] Secret id found: client
2021-03-15 16:14:46.026 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:14:46.026 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:14:46.026 +08:00 [DBG] Client validation success
2021-03-15 16:14:46.026 +08:00 [DBG] Start token request validation
2021-03-15 16:14:46.026 +08:00 [DBG] Start validation of refresh token request
2021-03-15 16:14:46.032 +08:00 [DBG] Token validation success
{"ClientId":"client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"momo","client_id":"client","scope":["api1","offline_access"],"auth_time":1615796065,"idp":"local","amr":"custom","UserId":"1001","Name":"momo","Phone":"135*******4","Role":"41"},"$type":"TokenValidationLog"}
2021-03-15 16:14:46.036 +08:00 [DBG] Validation of refresh token request success
2021-03-15 16:14:46.036 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"b724269d57c06a3592524c3f3af08b77c4133b813cadd4cfc49ca51cac6c1aef","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"prj":"Signal","grant_type":"refresh_token","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:14:46.038 +08:00 [DBG] Updating refresh token
2021-03-15 16:14:46.038 +08:00 [DBG] Token usage is one-time only. Generating new handle
2021-03-15 16:14:46.042 +08:00 [DBG] Created refresh token in store
2021-03-15 16:14:46.042 +08:00 [DBG] Token request success.
2021-03-15 16:14:46.042 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:14:46.043 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180 - 200 - application/json;+charset=UTF-8 21.5905ms
2021-03-15 16:15:09.394 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180
2021-03-15 16:15:13.402 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:15:13.402 +08:00 [DBG] AuthenticationScheme: idsrv was not authenticated.
2021-03-15 16:15:13.403 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-15 16:15:15.793 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-15 16:15:15.794 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-15 16:15:15.795 +08:00 [DBG] Start token request.
2021-03-15 16:15:15.795 +08:00 [DBG] Start client validation
2021-03-15 16:15:15.795 +08:00 [DBG] Start parsing Basic Authentication secret
2021-03-15 16:15:15.795 +08:00 [DBG] Start parsing for secret in post body
2021-03-15 16:15:15.795 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000009": started reading request body.
2021-03-15 16:15:15.796 +08:00 [DBG] Connection id "0HM77H7K64LGO", Request id "0HM77H7K64LGO:00000009": done reading request body.
2021-03-15 16:15:15.796 +08:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-15 16:15:15.797 +08:00 [DBG] Secret id found: client
2021-03-15 16:15:15.797 +08:00 [DBG] client configuration validation for client client succeeded.
2021-03-15 16:15:15.797 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-15 16:15:15.797 +08:00 [DBG] Client validation success
2021-03-15 16:15:15.798 +08:00 [DBG] Start token request validation
2021-03-15 16:15:15.798 +08:00 [DBG] Start validation of refresh token request
2021-03-15 16:15:31.025 +08:00 [DBG] Token validation success
{"ClientId":"client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"momo","client_id":"client","scope":["api1","offline_access"],"auth_time":1615796065,"idp":"local","amr":"custom","UserId":"1001","Name":"momo","Phone":"135*******4","Role":"41"},"$type":"TokenValidationLog"}
2021-03-15 16:15:31.026 +08:00 [DBG] Validation of refresh token request success
2021-03-15 16:15:31.027 +08:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"23b4c8f6a6f0545ec19614bbc6f3c7b367e5c07eaee934cbb47a99653471a8de","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"prj":"Signal","grant_type":"refresh_token","scope":"api1 offline_access","client_id":"client","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-03-15 16:15:31.028 +08:00 [DBG] Updating refresh token
2021-03-15 16:15:31.028 +08:00 [DBG] Token usage is one-time only. Generating new handle
2021-03-15 16:15:31.033 +08:00 [DBG] Created refresh token in store
2021-03-15 16:15:31.033 +08:00 [DBG] Token request success.
2021-03-15 16:15:32.646 +08:00 [DBG] Connection id "0HM77H7K64LGO" completed keep alive response.
2021-03-15 16:15:32.647 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:1221/connect/token application/x-www-form-urlencoded 180 - 200 - application/json;+charset=UTF-8 23252.6309ms
2021-03-15 19:57:02.528 +08:00 [DBG] Connection id "0HM77H7K64LGO" received FIN.
2021-03-15 19:57:02.565 +08:00 [DBG] Connection id "0HM77H7K64LGO" sending FIN because: "The client closed the connection."
2021-03-15 19:57:02.566 +08:00 [DBG] Connection id "0HM77H7K64LGO" disconnecting.
2021-03-15 19:57:02.575 +08:00 [DBG] Connection id "0HM77H7K64LGO" stopped.
2021-03-15 19:57:03.975 +08:00 [DBG] Hosting shutdown
2021-11-01 18:42:07.161 +08:00 [DBG] Hosting starting
2021-11-01 18:42:07.283 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2021-11-01 18:42:07.291 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2021-11-01 18:42:07.292 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2021-11-01 18:42:07.293 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2021-11-01 18:42:07.293 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2021-11-01 18:42:07.293 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2021-11-01 18:42:07.293 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2021-11-01 18:42:07.386 +08:00 [INF] User profile is available. Using 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-01 18:42:07.395 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-5e1e562f-8d9c-4594-b65b-14b2b3448d53.xml'.
2021-11-01 18:42:07.445 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-bdc80a61-18aa-4e35-956b-85358d072620.xml'.
2021-11-01 18:42:07.467 +08:00 [DBG] Found key "5e1e562f-8d9c-4594-b65b-14b2b3448d53".
2021-11-01 18:42:07.485 +08:00 [DBG] Found key "bdc80a61-18aa-4e35-956b-85358d072620".
2021-11-01 18:42:07.495 +08:00 [DBG] Considering key "5e1e562f-8d9c-4594-b65b-14b2b3448d53" with expiration date "2021-09-13T02:07:37.4385085+00:00" as default key.
2021-11-01 18:42:07.496 +08:00 [DBG] Key "5e1e562f-8d9c-4594-b65b-14b2b3448d53" is no longer under consideration as default key because it is expired, revoked, or cannot be deciphered.
2021-11-01 18:42:07.540 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-11-01 18:42:07.544 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-11-01 18:42:07.545 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-11-01 18:42:07.549 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-11-01 18:42:07.552 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-11-01 18:42:07.555 +08:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2021-11-01 18:42:07.555 +08:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2021-11-01 18:42:07.560 +08:00 [INF] Creating key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" with creation date "2021-11-01T10:42:07.5566990+00:00", activation date "2021-11-01T10:42:07.3882615+00:00", and expiration date "2022-01-30T10:42:07.3882615+00:00".
2021-11-01 18:42:07.566 +08:00 [DBG] Descriptor deserializer type for key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2021-11-01 18:42:07.568 +08:00 [DBG] No key escrow sink found. Not writing key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" to escrow.
2021-11-01 18:42:07.592 +08:00 [DBG] Encrypting to Windows DPAPI for current user account (DESKTOP-357OU5G\xingy).
2021-11-01 18:42:07.595 +08:00 [INF] Writing data to file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-fe52e8e5-d805-4e50-8716-5cdbecfd084a.xml'.
2021-11-01 18:42:07.597 +08:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2021-11-01 18:42:07.598 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-5e1e562f-8d9c-4594-b65b-14b2b3448d53.xml'.
2021-11-01 18:42:07.599 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-bdc80a61-18aa-4e35-956b-85358d072620.xml'.
2021-11-01 18:42:07.600 +08:00 [DBG] Reading data from file 'C:\Users\xingy\AppData\Local\ASP.NET\DataProtection-Keys\key-fe52e8e5-d805-4e50-8716-5cdbecfd084a.xml'.
2021-11-01 18:42:07.606 +08:00 [DBG] Found key "5e1e562f-8d9c-4594-b65b-14b2b3448d53".
2021-11-01 18:42:07.606 +08:00 [DBG] Found key "bdc80a61-18aa-4e35-956b-85358d072620".
2021-11-01 18:42:07.607 +08:00 [DBG] Found key "fe52e8e5-d805-4e50-8716-5cdbecfd084a".
2021-11-01 18:42:07.610 +08:00 [DBG] Considering key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" with expiration date "2022-01-30T10:42:07.3882615+00:00" as default key.
2021-11-01 18:42:07.613 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-11-01 18:42:07.614 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2021-11-01 18:42:07.615 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2021-11-01 18:42:07.617 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2021-11-01 18:42:07.617 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2021-11-01 18:42:07.619 +08:00 [DBG] Using key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" as the default key.
2021-11-01 18:42:07.620 +08:00 [DBG] Key ring with default key "fe52e8e5-d805-4e50-8716-5cdbecfd084a" was loaded during application startup.
2021-11-01 18:42:07.805 +08:00 [DBG] Using development certificate: CN=localhost (Thumbprint: AA4369410F4F65C9144083E530501991817E3E04)
2021-11-01 18:42:07.881 +08:00 [DBG] Hosting started
2021-11-01 18:42:07.882 +08:00 [DBG] Loaded hosting startup assembly IdentityServer
2021-11-01 18:42:08.309 +08:00 [DBG] Connection id "0HMCT4H0EIJKI" accepted.
2021-11-01 18:42:08.311 +08:00 [DBG] Connection id "0HMCT4H0EIJKI" started.
2021-11-01 18:42:08.424 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2021-11-01 18:42:08.529 +08:00 [DBG] Connection id "0HMCT4H0EIJKI" stopped.
2021-11-01 18:42:08.532 +08:00 [DBG] Connection id "0HMCT4H0EIJKI" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-11-01 18:42:08.538 +08:00 [DBG] Connection id "0HMCT4H0EIJKJ" accepted.
2021-11-01 18:42:08.543 +08:00 [DBG] Connection id "0HMCT4H0EIJKJ" started.
2021-11-01 18:42:08.636 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2021-11-01 18:42:08.638 +08:00 [DBG] Connection id "0HMCT4H0EIJKJ" stopped.
2021-11-01 18:42:08.639 +08:00 [DBG] Connection id "0HMCT4H0EIJKJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-11-01 18:42:08.742 +08:00 [DBG] Connection id "0HMCT4H0EIJKK" accepted.
2021-11-01 18:42:08.743 +08:00 [DBG] Connection id "0HMCT4H0EIJKK" started.
2021-11-01 18:42:08.800 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2021-11-01 18:42:08.803 +08:00 [DBG] Connection id "0HMCT4H0EIJKK" stopped.
2021-11-01 18:42:08.805 +08:00 [DBG] Connection id "0HMCT4H0EIJKK" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-11-01 18:42:08.824 +08:00 [DBG] Connection id "0HMCT4H0EIJKL" accepted.
2021-11-01 18:42:08.832 +08:00 [DBG] Connection id "0HMCT4H0EIJKL" started.
2021-11-01 18:42:08.901 +08:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2021-11-01 18:42:08.904 +08:00 [DBG] Connection id "0HMCT4H0EIJKL" stopped.
2021-11-01 18:42:08.905 +08:00 [DBG] Connection id "0HMCT4H0EIJKL" sending FIN because: "The Socket transport's send loop completed gracefully."
2021-11-01 18:49:05.738 +08:00 [DBG] Hosting shutdown
